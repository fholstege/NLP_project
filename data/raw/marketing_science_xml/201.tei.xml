<?xml version="1.0" encoding="UTF-8"?>
<TEI xml:space="preserve" xmlns="http://www.tei-c.org/ns/1.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.tei-c.org/ns/1.0 https://raw.githubusercontent.com/kermitt2/grobid/master/grobid-home/schemas/xsd/Grobid.xsd"
 xmlns:xlink="http://www.w3.org/1999/xlink">
	<teiHeader xml:lang="en">
		<fileDesc>
			<titleStmt>
				<title level="a" type="main">Optimizing Click-Through in Online Rankings with Endogenous Search Refinement</title>
			</titleStmt>
			<publicationStmt>
				<publisher/>
				<availability status="unknown"><licence/></availability>
				<date type="published" when="2017-06-15">June 15, 2017</date>
			</publicationStmt>
			<sourceDesc>
				<biblStruct>
					<analytic>
						<author>
							<persName><forename type="first">Babur</forename><surname>De</surname></persName>
						</author>
						<author>
							<persName><surname>Santos</surname></persName>
						</author>
						<author role="corresp">
							<persName><forename type="first">Sergei</forename><surname>Koulayev</surname></persName>
							<email>sergei.koulayev@gmail.com</email>
							<affiliation key="aff1">
								<orgName type="department">Consumer Financial Protection Bureau</orgName>
								<address>
									<postCode>20552</postCode>
									<settlement>Washington</settlement>
									<region>DC</region>
								</address>
							</affiliation>
						</author>
						<author>
							<persName><forename type="first">John</forename><forename type="middle">E</forename><surname>Walker</surname></persName>
						</author>
						<author>
							<affiliation key="aff0">
								<orgName type="department">Department of Economics</orgName>
								<orgName type="institution">Clemson University</orgName>
								<address>
									<postCode>29634</postCode>
									<settlement>Clemson</settlement>
									<region>South Carolina</region>
								</address>
							</affiliation>
						</author>
						<title level="a" type="main">Optimizing Click-Through in Online Rankings with Endogenous Search Refinement</title>
					</analytic>
					<monogr>
						<idno type="ISSN">0732-2399 (print)</idno>
						<imprint>
							<date type="published" when="2017-06-15">June 15, 2017</date>
						</imprint>
					</monogr>
					<idno type="DOI">10.1287/mksc.2017.1036</idno>
					<note type="submission">Received: June 19, 2013 Revised: December 30, 2014; April 7, 2016; July 14, 2016 Accepted: September 5, 2016</note>
				</biblStruct>
			</sourceDesc>
		</fileDesc>
		<encodingDesc>
			<appInfo>
				<application version="0.6.2" ident="GROBID" when="2021-07-06T11:26+0000">
					<desc>GROBID - A machine learning software for extracting information from scholarly documents</desc>
					<ref target="https://github.com/kermitt2/grobid"/>
				</application>
			</appInfo>
		</encodingDesc>
		<profileDesc>
			<textClass>
				<keywords>
					<term>consumer search</term>
					<term>website design</term>
					<term>search refinement</term>
					<term>targeting</term>
					<term>clickstream analysis</term>
					<term>website morphing</term>
					<term>customization</term>
					<term>Internet marketing</term>
					<term>sorting</term>
					<term>filtering</term>
				</keywords>
			</textClass>
			<abstract>
<div xmlns="http://www.tei-c.org/ns/1.0"><p>Consumers engage in costly searches to evaluate the increasing number of product options available from online retailers. Presenting the best alternatives at the beginning reduces search costs associated with a consumer finding the right product. We use rich data on consumer click-stream behavior from a major web-based hotel comparison platform to estimate a model of search and click. We propose a method of determining the ranking of search results that maximizes consumers' click-through rates (CTRs) based on partial information available to the platform at the time of the consumer request, its assessment of consumers' preferences, and the expected consumer type based on request parameters from the current visit. Our method has two distinct advantages. First, we endogenize a consumer response to the ranking using search refinement tools, such as sorting and filtering of product options. Accounting for these search refinement actions is important since the ranking and consumer search actions together shape the consideration set from which clicks are made. Second, rankings are targeted to anonymous consumers by relating price sensitivity to request parameters, such as the length of stay, number of guests, and day of the week of the stay. We find that predicted CTRs under our proposed ranking are almost double those of the platform's default ranking.</p><p>History: K. Sudhir served as the editor-in-chief and Jean-Pierre Dubé served as associate editor for this article.</p></div>
			</abstract>
		</profileDesc>
	</teiHeader>
	<text xml:lang="en">
		<body>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="1.">Introduction</head><p>In the past decade, Internet commerce has achieved significant advances in the reach and complexity of recommendation systems that shape consumer choices in almost all areas of commerce. Consumers search for product information in online search engine results to evaluate a wide range of products, such as electronics, books, mortgages, hotel rooms, and flights. Although the problem of optimal recommendation is not new (salespeople have long struggled with choosing which product to endorse to a consumer) the majority of consumer information generated online has revolutionized the way firms collect and analyze consumer data, customize product choices, and target product recommendations (see, e.g., <ref type="bibr" target="#b1">Ansari and Mela 2003)</ref>.</p><p>At the core of product recommendations is the challenge of matching a set of products to a set of consumers whose tastes are heterogeneous and often unobserved. The accuracy of the match depends on how firms leverage available information to infer consumer preferences. For example, Amazon makes recommendations in diverse product categories by exploiting product correlations present in other consumers' transaction histories. Although potential buyers' preferences for a new product are unobservable, modern recommendation systems are typically based on the notion that preferences for various products are similar across the set of consumers who bought or rated other products in a similar way. This is the underlying assumption of collaborative filtering and other hybrid methodologies, including those presented by <ref type="bibr" target="#b0">Anderson et al. (2003)</ref>, <ref type="bibr" target="#b3">Basilico and Hofmann (2004)</ref>, <ref type="bibr" target="#b13">Huang et al. (2004)</ref>, <ref type="bibr" target="#b18">Melville et al. (2002)</ref>, <ref type="bibr" target="#b29">Vozalis and Margaritis (2004)</ref>, <ref type="bibr" target="#b31">Yu et al. (2003)</ref>, and <ref type="bibr" target="#b22">Moon and Russell (2008)</ref>.</p><p>Unfortunately, the collaborative approach is infeasible in the case of anonymous consumers, for whom the platform has no knowledge of past choices, but who comprise a substantial share of all platform visitors. Generally, recommendations for such visitors can be made using distributional information about unobserved tastes, which is inferred from past choices made by other users. One such example is the website morphing literature that enables a website to learn the latent cognitive style of a consumer and morph the content or the "look and feel" of a website to maximize click-through rates (CTRs) or serve the most effective banner advertising <ref type="bibr" target="#b12">(Hauser et al. 2009</ref>, Urban et al.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>De los Santos and Koulayev: Optimizing Click-Through in Online Rankings</head><p>Marketing <ref type="bibr">Science, 2017</ref><ref type="bibr">, vol. 36, no. 4, pp. 542-564, © 2017</ref><ref type="bibr">INFORMS 543 2014</ref>). An alternative to collaborative methods for recommendation rankings is utility-based discrete choice models (for instance those presented by <ref type="bibr" target="#b2">Ansari et al. 2000</ref><ref type="bibr" target="#b26">, Schaupp and Bélanger 2005</ref><ref type="bibr" target="#b5">, Burke 2000</ref>; for an overview, see <ref type="bibr" target="#b24">Ricci et al. 2011)</ref>.</p><p>This paper proposes a utility-based model in which consumers' search actions and clicks are jointly determined. Based on this model, we propose a method of determining a targeted ranking that maximizes consumers' CTRs based on partial information available to the platform at the time of the request. By considering search actions and clicks together, we follow the recent literature that incorporates search into discrete choice models of consumer demand. Notably, <ref type="bibr" target="#b15">Kim et al. (2010)</ref> use aggregate consumer search data from Amazon to estimate demand models of durable products. Other papers, such as De los Santos (2017), <ref type="bibr" target="#b11">Ghose et al. (2014)</ref>, and <ref type="bibr" target="#b16">Koulayev (2014)</ref>, incorporate search activity at the consumer level.</p><p>Our model explicitly accounts for the endogeneity of consumers' search refinement actions, such as sorting and filtering, as well as the diverse ways in which consumers combine these tools to navigate search results. Accounting for search actions is important because the composition of consideration sets is a result of a twoway interaction between product rankings and consumer search. On one hand, the use of search refinement tools alters the presentation of results in a way that is independent of the ranking, often undermining its impact on consumer choice. On the other hand, the ranking itself changes the way consumers search, an effect that must be taken into account when evaluating an alternative means of ranking.</p><p>Our proposed ranking maximizes the predicted CTR by manipulating displays in a way that anticipates the kinds of hotels that a consumer would find through her own search actions. Intuitively, a superior ranking attempts to strike a balance between two goals, i.e., helping the user save on search costs by presenting relevant results earlier and stimulating exploration. Suppose we expect that a consumer will sort results by increasing price and then advance to the pages of modestly priced hotels. What would be the optimal composition of the initial display before the sorting action? It would include some lower-priced hotels so as to preempt the user's own search action and perhaps motivate her to explore other types of hotels. It would also include some higher quality, higher priced hotels to diversify the user's choice set in case she decides to continue with price sorting. Thus, the key element of our model is a structural link between current display contents and the consumer decision on whether to continue searching and which search tools to use. In our application, we use click-stream data from a major online travel platform to show the validity of this modeling approach. The link between past displays and future search actions has also been explored by <ref type="bibr" target="#b19">Montgomery et al. (2004)</ref>, who use a dynamic probit model to show that search actions exhibit a strong "memory" where the types of products that have been recently viewed by the consumer may predict her next search action. In a closely related paper, <ref type="bibr" target="#b6">Chen and Yao (2016)</ref> demonstrate that search refinement tools complement the default ranking, encouraging more search and higher CTRs. The main difference between the two studies is the notion of search: While <ref type="bibr" target="#b6">Chen and Yao (2016)</ref> consider the click itself as a search action, we abstract from the click-related uncertainty and focus on modeling the search refinement actions. In a related paper, <ref type="bibr" target="#b9">Fradkin (2017)</ref> analyzes consumer search behavior in the peer-to-peer lodging rental platform Airbnb, including the use of search refinement strategies.</p><p>In addition, we present a targeted recommendation ranking that maximizes the CTR using product and other information about a consumer available to the platform at the time of the search request. This approach is similar to the website morphing literature, but instead of learning about consumer's cognitive styles, the main objective is to learn about consumers' preferences. In our application, consumers are anonymous to the online platform but relevant observable information is available in the current consumer visit. In particular, we show that the request parameters affect a consumer's outside option and are a primary source of information about consumer preferences, especially informing us of their price sensitivity. For instance, a search request for a hotel room on an online travel platform, which includes the date of the stay and the number of guests, reveals that the consumer is more likely to be a business traveler if the stay is on a weekday, if the room request is for single occupancy, and if the request was made fewer (versus more) days in advance of the stay. This allows us to optimally serve a consumer with a ranking that maximizes the CTR.</p><p>An important consideration is unobserved consumer preferences. We propose that a significant portion of heterogeneity can be inferred from the request parameters. After controlling for request parameters, there remains a significant unobserved component in consumer tastes. Using past clicks and search choices made by other consumers, we infer the shape of the distribution of that component, which we then use in the construction of a targeted ranking.</p><p>The closest work to this paper is by <ref type="bibr" target="#b10">Ghose et al. (2012)</ref>, who incorporate user-generated content (e.g., online hotel reviews) into a recommendation ranking. Our approach differs in that we explicitly account for a consumer's search refinement actions in the construction of the ranking and the targeted methodology based on available consumer information.</p><p>We compare the performance of optimal ranking from the search and click random coefficients model with various alternative rankings, including the default <ref type="bibr">Marketing Science, 2017</ref><ref type="bibr">, vol. 36, no. 4, pp. 542-564, © 2017</ref> ranking implemented by the platform. The ranking based on the search and click model leads to an almost two-fold increase in CTR compared to the default ranking. Additionally, we compare performance of the optimal ranking to different discrete choice specifications (in terms of clicks) that do not endogenize consumer search. By doing so, the optimal ranking increases the CTR by 4% to 5% compared to a utility-based ranking from a static discrete choice model. This is a nontrivial gain for a web platform with millions of visitors per month. The search and click model not only provides a better fit in terms of search actions and clicks but also provides a better fit in terms of clicks conditional on observed search behavior. The search model can better explain clicks because it uses inequalities imposed by search decisions to update expectations about the distribution of consumer tastes. Intuitively, our targeted ranking places preferred alternatives higher in the search results. This leads to an increase in CTR not only because it saves consumers the effort of evaluating inferior alternatives but also because of the well known phenomenon that consumers are more likely to click on higher ranked positions (e.g., <ref type="bibr" target="#b17">Lohse 1997</ref><ref type="bibr" target="#b14">, Joachims et al. 2005</ref>.</p><p>The rest of the paper is organized as follows. Section 2 presents a theoretical model of search and click, followed by a discussion of our modeling assumptions. Section 3 outlines our approach to estimating the model from the data, including construction of the likelihood function and its simulation. Section 4 formally defines the problem of optimal ranking, presents our solution to the issue of dimensionality involved in this problem, and concludes with a simple two product example. Section 5 presents the data, discusses identification and our solution to the problem of price endogeneity, and concludes with estimation results. Section 6 presents evaluations of alternative ranking methods. Section 7 concludes with managerial implications. Our findings highlight the practical and methodological relevance of utility-based discrete choice models that help to optimize CTRs by creating a more relevant ranking of highly differentiated products to users of online platforms.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2.">A Model of Consumer Search and Click</head><p>In this section, we present a model of consumer choice where search and click decisions are jointly determined. A consumer searches for a hotel room on an online travel platform by initiating a request that includes the city, dates of stay, and number of guests. The platform responds with a display of hotel alternatives that satisfy the consumer's request and are ranked according to the platform's recommendation system. After observing the first page of ranked results, the consumer can browse the pages of additional hotel options, sort the results by some hotel characteristic (such as price, distance to city center, star rating, etc.) or filter the results according to one or more parameters of these characteristics.</p><p>We model the interaction between the attractiveness of the current display to the consumer and the consumer's choice of how to search and which hotels to click. The consumer's decision to use these search tools (including browsing, sorting, and filtering) is endogenous, as it is affected by the ranking and the consumer's preferences. Use of these tools may produce a different set of results for each consumer. Therefore, the consumer's search session is a sequence of search actions and the corresponding hotel displays that result from those actions. On each resulting display, the consumer may click on any hotel to reveal additional information about that option.</p><p>The model shares the same cost-benefit trade-off as the <ref type="bibr" target="#b30">Weitzman (1979)</ref> model, i.e., a consumer will perform the next search action only if the expected gains of the search exceeds the search cost. However, there are two main departures from the Weitzman model. First, at every step the consumer in our model has multiple options on how to search, each offering a distinct distribution of the gains from search. Second, even if we fix a particular search strategy (as in Weitzman), in our case the distribution of gains from search is changing across every search attempt. Hence the reservation values are nonstationary as they change with each search action. The latter property allows us to rationalize recalling behavior, that is, instances where a consumer returns to a previously found alternative; the Weitzman sequential model cannot explain this.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2.1.">Click Model</head><p>Let i index consumers, j index hotels, and t 1, . . . , T i index displays that a consumer observes during a search process of length T i . A display is a ranked set of hotels, denoted by D ti . Taking this display as given, we first consider a model that predicts which hotel(s) on the current display will be clicked. Then, we examine consumers' choice of search actions.</p><p>The attractiveness of a hotel j ∈ D ti for consumer i is measured by click utility u i j . In general, because the consumer has limited information about a hotel at the click stage, this click utility is not the actual utility from staying at the hotel. Rather, u i j can be interpreted as an expected utility, which will be refined after the consumer clicks through and finds additional information on the hotel's details page.</p><p>Even though consumers observe many hotels during their search, only a few are clicked. The relative rarity of hotel clicks indicates that clicks are costly (for example, due to the cost of processing information on the landing page). Structural models of costly clicks, such as those cited in <ref type="bibr" target="#b10">Ghose et al. (2012)</ref>, imply that a click is made only if the utility of the clicked hotel exceeds a certain consumer-specific threshold. In our model, we capture this effect in reduced form by introducing an outside option, the u i0 , so that a hotel is clicked only if its value exceeds this threshold. We further assume that at most one click per page can be made; this assumption simplifies computations. The data show that fewer than 2% of displays have more than one click per display, making this a reasonable assumption.</p><p>Together, our assumptions imply that a hotel j ∈ D ti is clicked if and only if it is the best hotel on the page and its value exceeds the outside option</p><formula xml:id="formula_0">u i j &gt; u i0 ,<label>(1)</label></formula><formula xml:id="formula_1">u i j ≥ u ik , ∀ k ∈ D ti .</formula><p>(2)</p><p>Clicks depend on past search actions to the extent that past searches lead to the discovery of the clicked hotel. Clicks also affect future search actions by providing a fallback option, or status quo, as an alternative to future searches. Specifically, the current period's status quo is defined as</p><formula xml:id="formula_2">u * ti ≡ max{u i j | j ∈ {0}, D 1i , . . . , D ti }.<label>(3)</label></formula><p>In other words, it is the utility of the best hotel found so far, including the value of the outside option. As we observe clicks, we also observe the identity of the best hotel across periods.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2.2.">Choosing a Search Action</head><p>After display D ti is observed, the consumer contemplates the next search action. There are three major categories of search actions, i.e., browsing through pages of search results, sorting the results according to certain product attributes (such as price or distance), and filtering results according to a consumer-supplied parameter over a product attribute. Within sorting and filtering, there are parameters that can be fine-tuned, resulting in dozens of search refinement options available in each period. Let A ti denote the choice set of search tools available to consumer i after display D ti is observed, and let a ∈ A ti be an element of this set. The choice of a particular search action a ti ∈ A ti will produce the next set of results, D (t+1)i . However, the effect of a given search action on search results will also depend on the combination of search actions used in previous periods. These past search actions can be summarized by what we call a "search state," S ti S(a 1i , a 2i , . . . , a (t−1)i ). The current period's search state is the specification of sorting and filtering parameters that are applied in the current period. When making a choice a ti ∈ A ti , the consumer takes the search state as given.</p><p>For example, after an initial consumer request and an automatic search action, a 1i , is performed by the platform, suppose the consumer refines the search by sequentially sorting by price and distance to the city, and filtering the last set of results a 1i {"default sorting"}, a 2i {"sort by price"}, a 3i {"sort by distance to city center"}, a 4i {"filter price between $200 and $300"}.</p><p>After these search actions, the search state in period 5 is such that results are sorted by distance to city center, and only hotels priced between $200 and $300 per night are shown. The sorting actions in periods t 1, 2 are not part of the search state because they were undone by the sorting by distance action in period 3. If the consumer now decides to change the price filter, she knows that the results will still be sorted by distance. If she decides to sort by price, then she knows that only hotels in the <ref type="bibr">[200,</ref><ref type="bibr">300]</ref> range will be shown, not necessarily the cheapest hotels.</p><p>In addition to the consumer's search action and the search state, the third determinant of the next period's display is the condition of the market, such as hotel availability and prices. This last factor introduces randomness into the contents of the next display: If the consumer was aware of the full set of market conditions there would be no need for a search. Consumer beliefs about the contents of the next page following the choice of search action a ti in a search state S ti are denoted by the probability distribution H(D (t+1)i | a ti , S ti ).</p><p>Each search action is costly, and each consumer incurs a search cost, c i , for each action, which is drawn from a common probability distribution. The benefit of a search action is the possibility of improvement over the current best utility, u * ti . To compute the expected benefit of search, we translate consumer beliefs over sets of hotels, H(D (t+1)i | a ti , S ti ), into beliefs over a single dimensional parameter, i.e., maximum utility among hotels on the next page,ũ (t+1)i max{u i j | j ∈ D (t+1)i }. Denote this belief as F i (ũ | a ti , S ti ). Note that while belief H is common across all consumers who are in the same search state, the belief F i also depends on preferences and will vary with unobserved consumer type. In Section 3.2 we discuss how beliefs H and F i might be approximated using the available data.</p><p>The search choice is a two-stage decision: A consumer decides which search action to use and whether to continue the search. The first part is decided by evaluating the expected gain associated with each available search action, a ∈ A ti ,</p><formula xml:id="formula_3">G a ti (u * ti ) ∫ +∞ −∞ max(ũ − u * ti , 0) dF i [ũ | a, S ti ],<label>(4)</label></formula><p>and choosing the action that delivers the highest improvement. The consumer continues searching if and only if the payoff from the best tool exceeds search cost</p><formula xml:id="formula_4">G a * ti (u * ti ) &gt; c i ,<label>(5)</label></formula><formula xml:id="formula_5">G a * ti (u * ti ) ≥ G ti (a, u * ti ), ∀ a ∈ A ti .</formula><p>Marketing <ref type="bibr">Science, 2017</ref><ref type="bibr">, vol. 36, no. 4, pp. 542-564, © 2017</ref> An alternative way to present this choice is by using the concept of reservation utility for each search action, defined as r a ti (c i ):</p><formula xml:id="formula_6">∫ +∞ r (ũ −r) dF i [ũ | a, S ti ] c i , ∀ a ∈ A ti . (6)</formula><p>By definition, reservation utility is the expected gain from a search such that a consumer is indifferent between searching and not searching. Clearly, for any alternative action, a , we haver a ti (c i ) &gt;r a ti (c i ) if and only if G a ti (u * ti ) &gt; G a ti (u * ti ). We assume that the reservation utility may vary across consumers via an alternative specific i.i.d. extreme value type 1 shock, η i j . The reservation utility can be expressed as</p><formula xml:id="formula_7">r a ti (c i ) r a ti (c i ) + η i j .<label>(7)</label></formula><p>This shock incorporates possible differences among consumers as to the distribution of search results; hence we allow for heterogeneity in consumers' beliefs about F i (u). On the empirical side, we find this assumption necessary to rationalize the observed choices of search actions by consumers. The difficulty of rationalizing discrete choices in a dynamic context is a well known problem, first documented by <ref type="bibr" target="#b25">Rust (1987)</ref>. In our context, this problem arises because the number of search alternatives in the consumer choice sets is much larger than the number of dimensions by which these alternatives differ (that is, the mean and variance of search results). Similar to (5), the consumer will optimally choose the search action with the highest reservation utility provided that it exceeds the value of the status quo</p><formula xml:id="formula_8">r a ti ti ≥ r a ti , ∀ a ∈ A ti , t 2, . . . , T − 1, (8) r a ti ti ≥ u * ti ,<label>(9)</label></formula><p>where a ti is the choice actually made by consumer i in period t. A consumer will stop searching if all reservation utilities fall below the status quo</p><formula xml:id="formula_9">r a ti ≤ u * ti , ∀ a ∈ A ti , t T.<label>(10)</label></formula><p>Inequalities (1), (2), (8), and (9) describe how consumers make search and click decisions in our model. These inequalities can be integrated out, with respect to quantities that are unobserved to the researcher, to obtain the main outcome of interest, i.e., the probability that a random visitor would make a click. For managers of the search aggregator, the model outlined above provides a structural link between the ranking and the click probability. This can be exploited to evaluate counterfactual rankings.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2.3.">Discussion</head><p>In our case, the search aggregator provides consumers with flexible search tools (e.g., sorting and filtering) to help them navigate through hundreds of hotel (and airline) options. The fact that a consumer can use any of these search refinement tools in any combination increases the number of consumer search strategies. A structural approach to modeling the full set of potential search strategies is infeasible. To overcome this hurdle, we adopt a one-step lookahead approach where the consumer is building her search strategy step by step: At each subsequent page, she decides which search tool to use next. In this way, she only considers the immediate gains from searching, but does not consider the option value given by the possibility of continuing to search after the next set of results. Therefore, the reservation value in ( <ref type="formula">6</ref>) is an approximation of the true continuation value of choosing a particular search action. We offer two rationales for this assumption.</p><p>First, the goal of our study requires a credible simulation of the effects of a recommendation ranking on consumer search. To this end, our model must rationalize a wide variety of search actions that are observed in the data. We achieve this by using an approximate solution to the choice of search strategy by structurally modeling only the dominant search strategies (similar to <ref type="bibr" target="#b16">Koulayev 2014)</ref>.</p><p>Second, this is a reasonable approximation if a consumer who considers only immediate benefits of search may fail to take action in situations where the benefits are negative but the option value of searching further outweighs that loss. An example is browsing after price sorting: A consumer may not be interested in the cheapest hotel available but must take a costly action (price sorting) for a chance to consider other options by browsing the price-sorted alternatives. Fortunately, our data includes the time a consumer spent on a page, which helps in evaluating the incidence of such errors. The amount of time spent indicates that a consumer would spend very little time on results in which she is not interested. In our data, we observe 1,282 search sessions where consumers browse alternatives after price sorting. Specifically, we find that in only 3% of search-action pairs did consumers spend fewer than 10 seconds on the first page of price-sorted results, and more than 15 seconds on the second page. By contrast, in 16% of search-action pairs consumers spent more than 15 seconds on the first page and fewer than 10 seconds on the second page. In the remaining observations, consumers spent similar amounts of time on both pages.</p><p>Another type of error that our approximation may introduce is in the choice of search action, as in (5).</p><p>A consumer from our model may fail to choose a search action with less immediate benefit but higher option value than other search tools: differences in option values among search options matter, although the technological features of this platform suggest that these differences are probably negligible. This is because almost all search actions are available for use at any point during the search, so that a particular search choice in the current period does not represent a commitment to a particular search path in the future. Because the set of future search opportunities does not vary with the selected search action, the option values may not vary a great deal.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.">Empirical Specification</head></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.1.">Click Utility</head><p>A consumer's choice is represented by a click on one of the hotels and indicates that the clicked hotel is more attractive than other hotels on the same display. This revealed preference approach to clicks is corroborated by previous studies, such as <ref type="bibr" target="#b14">Joachims et al. (2005)</ref> and <ref type="bibr" target="#b4">Brynjolfsson and Smith (2000)</ref>, who compared click choices to actual purchases and found that clicks provide a reasonable proxy for the preferences of an average consumer.</p><p>The model of click utility is Parameter α i measures a consumer's price sensitivity; β i is a vector of tastes for a set of nonprice characteristics, X j , that can be observed on the display, i.e., brand, star rating, neighborhood, and distance to city center. The parameter δ i measures the effect of the hotel's position in the display, L i j , on the probability of clicking.</p><formula xml:id="formula_10">u i j α i p i j + β i X j + δ i L i j + ε i j .<label>(11)</label></formula><p>Figure <ref type="figure" target="#fig_0">1</ref> shows that, on average, consumers are more likely to click on hotels at higher positions. We interpret δ i L i j as being related to the cost of within-page search rather than being part of inherent consumer utility that is attributable to hotel characteristics, α i p i j + β i X j . Although this distinction is not important for prediction of clicks, it will be important for the recommendation ranking. Last, ε i j are i.i.d. type I extreme value error terms that represent a consumer's idiosyncratic preference for a particular hotel.</p><p>The utility of the outside option is given by</p><formula xml:id="formula_11">u i0 γ 0 + γ 1 R i + ε i0 ,<label>(12)</label></formula><p>where R i is a vector of parameters of request submitted by consumer i. These include the number of people staying in the room, dates of search, and dates of <ref type="bibr">Science, 2017</ref><ref type="bibr">, vol. 36, no. 4, pp. 542-564, © 2017</ref> stay. From this information we derive whether the trip includes a weekend, the number of days of the stay, and advance purchase length. For example, a consumer who is searching further in advance might have a higher value for the outside option due to the possibility of searching later, or they may have less flexible plans.</p><formula xml:id="formula_12">Marketing</formula><p>Taste heterogeneity in our model arises due to differences in parameters of request, as well as unobserved heterogeneity</p><formula xml:id="formula_13">β i β 0 + β 1 R i +β i , (<label>13</label></formula><formula xml:id="formula_14">) ln(−α i ) α 0 + α 1 R i +α i , (<label>14</label></formula><formula xml:id="formula_15">)</formula><p>where β 0 is the vector of baseline tastes, β 1 is the matrix of interaction terms, andβ i ∼ N(0, Σ β ) are consumerspecific deviations from the mean. The parameter α i is a consumer-specific price coefficient, which includes interaction terms with parameters of request, and ln(α i ) ∼ N(0, Σ α ).</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.2.">Approximation of Beliefs</head><p>Before taking a costly search action, a consumer formulates a belief about the contents of the next page that she would observe in the next period, denoted as H(D (t+1)i | a, S), where a is the search action and S is the search state. In the estimation, we approximate H with an empirical distribution of pages that were actually observed by consumers who took action a in state S.</p><p>In our application, we construct beliefs for action-state pairs (a, S) for which we have at least 50 observations. Because we cannot construct adequate approximations of consumer beliefs that will explain search actions made in rarely observed search states, these search actions are omitted. Furthermore, even in popular search states, some actions are rarely chosen; we remove these actions from the set of alternatives, A ti , when modeling search choice in period t. The latter restriction is the primary reason that A ti varies across t and i. Altogether, our model can rationalize 56.4% of observed uses of search actions, and 97.2% of search sessions.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.3.">Likelihood Function</head><p>We seek the probability that inequalities related to clicking decisions, ( <ref type="formula" target="#formula_0">1</ref>) and ( <ref type="formula">2</ref>), and inequalities related to search decisions, (8) and ( <ref type="formula" target="#formula_8">9</ref>), are satisfied. That probability is an integral over consumer level unobservables, i.e., search cost c i , tastes α i , β i , product specific shocks ε i j , and search action specific shocks, η i j . To ease notation, we omit consumer index i for the remainder of this section. We perform integration in two steps. First, we derive the analytic likelihood function, conditional on the vector of utilities of clicked hotels and consumer traits, i.e., tastes α, β, search cost c, and the value of the outside option, u 0 . That is, we integrate over productspecific shocks ε i j for nonclicked hotels (which make up the majority of unobserved quantities) and search choice specific shocks η a ti . The likelihood for decisions in period t is</p><formula xml:id="formula_16">L t (u j(1) , . . . , u j(t) | α, β, c) j∈D t , j j(t) exp(r a t t ) a∈A t exp(r a t ) × F(u j(t) − µ i j ) × 1 − F u * t − ln a∈A t exp(r a t ) 1(t&lt;T) × F u * t − ln a∈A t exp(r a t ) 1(t T) ,<label>(15)</label></formula><p>where j(t) is the index of the clicked hotel in period t (with j t 0 if no click is made); u j(t) is the utility of the clicked hotel; u * t max{u j(1) , . . . , u j(t) } is the utility of the best alternative so far while in period t (i.e., over hotels observed in periods D 1 , . . . , D t ); a t is the search action chosen in period t after observing D t ; r a t t is the reservation value of that search action; A t is the choice set of search actions available. Finally, F is the cumulative distribution function (CDF) of the extreme value type 1 random variable. The expression (15) is intuitive. The logit term at the beginning of the first line corresponds to the choice of the search action; F(u j(t) − µ i j ) captures the probability that the clicked hotel in a period has a higher utility than nonclicked hotels. On the second line, the term when t &lt; T captures the decision to continue searching, i.e., the probability that searching is more profitable than stopping. Finally, for the last period considered in the search session, t T, the term captures the condition under which search is no longer optimal.</p><p>Second, we obtain the unconditional likelihood by numerically integrating over unobserved quantities, (u j(1) , . . . , u j(T) , α, β, c) (j(1), . . . , j(T))</p><formula xml:id="formula_17">1 I I i 1 T t 1 L t (u i j(1) , . . . , u i j(t) | α i , β i , c i ) ,<label>(16)</label></formula><p>where i stands for a simulated consumer obtained by independently drawing unobserved consumer-specific taste parameters and search costs. We use 50 Halton draws to perform numeric integration. Search cost draws are made from a log-normal distribution whose parameters are estimated.</p><p>Next we show how to use the estimates from this model to obtain the optimal ranking.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.">A Platform's Problem of Optimal Ranking</head><p>The optimal ranking system we derive is designed to maximize the expected CTR for the organic set of search results. Although this does not coincide with the more general goal of profit maximization, click maximization is an important input. Specifically, a ranking that maximizes CTR may serve as a starting point that can be readily modified to satisfy various external factors, such as click fees that vary across products, presence of sponsored results, etc. Furthermore, a revealed preference approach to clicks implies that click maximization amounts to maximization of consumer satisfaction. That in itself is an important long-term goal of a search platform, often separate from the short-term goal of profit maximization, which could deviate from maximizing consumer satisfaction if there are incentives to place hotels higher in the rankings. Indeed, search platforms today earn most of their revenues through clearly marked sponsored offerings, bypassing the need to distort organic search results. We use a discrete choice approach to manage expected CTR on a search platform. After a consumer compares the attractiveness of the options observed during the search session, the click is an outcome of optimal consumer choice. The insight of our approach is to select a candidate ranking and use model predictions to calculate the probability that a random consumer will make at least one click. The discrete choice model creates a link between a candidate ranking and a click through the assumption that a click is the result of optimal consumer choice. By changing the presentation of results in a display, a candidate ranking affects the probability that the consumer's most preferred hotel will be discovered and therefore clicked. The model offers a straightforward way to evaluate multiple counterfactuals without the need to run costly real time experiments on the platform.</p><p>Unobserved heterogeneity is a major challenge for obtaining an optimal ranking. It is particularly acute for search aggregators, where the majority of consumers are partially anonymous, as they are not registered (or do not sign in). Generally, there are two dimensions of unobserved heterogeneity. The first is unobserved tastes for hotel attributes, i.e., location, quality, and price. Of course, it is possible to ignore the unobserved component and simply offer a ranking that targets an average consumer, but this results in a loss of efficiency, as we will demonstrate in Section 6. The second dimension of heterogeneity, which is less often mentioned in the literature, is related to the consumer's search preferences, which are also unobserved since the ranking must be created and presented to the consumer immediately after the search request is made and before any search actions are observed. Because consumers' search actions after presentation of the initial default ranking will distort (or even eliminate) the effects of the recommended ranking, a model of optimal ranking should anticipate how a consumer will continue searching after the initial display. The opposite is also true: The search, itself, is affected by ranking. For instance, if a consumer finds an attractive option on the initial display, she may decide to stop searching earlier, thus eliminating the potential for future clicks. The model of consumer search and click presented above addresses both dimensions of consumer heterogeneity.</p><p>In the rest of this section we formally state the problem of optimal ranking in a setting where a consumer's search actions might interfere with the effectiveness of the ranking. Then we present simplified examples to build intuition on how and why our proposed ranking method outperforms alternative rankings.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.1.">Recommendation Ranking</head><p>The objective of the recommendation ranking is to manipulate displays of hotels observed by the consumer, D t for t 1, . . . , T, in a way that maximizes the expected CTR. A consumer sees the initial display, D 1 , which consists of the top 15 hotels ranked by the platform's default recommendation system. Beyond D 1 , the effect of the ranking on the display composition is influenced by use of filtering and sorting actions. Sorting hotels by some dimension, such as price, eliminates the effect of the ranking on affected displays. Filtering preserves the ranking but reduces the set of hotels that can be recommended. Therefore, the impact of a recommendation ranking is most pronounced among passive consumers, who only evaluate the default ranking and do not use sorting or filtering.</p><p>The interference of consumer search actions with recommendation rankings means that unobserved future search actions have to be integrated out to compute the correct measure of expected CTR. To achieve accuracy in the integration problem, the model must differentiate between a wide array of search alternatives available to the consumer at every step. As argued above, a model that focuses on a few dominant search strategies will make inaccurate predictions among the long tail of consumers who use rare search strategies. In our model, we achieve wide coverage of a search strategy space by allowing the consumer to reoptimize after every display.</p><p>Let r (r 1 , . . . , r N ) be the candidate ranking for the current consumer (we abstract from index i to simplify notation), andã {ã 1 , . . . ,ã T } be a potential search path, where the "∼" sign indicates the counterfactual nature ofã. The likelihood function (16) provides a probability that a consumer will click on hotels indexed ( j(1), . . . , j(T)) conditional on a search path a (and resulting displays D 1 , . . . , D T ). Integrating out the unobserved search path, we obtain the unconditional CTR Pr(j(1), . . . , j(T) | r, P, R) ã (j(1), . . . , j(T) |ã, D 1 (ã, r), . . . , D T (ã, r)).</p><p>(17) This equation shows that the CTR function depends on three observed factors: 1. Ranking system, r (r 1 , . . . , r N ). 2. Current price vector, P (p 1 , . . . , p N ).</p><p>3. Parameters of request, R. Equation ( <ref type="formula">17</ref>) is used to select candidate rankings r that maximize the expected CTR rate on a particular set of hotels, (j(1), . . . , j(T)). For instance, we may want to maximize the click rate on hotels that give the highest revenue to the platform (such as click fees). If the goal is to maximize the aggregate CTR, then we compute the unconditional CTR over the search length. The maximization problem becomes</p><formula xml:id="formula_18">E[CTR (r, P, R)] T T 1 Pr(j(1), . . . , j(T) | r, P, R) → max r . (<label>18</label></formula><formula xml:id="formula_19">)</formula><p>Solving this optimization problem by brute force is infeasible as there are N! potential rankings, where N is the total number of hotels. We must reduce the dimensionality of the set of alternative rankings by introducing a discrete set of unobserved consumer types.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.2.">Consumer Types and Targeted Rankings</head><p>The unobserved consumer-level heterogeneity (in tastes) in our model is represented by two parameters, price sensitivity α i and tastes for nonprice attributes, β i (see ( <ref type="formula" target="#formula_13">13</ref>) and ( <ref type="formula" target="#formula_14">14</ref>)). Unobserved product level shocks are integrated out as seen from ( <ref type="formula" target="#formula_16">15</ref>). Both parameters are estimated as continuous distributions; once we obtain the estimates, we discretize them onto a grid of predefined points. The price sensitivity parameter is defined as ln(−α i ) α 0 + α 1 R i +α i , whereα i ∼ N(0, σ α ).</p><p>With an estimated value of σ α , we obtain a set of quantiles, {α 1 0 , . . . , α G+1 0 }, which covers 99% of the density. The grid {α 1 0 , . . . , α G+1 0 } leads to a finite set of consumer types: A consumer i is said to be of type g(i) if his draw ofα i belongs to an interval (α g 0 , α g+1 0 ), with probability φ g obtained using the estimated density ofα i . The price sensitivity of a type g consumer is approximated as the midpoint of this interval. A similar exercise can be done for the joint distribution of β i , but for the sake of simplicity and clarity of exposition we abstract from the unobserved heterogeneity in this parameter when constructing the ranking. That is, we use its mean value,</p><formula xml:id="formula_20">E[β i ] β 0 + β 1 R i .</formula><p>As a result of these transformations, we replace the actual mean utility of consumer i</p><formula xml:id="formula_21">µ i j α i p i j + β i X j (<label>19</label></formula><formula xml:id="formula_22">)</formula><p>with its approximation</p><formula xml:id="formula_23">µ i j α g(i) p i j + E[β i ] X j . (<label>20</label></formula><formula xml:id="formula_24">)</formula><p>The advantage of the approximation is that now consumer tastes for hotel characteristics are summarized by just two parameters, α g(i) and R i . In other words, if we knew these parameters for a new incoming consumer to the platform, we could obtain a vector of mean utilitiesμ i1 , . . . ,μ iN for that consumer. Once mean utilities are known, the click-maximizing ranking is simply to sort hotels by decreasing mean utility. Note that the hotel's position in the display, L i j , enters the mean utilities because we interpret its effect as being related to the within-page search cost, rather than an inherent part of consumer preferences.</p><p>As a consumer's type, g(i), is unobserved, it is not possible to directly offer an optimal ranking to each consumer. Instead, our objective is to "guess" the type of the current consumer in a way that maximizes the expected click rate, where the expectation is taken across unobserved types. With this approach, a generally intractable problem ( <ref type="formula" target="#formula_18">18</ref>) is reduced to a discrete optimization problem</p><formula xml:id="formula_25">E[CTR (rg , P, R)] g φ g T T 1 Pr j(1), . . . , j(T) | rg , P, R, α g → max g , (<label>21</label></formula><formula xml:id="formula_26">)</formula><p>where rg is a ranked set of mean utilities corresponding to "guessed" typeg. The outer sum represents an integration of CTR over unobserved consumer type, g, which may differ from the "guessed" type.</p><p>Solving ( <ref type="formula" target="#formula_25">21</ref>) is computationally fast as the rankings corresponding to each consumer type (e.g., combinations of α g , R) can be obtained before a consumer arrives at the platform. Notably, the click probabilities for each ranking are also obtained before a consumer arrives. At the consumer's request, only a lookup operator and a few linear transformations are required. This ensures speed and scalability of computations, which are critical properties of the recommendation system.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.3.">An Illustration</head><p>Next we provide two examples that illustrate two key issues that an optimal ranking must address, i.e., heterogeneity in unobserved tastes and differences in ranking when consumers use sorting and filtering tools. Three questions may arise: If we do not know the consumer type, can we simply target the average type, or perhaps the most popular type? What is the role of search actions? How does prediction of future search actions affect our choice of ranking?</p><p>The examples allow us to develop intuition as to why and how a ranking that targets a median consumer will not achieve the same results as a targeted ranking based on distributional parameters. Intuitively, if the platform has any reason to believe that hotel A will have a higher click rate than hotel B by the current consumer, it will maximize the overall click rate by placing hotel A on the first page, instead of hotel B. We relate the click rate to observable hotel characteristics, which implies that hotels with a higher mean utility are more likely to be clicked.</p><p>Consider the next set-up to be a simplified version of the search environment faced by consumers. Suppose there are two products, characterized by price-quality combinations (p j , v j ), j 1, 2. Product 2 is of higher quality than product 1 (i.e., v 2 &gt; v 1 ) but it is also more expensive (p 2 &gt; p 1 ). Product utilities are u i j α i p j + v j + ε i j . Consumers can be of two types, which are unobserved, with type 1 being more price sensitive: α 1 &lt; α 2 . It follows that if the price of the high quality product is not too high, price sensitive consumers prefer the higher quality product. Finally, suppose the share of type 1 consumers in the population is θ, and the share of type 2 consumers is 1 − θ.</p><p>Upon arrival at the website, all consumers observe the first display, which contains one product that was ranked highest by the recommendation system. To find the second product, they need to search. With probability π, a consumer will continue searching to discover the second-ranked product, and with probability 1− π she will not search. Depending on her search decision, a consumer may have only one or two products in her choice set. With only one product, the click rate of a consumer with α a 1 , α 2 for option j is the logit formula</p><formula xml:id="formula_27">C j (α) exp(αp j + v j ) 1 + exp(αp j + v j ) , j 1, 2.</formula><p>The expected click rate for such a consumer isC j θC j (α 1 ) + (1 − θ)C j (α 2 ). If both products are found, the click rate is higher at</p><formula xml:id="formula_28">C 12 (α) exp(αp 1 + v 1 ) + exp(αp 2 + v 2 ) 1 + exp(αp 1 + v 1 ) + exp(αp 2 + v 2 )</formula><p>.</p><p>Similarly, the expected click rate among those with two products isC 12 θC 12 (α 1 ) + (1 − θ)C 12 (α 2 ). Next we examine the properties of optimal ranking in this set-up.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.3.1.">Comparison of Rankings Under Random and</head><p>Average Tastes. Given that consumer types are unobserved, it is unclear a priori how such information could be incorporated into a ranking and why such a strategy may be better than a ranking based on average tastes. The following discussion provides two reasons. First, the click rate of the average type does not equal the expected click rate across types since the expected click rate is a nonlinear function of consumer type (in our case, the price sensitivity parameter). Second, price changes between the product options affect the CTR differently across types. We show that depending on the relative price levels, the discrepancy from the average type ranking and the optimal ranking can vary between zero and some substantial value. There is simple economic intuition behind both effects, which we illustrate below. With only two products (one per page), the choice of ranking is between {1, 2} and {2, 1}. Let the probability of continuing the search be π. Click rates under these alternative rankings are</p><formula xml:id="formula_29">CTR (1, 2) (1 − π)C 1 + πC 12 , (<label>22</label></formula><formula xml:id="formula_30">)</formula><formula xml:id="formula_31">CTR (2, 1) (1 − π)C 2 + πC 12 . (<label>23</label></formula><formula xml:id="formula_32">)</formula><p>With probability 1 − π, the consumer observes only the top-ranked product; with probability π, both products are discovered. The ranking {1, 2} is optimal if it leads to a higher expected CTR</p><formula xml:id="formula_33">(1 − π)C 1 + πC 12 &gt; (1 − π)C 2 + πC 12 , or simplyC 1 &gt;C 2 . (<label>24</label></formula><formula xml:id="formula_34">)</formula><p>Now consider a ranking that targets preferences of the average consumer, whose price sensitivity isᾱ</p><formula xml:id="formula_35">θα 1 + (1 − θ)α 2 . It is straightforward to show that the ranking {1, 2} is optimal if C 1 (ᾱ) &gt; C 2 (ᾱ),<label>(25)</label></formula><p>or simplyᾱ</p><formula xml:id="formula_36">p 1 + v 1 &gt;ᾱp 2 + v 2 .</formula><p>In other words, targeting the average consumer type amounts to sorting results by declining average utility. The ranking rules ( <ref type="formula" target="#formula_33">24</ref>) and (25) will generally be different as the click rate is a nonlinear function of unobserved parameter α, so thatC 1 C 1 (ᾱ). However, the magnitude of the discrepancy will vary with product prices, in absolute and relative terms. To illustrate this point, Figure <ref type="figure">2</ref>(a) plots ranking rules ( <ref type="formula" target="#formula_33">24</ref>) and ( <ref type="formula" target="#formula_35">25</ref>) in the space of product prices, p 1 , p 2 for parameters v 1 10, v 2 20, α 1 −2, α 2 −1, and θ 0.6. For each rule, there exists a boundary such that for each price point (p 1 , p 2 ) above the boundary, the low quality product (product 1) should be placed on top. For instance, at point B both rules will place the expensive product on top. The shaded area is where the recommendations of ranking rules ( <ref type="formula" target="#formula_33">24</ref>) and ( <ref type="formula" target="#formula_35">25</ref>) disagree. In the area with point A, the ranking that targets average tastes will place the high quality item (product 2) in the top position while the consumer-targeting ranking favors the cheaper product. In the area with point C, the opposite is true.</p><p>The disagreement between the average and randomtaste targeting is because the expected CTR under any ranking is comprised of clicks made by consumers who belong to various unobserved types. The contribution of a particular consumer type is determined by its population share (which does not change with prices) and its type-specific expected CTR (which does change with prices). As prices change, so do relative contributions of consumer types, and the optimal ranking must be adjusted accordingly. For instance, if prices of both products are high, as in point C, the contribution of the price-sensitive type becomes so small that it is optimal to target the high type, even though they are less prevalent in the population. The ranking that targets the average type does not detect these shifts in expected CTR composition and can make erroneous recommendations (as in point C, where it continues to place the cheaper product on top). The resulting click losses can be quite large, depending on price levels.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.3.2.">Ranking Under Search</head><p>Refinement. Limited consumer search is the primary reason for the need for recommendation systems. Consumers are very different in their use of search tools. Some do not search at all, while others use filtering and sorting tools to explore additional options in the results. <ref type="bibr" target="#b6">Chen and Yao (2016)</ref> find that consumers use these search refinement tools disproportionately if they are uninformed of the default ranking rule. As a result, the same ranking will have a different impact on consumers who search differently. An ideal recommendation system will choose the contents of the first page in a way that complements future search results. For consumers who sort by ascending price, one might show more expensive hotels on the first page, thus increasing the diversity of their choice sets. Unfortunately, individual search actions are unobserved at the time when a ranking is to be made. Instead, we observe search actions made by past consumers and their frequencies, much in the same way as we infer consumer types and their probabilities. Such distributional information can be a valuable input into the ranking method.</p><p>Returning to our basic set-up, suppose that with probability π Rec the consumer will search the default recommended options and discover the second-ranked hotel; with probability π Price the consumer will sort by price and discover the cheapest hotel. Depending on the ranking method, these strategies may lead to different choice sets. The expected CTR under the ranking {1, 2} is</p><formula xml:id="formula_37">CTR (1, 2) (1 − π Rec − π Price )C 1 + π RecC12 + π PriceC1 . (<label>26</label></formula><formula xml:id="formula_38">)</formula><p>The first part of the equation is the expected CTR by consumers who did not search (hence their choice set consists only of hotel 1). The last two terms are the expected CTR by those who searched default results and found both hotels. Finally, there are consumers who sorted by price and did not find any new results as the cheaper product was already on the first page. The CTR under {2, 1} ranking is similarly obtained. Taking the difference, we obtain</p><formula xml:id="formula_39">CTR (1, 2) − CTR (2, 1) (1 − π Rec − π Price )(C 1 −C 2 ) − π Price (C 12 −C 1 ). (<label>27</label></formula><formula xml:id="formula_40">)</formula><p>IfC 1 &gt;C 2 in the absence of price sorting, it would be optimal to place that product on top (as in the previous example). In that case, the expected click rate by nonsearchers will increase by (1 − π Rec − π Price )(C 1 −C 2 ). However, with an option of price sorting, there is also a negative effect: Consumers who search by price will decrease by π Price (C 12 −C 1 ). Figure <ref type="figure">2</ref>(b) illustrates this trade-off by comparing the optimal ranking rule ( <ref type="formula" target="#formula_39">27</ref>) with a ranking that ignores the presence of the price sorting tool. We set π Rec 0.5 and π Price 0.2, in addition to the same parameters as in Figure <ref type="figure">2</ref>(a): v 1 10, v 2 20, α 1 −2, α 2 −1, and θ 0.6. At point A, both rules prescribe placing the higher quality product on top because it is not too expensive for consumers. The dotted area corresponds to product prices when the prescriptions of the two rules diverge. At point B, the optimal ranking rule (27) still places the higher quality product on top, while the simpler rule dictates that this product is now too expensive and should be downgraded because nowC 1 &gt;C 2 . If a share of consumers always discovers inexpensive products by price sorting, the optimal rule leads to higher prominence of the pricier product. Another less obvious factor is that some consumers will erroneously use the price sorting tool and may not find their preferred high quality product if it is not placed on top.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.">Empirical Analysis</head></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.1.">Data</head><p>The data consist of consumer search histories for hotel rooms on a major web-based hotel comparison platform. A search history starts with a search request. The request includes the city, dates of stay, number of people, and number of rooms. Following the request, the website presents the consumer with an ordering of hotels in the city with available rooms that satisfy the request parameters. The hotel options are organized in pages with 15 hotels per page, displaying the hotel name and price, as well as various nonprice characteristics such as star rating, neighborhood, distance to city center, and proximity to airports. All consumers are presented with an initial display of results upon submitting the search request.</p><p>After obtaining the default set of results, consumers can click on a hotel on that page, continue to the next page of results, or use other search refinement actions (such as sorting or filtering results based on hotel characteristics). In our data, we observe all hotel listings displayed as a result of the consumer's search request and all subsequent sorting or filtering actions. We also observe which hotel the consumer clicked as part of their search process. About half of the searchers who click do so only once, in which case this is the end of the search session. If more than one click is made on a page, we consider the last click as the hotel that is the closest match to the consumer's preferences among the searched hotels. Alternatively, the consumer can leave the website without clicking.</p><p>The platform is an online search aggregator that compiles and presents hotel information from other travel websites, but does not offer hotel bookings. After clicking on a hotel option, the consumer is redirected to another website where a booking can be made. A potential limitation of the data is that we do not observe whether two search sessions were conducted by the same person (a session is the set of search requests within 24 hours of each other). Therefore, we conduct our analysis as if every search was made by a unique individual. Below we discuss these issues in greater length.</p><p>The sample contains 23,959 unique search sessions for Chicago by consumers who searched the platform between May 1-May 31, 2007. There were 148 Chicago hotels available for online booking during that period. A search typically returns 130 to 140 hotel options, depending on availability. This abundance of lodging options creates a nontrivial search problem for a consumer. Hotels in the Chicago market include those in the city of Chicago, satellite towns (Evanston, Skokie, etc.), as well as those close to airports (i.e., O'Hare and Midway). There are also various neighborhoods within the city center. These geographical parameters are observed by consumers during their search.</p><p>Table <ref type="table" target="#tab_2">1</ref> summarizes our data. On average, consumers in our sample search for a hotel room 33.5 days in advance of their stay, 60% stay over a weekend, and the average number of guests is 1.84. The hotels in the data set show significant price variation, $16 to $1,500, with an average of $230. This reflects cross-sectional and temporal variations in prices. The variation in contents <ref type="bibr">Marketing Science, 2017</ref><ref type="bibr">, vol. 36, no. 4, pp. 542-564, © 2017</ref>  of the first page of results can be summarized by the percentage of observations in which a given hotel appeared on the first page. In the sample, an average hotel appears on the first page about 30% of the time, with substantial heterogeneity: Some hotels never appear on the first page, while others appear in half of all searches.</p><p>In the sample, 33% of the search requests ended in a click. Of these clicks, more than half took place on the first page. An individual hotel's CTR ranges between 1.1% and 5.8%. Prices of hotels that received a click are lower. There is a considerable variation in search behavior among consumers, which takes the form of a long tail on hotel choices. An average consumer observes two pages of results (30 hotels). Table <ref type="table" target="#tab_3">2</ref> presents the breakdown of the different consumers' search refinement strategies in the sample. We find that 40.8% of consumers never continue their search; they only observe the first page of results. Another 16.8% of visitors continue browsing past the first page of the hotel listings. Among all consumers, 42.4% choose a search refinement action, and represent 48% of clicks. Figure <ref type="figure" target="#fig_0">1</ref> illustrates the extent of within-page search. Although we do not directly observe this search, indirect evidence can be obtained from the distribution of clicks across hotel position (ranging from 1 to 15 on the page of results). Of all clicks on the first page, 22% went to the hotel in position 1, by contrast to 11% to position 2, and 3% to the last position on the page. A similar pattern exists for other pages: Overall, 19% of the clicks were for a hotel at the top of any page.</p><p>Table <ref type="table" target="#tab_4">3</ref> provides evidence of the importance of accounting for the endogeneity of search refinement actions; this validates our modeling approach. The table summarizes hotel characteristics of the first display based on the consumer's decision on whether to click or continue searching and which search tool to use after observing the initial display. The first column shows that consumers are more likely to click on displays with lower prices and choose a search strategy when prices of hotels within the first display are higher on average. For instance, average prices for hotels when consumers click are $265 compared with when consumers browse another page of results ($284), filter by distance ($288), filter by price ($282), filter by stars ($294), sort by distance ($271) or sort by price ($268). The second column shows that consumers sort or filter by distance when the price dispersion of the first display is larger and sort by price when the price dispersion is lower. The third column shows that consumers are more likely to click when the average price-star ratio is relatively lower and perform a search action when the ratio is higher. The one exception is sorting by price. The relationship between the contents of the first display and a consumer's next decision is stronger when we focus on hotels within one mile of the city center.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.2.">Identification</head><p>Utility parameters. The browsing and clicking data provide rich sources of variation that can be used to identify consumer preferences for observable hotel characteristics, as well as the distribution of unobserved heterogeneity. These sources are changing hotel prices, composition of choice sets, and positions of hotels within the display. In our data, no two consumers observed the same vector of hotel prices or had the same composition of choice set. In other words, every click we observe was made in a different choice context than the next click. This facilitates identification because we can fix a subset of hotel characteristics (such as neighborhood and quality rating) and still find variation in other parameters (such as price or brand). Because we directly observe the choice sets (e.g., sets of hotels displayed on the screen), we improve the precision of estimates by avoiding ad-hoc assumptions as to the distribution of choice sets.</p><p>Price sensitivity. Price endogeneity is a serious concern in the context of brand choice (see <ref type="bibr" target="#b28">Villas-Boas and</ref><ref type="bibr" target="#b28">Winer 1999 and</ref><ref type="bibr" target="#b7">Chintagunta et al. 2005)</ref>. In our context, identification of the effect of prices on clicks represents a particular challenge because price is the only timevarying characteristic of a hotel that can be correlated with changes in unobserved hotel quality over time. For instance, a hotel could be near a sports event; this is a positive demand shock that drives up demand and price. In our application, we are concerned that biased estimates of the price coefficient may alter ranking simulations in a way that is hard to predict.</p><p>To overcome this problem, we use the feature of our data where we observe not only the price of the clicked product but also prices of other products in the choice set that were not chosen. As a result, we have multiple price observations for a product within a market. This is in contrast to typical transaction data where the number of price observations is the same as the number of markets where the product is observed. Of course, additional price observations would not help if there were no variations. In fact, we find plenty of variation in hotel prices online, to the extent that two people searching for the same hotel, on the same date, for the same future dates of stay, may be exposed to different prices. These two features of the data, i.e., frequent price changes and the fact that we observe them at the consumer level, allow us to construct proper controls for price endogeneity.</p><p>We begin by defining narrow consumer segments to reduce the variation in unobserved product attributes within a segment. Consumers who belong to the same segment are allowed to have idiosyncratic taste shocks. A segment consists of a hotel and includes consumers who searched within a day around a date of search and a date of arrival. For instance, a segment for the Hilton Chicago with a May 15, 2007 date of search, and a July 20, 2007 date of arrival, includes consumers who searched between May 14-May 16 for an arrival date between July 19-July 21.</p><p>We then construct a predicted hotel price for each consumer segment using a price regression on a data set of 721,848 price observations for 148 Chicago hotels that are observed by consumers in our search model. Using a set of fixed effects for 28,219 unique consumer segments, we obtain an R 2 of 86%; the remaining 14% of observed price variation is "experimental" (with a standard deviation of $47).</p><p>Finally, we include the predicted price, along with the actual price, in the utility model. The predicted price serves as a control function <ref type="bibr" target="#b23">(Petrin and Train 2010)</ref>. Conditional on the predicted price, the variation in the observed price is uncorrelated with unobserved demand shocks, hence the estimates are consistent. Intuitively, the effect of price on demand is identified from the joint variation of price and demand (e.g., clicks) within a narrowly defined consumer segment.</p><p>Position effects. The position of a hotel within a display has an important effect on the probability of a click because of the human tendency to read results from top to bottom. However, if the page is sorted by a default ranking, which is based on some measure of hotel popularity, the position may also reflect unobserved hotel quality; for this reason there may be a spurious correlation with the CTR.</p><p>Our approach to position endogeneity is again to construct a control function. In addition to hotel and time fixed effects, we include lagged click rates on the hotel as a regressor in the price model: Past click rate was likely an input into the ranking system used by the platform in 2007. Note also that 48% of clicks (Table <ref type="table" target="#tab_3">2</ref>) come from pages sorted not by default sorting but instead are sorted according to a hotel attribute (price, distance to city center, etc.). After controlling for that hotel attribute (as we do in the click model), the remaining variation in hotel positions on such pages should be exogenous to consumer preferences. This helps alleviate concerns about the endogeneity of position effects. Furthermore, we attempt to study the properties of the default ranking (see the online appendix). We find that relative hotel rankings are not strongly related to reasonable economic predictors (price, parameters of request, etc.); this suggests a lot of randomness in the default rankings themselves.</p><p>Search costs. The main challenge in identifying search costs is to separate them from preferences in their effect on search decisions. As we observe search actions and clicks, we use an exclusion restriction where <ref type="bibr">Marketing Science, 2017</ref><ref type="bibr">, vol. 36, no. 4, pp. 542-564, © 2017</ref> preferences affect both, but search costs affect only search actions. The joint variation in clicks and choice sets allows us to pin down a distribution of preferences; based on that, observations of search intensities uncover the search cost distribution. Specifically, because our data is in the form of conditional search decisions (i.e., search actions coupled with preceding displays of results), the search cost distribution is identified <ref type="bibr" target="#b16">(Koulayev 2014</ref>). The idea is that consumers who were presented with better hotel deals on the first page will search less frequently than those who were not. The predicted difference between search intensities in the two groups is regulated by the parameters of the search cost distribution.</p><p>We estimate the parameters by fitting the predicted search intensities to actual search intensities. The identifying assumption is that the contents of the first page, or other displays preceding a search action, are not correlated with unobserved consumer preferences. The contents of the initial display are not chosen by the consumer; therefore, it is likely that differences in displays between two observationally equivalent consumers (i.e., same parameters of request) are random. Note that we do not assume that the first display is random (as it is chosen by the recommendation system), only that differences in the contents are random. The contents of subsequent displays are, in part, a result of consumer choice, and so are correlated with unobserved tastes. We model that correlation in a structural way. When we model clicks on a price-sorted page, it is based on the fact that the consumer who chooses price sorting is potentially more price sensitive than the average consumer. Therefore, our identifying assumption is that differences in page contents will be random based on the search action that creates the page. This is a much weaker assumption than unconditional randomness.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.3.">Estimation Results</head><p>In this section, we present estimates of the search and click model under different specifications, i.e., (1) logistic regression, (2) logit model with constant tastes, (3) logit model with random tastes, and (4) search and click model. The main distinction is that the first three model specifications explain clicks by taking search actions as given, while the search and click model explains search actions and clicks as dependent variables. The difference between logit models with constant and random tastes is the presence of unobserved heterogeneity in coefficients of hotel attributes.</p><p>Table <ref type="table" target="#tab_5">4</ref> presents the utility parameter estimates of these four discrete choice models. In every specification, we include a rich set of interactions between consumer level observables, such as advance purchase, duration of stay, weekend stay, number of travelers, and price and nonprice hotel characteristics. The logistic and logit models with random tastes present similar results. Specifically, the least price sensitive consumers search two weeks in advance and include a Saturday night stay, while (perhaps contrary to expectations) the closer the arrival date, the more price sensitive the demand. This implies that request parameters include valuable information about consumer preferences that should be used by ranking systems. Estimates of the price coefficient interactions of the random tastes model are larger than the constant taste model, which explains the positive mean price coefficient. The extent of unobserved heterogeneity is substantial: For example, the logit model with random tastes estimates the standard deviation of log-price coefficient at 0.81, which is 1.4 times the mean of that parameter.</p><p>Table <ref type="table" target="#tab_5">4</ref> also shows that the estimates of the price sensitivity from the search and click model are substantially different from those obtained in logit models. This is because elasticity estimates might be biased when search information is ignored and only click information is used to characterize choice. Intuitively, when consumers are allowed to face exogenously chosen alternatives, estimates will attribute the choice of pricier alternatives to price sensitivity instead of to an optimal decision to stop engaging in costly search. An interesting finding that supports this notion is the sign reversal of the coefficient for consumers who search less than two weeks in advance, indicating that consumers are significantly less price sensitive when facing time or deadline constraints.</p><p>Table <ref type="table" target="#tab_6">5</ref> compares coefficient estimates from the search model with and without endogeneity controls. The coefficient on the control function (predicted price) is positive and significant, as expected. With independent variable (IV) controls, the median price coefficient is larger in magnitude (e.g., demand is more sensitive) but the difference is small, about 12%. Accordingly, we find that price endogeneity does not produce qualitatively different results in terms of relative performance of various ranking methods.</p><p>Finally, the estimated distribution of search costs, in dollars, is presented in Table <ref type="table" target="#tab_7">6</ref>, with a median search cost of $16.25, and a substantial amount of heterogeneity, i.e., between $10 at the lower end and $40 at the higher end.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.4.">Model Fit</head><p>To test the fit of the search and click model, which accounts for search in addition to click choices, we augment the nonsearch models with empirical frequencies of search actions. This enables us to construct the likelihood of the observed searches and clicks and compare it to the likelihood of the full search model. Specifically, we multiply the likelihoods by an estimate of search action probabilities using the frequency of each search action in the data. This has an effect of adding a constant to the log-likelihood (LL). Table <ref type="table" target="#tab_5">4</ref> presents the comparison of the LL of the different models. A chi-square test of the LL differences indicates that the search and click model significantly outperforms any of the nonsearch models. Similarly, the resulting differences in LL between the search model and the click only models are large and statistically significant at any standard level of confidence.</p><p>An alternative is to compare the performance of the search and click models to the other specifications with regard to their abilities to predict clicks. We obtain the likelihood of observed clicks for each of the alternative models, where search decisions are integrated out. In the search model, we sum the probabilities of the joint search and click decisions across potential search paths to estimate the LL of only click decisions. In the other specifications, we obtain a weighted average of click probabilities, where weights are the sample frequencies of search paths. The resulting LL of the click, LL (click), is shown in Table <ref type="table" target="#tab_5">4</ref>. A natural benchmark for these values is the unconditional likelihood obtained from the average click rate observed in the data (which is 35%). This can be interpreted as the probability that a randomly chosen consumer will click at least once. Taking the logarithm of 35% and multiplying by the number of observations, we obtain LL (click) −22,777. In all logit models, the LL (click) is higher than this benchmark, as these models use a set of covariates to explain clicks. The search model has the highest value <ref type="bibr">Marketing Science, 2017</ref><ref type="bibr">, vol. 36, no. 4, pp. 542-564, © 2017</ref>  LL (click) −19,118. One explanation for this is that the search model is using inequalities imposed by search decisions to update expectations of the distribution of consumer tastes. In this way, the search model brings in an additional source of information relative to static discrete choice models. </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.5.">Estimates of Consumer Types</head><p>In this section, we illustrate targeting that relates request parameters to consumers' heterogenous price sensitivities. However, this targeting can be extended to a richer set of consumer characteristics. First, we construct 40 consumer types by discretizing the distribution of unobserved heterogeneity, corresponding to different values of the parameter α 0i , which stands for the unobserved component of price sensitivity (see Equation ( <ref type="formula" target="#formula_14">14</ref>)). These values represent the grid points over the interval containing 99% of the probability mass of α 0i . For an economic interpretation, we obtain a marginal effect of price for each type defined by the percentage point change in the expected CTR following a 1% increase in prices of all hotels. <ref type="bibr">Figure 3(a)</ref> plots the resulting density of marginal effects: The median is around −1%, with a substantial amount of heterogeneity around the median.</p><p>As discussed previously, the observable consumerlevel heterogeneity in our sample consists of the parameters of request, R i , and a vector of prices, P i . For every combination of (R i , P i ) observed in the sample and each possible unobserved type α g 0 , g 1, . . . , 40, we construct a ranked list of hotels, denoted by vector r g i , where each ranking is optimal based on the underlying unobserved type. For every ranking r g i , we simulate counterfactual choice sets that would have been realized under this ranking. For every simulated choice set, we compute an expected CTR using the model's estimates. A ranking that delivers the highest CTR corresponds to a certain "guessed" consumer type g * i g * (R i , P i ), called the "best guess," which is the solution to the platform's optimization problem. The notation g * (R i , P i ) implies that the "best guess" will vary with prices and parameters of request.</p><p>Repeating the procedure for every observation, we obtain a sample distribution of "best guesses," g * i , i 1, . . . , M, shown in Figure <ref type="figure" target="#fig_1">3</ref>(b). The median type is most frequently chosen as the "best guess," but only in 30% of the cases. In the remaining 70%, types other than the median are optimal for targeting through a customized ranking. In other words, in the majority of cases, a simple targeting of a median consumer leads to a suboptimal ranking.</p><p>A further insight is obtained from Figure <ref type="figure" target="#fig_2">4</ref>, which illustrates the effect of request parameters on the optimal group type to which a consumer is assigned. The figure shows the distribution of optimal "guesses" among consumers with different request parameters. Figure <ref type="figure" target="#fig_2">4</ref>(a) shows two hypothetical requests: Guest 1 books less than a week in advance and stays one night over a weekend. Guest 2 books more than a week in advance and stays three or more nights with no weekend stay. These two hypothetical guests represent the two extremes of the price sensitivity distribution. The distribution of optimal group types differs greatly , which shows the typical business and leisure guests. The business guest travels alone, stays three or more nights, and does not stay over a weekend. The typical leisure guest books a room for two adults, spends one night, and includes a weekend stay. The figure shows that the most likely ranking of the typical business guest is the one for group 15; the ranking for the typical leisure guest is the ranking for group 17.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="6.">Evaluation of Alternative Rankings</head><p>In this section, we further explore the validity of our estimates by evaluating different recommendation Notes. The figure shows the distribution of optimal "guesses" among consumers with different request parameters. In Figure <ref type="figure" target="#fig_2">4</ref>(a), guest 1 represents all consumers booking less than a week in advance and staying one night over a weekend; guest 2 represents consumers staying three or more nights, booking more than a week in advance, with no weekend stay. In Figure <ref type="figure" target="#fig_2">4</ref>(b), the typical business guest travels alone, stays three or more nights, and does not include a weekend stay. The typical leisure guest consists of two adults, spending one night, and includes a weekend stay.</p><p>rankings. The preferred method to evaluate the performance of a ranking method is through a randomized field experiment. In the absence of such an opportunity, we use the structural model of search and click to compare rankings. To the extent that the model adequately reflects the data and is identified, the model's predictions can inform us about the relative performance of alternative ranking methods. These results can be used to find a better selection of recommendation rankings to evaluate during field experiments, which are costly to implement. We evaluate recommendation rankings at different ends of the recommendation spectrum, from a simple popularity ranking to our proposed ranking <ref type="bibr">Marketing Science, 2017</ref><ref type="bibr">, vol. 36, no. 4, pp. 542-564, © 2017</ref> that maximizes the CTR in a fully structural model of search and click. In particular, we separate the importance of accounting for different aspects of the model, i.e., unobserved taste heterogeneity, endogeneity of search decisions to ranking, and targeting using parameters of requests. Using our model of search and click, we evaluate the relative contributions of these factors to the performance of a ranking. This helps managers make better design choices.</p><p>Next, we construct two performance measures of a ranking generated by this model. The first measure is the expected click rate, predicted by the model of search and click. Because the first measure is modelbased, it properly accounts for unequal click likelihoods and endogenous search response. The second measure is the average rank of hotels that were clicked. As the second measure is model-free, it represents an external validation of the model-based results; for the same reason, the results of both metrics are not necessarily the same and hence can be viewed as complementary.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="6.1.">CTR Comparisons</head><p>To estimate the CTR for different rankings, we proceed in three steps. In the first step, we use estimates of the full model of search and click to construct a ranking that maximizes the predicted CTR in that model. The CTR is computed as the expected click rate integrated over future search action paths and future clicks (see Equation ( <ref type="formula" target="#formula_25">21</ref>)).</p><p>In the second step, we build several simpler models that do not account for choice factors such as request parameters, random tastes, and endogenous search decisions. For each model, we construct a ranking that maximizes CTR as predicted by that model, just as a practitioner would. We then use the full model to compute the "actual" CTR for each alternative ranking. Because the full search and click model yields the maximum CTR, any alternative ranking would necessarily result in a lower CTR than the fully optimal ranking derived in the first step. Last, we simulate popularity and price sort rankings, which are two of the most commonly used. A popularity ranking is the hotel's click rate over the last two weeks, measured as the ratio of clicks to the number of displays (impressions). The price sort ranking is simply a ranking of hotels by increasing price.</p><p>Table <ref type="table" target="#tab_8">7</ref> presents the CTRs for the alternative rankings. The CTRs are obtained over a random sample of 1,016 ranking scenarios, which are combinations of parameters of request and hotel prices available at the time of the request. For a ranking, the CTR will generally vary across the considered scenarios. For instance, in periods when hotel prices are higher, the CTR is lower. For this reason, we present the deciles of the CTR distribution across these scenarios. The table shows that the ordering of the alternative ranking is still consistent across deciles of the distribution. The default ranking is the platform ranking we observe in the data, reconstructed from search histories where a consumer has browsed at least four pages of defaultsorted results. The default ranking is the worst performer of all, with a CTR of 26.5%. The simulated popularity ranking, with a mean CTR of 32.7%, is better, as is the price sorting, with a CTR of 34.3%. The modelbased rankings bring further improvements, i.e., 41.9% for a constant coefficients logit model, and finally 43.6% mean CTR for the logit model with random tastes. The search model CTR is 46.4%, which represents an almost two-fold improvement over the default ranking.</p><p>These absolute values of CTR provide a sense of the impact of changes in the ranking model. For a modest sized search platform with 1 million visitors a month, a 1% improvement in CTR brings 10,000 extra clicks. However, the actual CTR outcomes of a ranking will vary with market conditions (such as prices and availability), as can be seen from deciles of CTRs across scenarios. Table <ref type="table" target="#tab_9">8</ref> presents a useful comparison of the  <ref type="formula">2</ref>) are the ratio of the mean CTR of each ranking to the search and click ranking. For instance, the mean CTR of logit with constant coefficients is 0.419 and the mean CTR of the search and click ranking is 0.464, hence the ratio is 0.419/0.464 90.4%. In column (3), the ranking gain over the popularity ranking can be measured as the difference from popularity rankings. Because the popularity ranking mean CTR is 0.327, the gain of the logit with constant coefficients is 0.419 − 0.327 0.092, while the difference of the search and click model is 0.464 − 0.327 0.137. The relative gain achieved by the search and click model can be measured as the ratio of these two differences: 0.092/0.137 67.4%.</p><p>gain of each ranking relative to the search and click model.</p><p>The first column of Table <ref type="table" target="#tab_9">8</ref> shows the mean CTR of each ranking. The second column shows the ratio of each CTR to the CTR of the search and click model, which achieves the largest CTR of 46.4%. The CTR of the default ranking is 57% of the CTR from the search and click model. Because the exact algorithm of the default ranking is unknown, we cannot definitively state the reasons behind the poor performance of the default ranking. As the default ranking cannot be reproduced, we use the popularity ranking as the lowest benchmark for comparison of the CTR gains. The simulated rankings perform better than the default ranking: The popularity and price rankings are 70% and 73%, respectively, of the CTR of the search and click ranking. The CTRs of model-based rankings improve with their flexibility: The logistic model achieves 89% of the gains from the search and click model, and the random coefficients logit model achieves 94% of the gains from the search model.</p><p>A natural comparison is the performance of simpler alternative rankings relative to the search and click ranking. Because the algorithm of the default ranking is proprietary, we use the popularity ranking as a benchmark. The click improvement of the search and click model relative to the popularity ranking is 0.464 − 0.327 0.137 or 13.7%. The differences of each ranking relative to the popularity ranking are presented in the third column of Table <ref type="table" target="#tab_9">8</ref>. The fourth column shows the ratio of each click gain from the third column relative to the gain of the search and click model (0.137). The click gain from a constant coefficient logit model represents (0.419 − 0.327)/(0.464 − 0.327) 67.4% of this maximum improvement. The constant coefficient logit model uses sorting of hotels by average utility, and implements targeting based on observed tastes (in our case, parameters of request), but does not take into account unobserved heterogeneity or search preferences. The random coefficient logit model includes targeting on unobserved tastes, and achieves 79.3% of the maximum, which translates into an additional 0.436 − 0.419 0.017 or 1.7%. Finally, accounting for search response to ranking (as done by the search model) brings an additional 2.8% (0.464 − 0.436 0.028).</p><p>A platform would not only be interested in the average CTR but also in the performance of a ranking in the worst and best case scenarios. Figure <ref type="figure" target="#fig_3">5</ref> illustrates these distributional differences between the rankings. In Figure <ref type="figure" target="#fig_3">5</ref>(b) we plot CTRs from two logit models and find that, although modal CTRs differ only slightly, the random coefficient logit model significantly outperforms the constant coefficient version in the upper and lower tails (for instance, the low click rate of 0.3-0.35 is almost eliminated under the "random logit" model). Figure <ref type="figure" target="#fig_3">5</ref>(c) shows that the gain in CTR by the search model over the "random logit" is mostly a shift of the distribution to the right. Part of the distributional impact comes from targeting based on observed and unobserved consumer types, which we explore below.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="6.2.">Rank of Clicked Hotel Comparisons</head><p>An external validation of our approach can be obtained using model-free metrics. One such metric is the average rank of hotels that were clicked under different rankings, which is common in recommender systems design (see <ref type="bibr" target="#b24">Ricci et al. 2011)</ref>. The idea behind it is straightforward: A superior recommendation system should help the consumer find her preferred product earlier in the search process. This metric, however, has several drawbacks. First, it says nothing about the click rate, which is of ultimate interest for a platform manager. Second, all observed clicks are treated equally, while in fact the attractiveness of some clicked hotels may be higher than others. Finally, no account is made for a possible response of search activity to ranking. For these reasons, the average rank of clicked results should be considered a complementary measure to our main results. There are two distinct ways in which our proposed ranking method may lead to better CTRs than the default ranking. The most important effect comes from changes in the composition of choice sets, i.e., the types of hotels displayed to consumers. Hotels neglected by the default ranking are introduced for consumers' consideration, and less relevant options are moved out of the consideration set. The other effect is reordering hotels on the page of results: By placing better alternatives closer to the top of the page, we improve the quality of the choice set, even without changing its contents. This is particularly true for the first page of results, as it is observed by all consumers.</p><p>Table <ref type="table" target="#tab_10">9</ref> presents a breakdown of clicks across pages of results sorted by an optimal recommendation ranking based on the search and click model. Under this optimal ranking, 43.8% of clicked hotels would have been observed on the first page by the consumer. By contrast, only 23% of clicked hotels were actually found </p></div><figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_0"><head>Figure 1 .</head><label>1</label><figDesc>Figure 1. (Color online) Clicks by Page Reached and Position</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_1"><head>Figure 3 .</head><label>3</label><figDesc>Figure 3. Marginal Effects and Consumer Type</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_2"><head>Figure 4 .</head><label>4</label><figDesc>Figure 4. Sample Frequencies of "Best Guess" by Request Parameters</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_3"><head>Figure 5 .</head><label>5</label><figDesc>Figure 5. Distributions of CTRs Under Alternative Rankings</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_0"><head></head><label></label><figDesc>Optimizing Click-Through in Online Rankings550MarketingScience, 2017, vol. 36, no. 4, pp. 542-564, © 2017 </figDesc><table /><note>De los Santos and Koulayev:</note></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_1"><head></head><label></label><figDesc>MarketingScience, 2017, vol. 36, no. 4, pp. 542-564, © 2017 </figDesc><table><row><cell cols="23">Figure 2. Two Product Ranking Examples</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell cols="9">(a) No search</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell cols="9">(b) Price search</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell></cell><cell>20</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell>18.00</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell></cell><cell>18</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell>17.00</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>Price of the high quality product</cell><cell>6 8 10 12 14 16</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell cols="22">Average tastes model B Low quality product on top: A Random tastes model C</cell><cell>Price of the high quality product</cell><cell>9.00 10.00 11.00 12.00 13.00 14.00 15.00 16.00</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell cols="14">Random dates-No price search Random tastes-Price search A B</cell><cell></cell></row><row><cell></cell><cell>4</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell>8.00</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell></cell><cell>4.07</cell><cell>4.23</cell><cell>4.39</cell><cell>4.56</cell><cell>4.72</cell><cell>4.88</cell><cell>5.04</cell><cell>5.20</cell><cell>5.36</cell><cell>5.53</cell><cell>5.69</cell><cell>5.85</cell><cell>6.01</cell><cell>6.17</cell><cell>6.33</cell><cell>6.49</cell><cell>6.66</cell><cell>6.82</cell><cell>6.98</cell><cell>7.14</cell><cell>7.30</cell><cell>7.46</cell><cell>7.63</cell><cell>7.79</cell><cell>7.95</cell><cell>8.11</cell><cell>8.27</cell><cell>8.43</cell><cell>8.60</cell><cell>8.76</cell><cell>8.92</cell><cell>6.00</cell><cell>6.04</cell><cell>6.08</cell><cell>6.12</cell><cell>6.16</cell><cell>6.20</cell><cell>6.24</cell><cell>6.28</cell><cell>6.32</cell><cell>6.36</cell><cell>6.40</cell><cell>6.44</cell><cell>6.48</cell><cell>6.53</cell><cell>6.57</cell><cell>6.61</cell><cell>6.65</cell><cell>6.69</cell><cell>6.73</cell><cell>6.77</cell><cell>6.81</cell><cell>6.85</cell><cell>6.89</cell><cell>6.93</cell><cell>6.97</cell><cell>7.01</cell><cell>7.05</cell><cell>7.09</cell><cell>7.13</cell><cell>7.17</cell><cell>7.21</cell><cell>7.25</cell><cell>7.29</cell></row><row><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell cols="17">Price of the low quality product</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell cols="15">Price of the low quality product</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_2"><head>Table 1 .</head><label>1</label><figDesc>Descriptive Statistics</figDesc><table><row><cell></cell><cell>Mean</cell><cell>Median</cell><cell>Std. dev.</cell><cell>Min.</cell><cell>Max.</cell><cell>Obs.</cell></row><row><cell>Request parameters</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>Advance search (days)</cell><cell>33.50</cell><cell>21.00</cell><cell>36.63</cell><cell>1.00</cell><cell>364.00</cell><cell>23,959</cell></row><row><cell>Weekend stay</cell><cell>0.60</cell><cell>1.00</cell><cell>0.49</cell><cell>0.00</cell><cell>1.00</cell><cell>23,959</cell></row><row><cell>Number of people</cell><cell>1.84</cell><cell>2.00</cell><cell>0.97</cell><cell>1.00</cell><cell>8.00</cell><cell>23,959</cell></row><row><cell>Length of stay (days)</cell><cell>2.44</cell><cell>2.00</cell><cell>1.65</cell><cell>1.00</cell><cell>30.00</cell><cell>23,959</cell></row><row><cell>Across hotels</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>First page location (% of obs)</cell><cell>30.64</cell><cell>22.18</cell><cell>28.33</cell><cell>0.00</cell><cell>98.35</cell><cell>148</cell></row><row><cell>Price (100s of dollars)</cell><cell>2.30</cell><cell>2.00</cell><cell>1.27</cell><cell>0.16</cell><cell>15.00</cell><cell>721,848</cell></row><row><cell>Clicked price (100s of dollars)</cell><cell>2.00</cell><cell>1.75</cell><cell>1.17</cell><cell>0.26</cell><cell>14.41</cell><cell>8,007</cell></row><row><cell>CTR (%)</cell><cell>1.11</cell><cell>0.80</cell><cell>0.94</cell><cell>0.00</cell><cell>5.82</cell><cell>148</cell></row><row><cell>Across consumers</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>Any click</cell><cell>0.33</cell><cell>0</cell><cell>0.47</cell><cell>0</cell><cell>1</cell><cell>23,959</cell></row><row><cell>Click on the first page</cell><cell>0.17</cell><cell>0</cell><cell>0.38</cell><cell>0</cell><cell>1</cell><cell>23,959</cell></row><row><cell>Size of choice set (no. of hotels)</cell><cell>30.00</cell><cell>26.00</cell><cell>21.11</cell><cell>10.00</cell><cell>135.00</cell><cell>23,959</cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_3"><head>Table 2 .</head><label>2</label><figDesc>Breakdown of Consumers by Search and Click Actions</figDesc><table><row><cell>Search category</cell><cell>% of sample</cell><cell>% of total clicks</cell></row><row><cell>Browse default rankings</cell><cell></cell><cell></cell></row><row><cell>1 page</cell><cell>40.8</cell><cell>36.3</cell></row><row><cell>2 pages</cell><cell>6.7</cell><cell>6.7</cell></row><row><cell>3 pages</cell><cell>4.4</cell><cell>4.2</cell></row><row><cell>More than 3 pages</cell><cell>5.7</cell><cell>4.8</cell></row><row><cell>Use sorting or filtering tools</cell><cell></cell><cell></cell></row><row><cell>2 pages or more</cell><cell>42.4</cell><cell>48.0</cell></row><row><cell>Total</cell><cell>100</cell><cell>100</cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_4"><head>Table 3 .</head><label>3</label><figDesc>Search Actions and Hotel Characteristics of First Display</figDesc><table><row><cell></cell><cell></cell><cell></cell><cell>Average</cell><cell>Average</cell><cell cols="2">Within 1 mile from city center</cell></row><row><cell></cell><cell>Average</cell><cell>Price</cell><cell>star</cell><cell>price-star</cell><cell>Share of</cell><cell>Average</cell></row><row><cell>Action</cell><cell>price</cell><cell>dispersion</cell><cell>rating</cell><cell>ratio</cell><cell>hotels</cell><cell>price</cell></row><row><cell>No further search</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>Click on a hotel</cell><cell>265.01</cell><cell>86.59</cell><cell>3.19</cell><cell>84.18</cell><cell>0.46</cell><cell>366.66</cell></row><row><cell></cell><cell>(4.52)</cell><cell>(2.67)</cell><cell>(0.02)</cell><cell>(1.3)</cell><cell>(0.01)</cell><cell>(8.34)</cell></row><row><cell>No click</cell><cell>270.2</cell><cell>82.44</cell><cell>3.2</cell><cell>85.93</cell><cell>0.48</cell><cell>355.18</cell></row><row><cell></cell><cell>(2.27)</cell><cell>(1.23)</cell><cell>(0.01)</cell><cell>(0.65)</cell><cell>(0.01)</cell><cell>(3.89)</cell></row><row><cell>Search action</cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>Browsing a page</cell><cell>284.61</cell><cell>88.83</cell><cell>3.23</cell><cell>89.44</cell><cell>0.49</cell><cell>374.45</cell></row><row><cell></cell><cell>(2.22)</cell><cell>(1.25)</cell><cell>(0.01)</cell><cell>(0.65)</cell><cell>(0.01)</cell><cell>(3.98)</cell></row><row><cell>Filter by distance</cell><cell>288.66</cell><cell>94.4</cell><cell>3.21</cell><cell>90.81</cell><cell>0.44</cell><cell>397.08</cell></row><row><cell></cell><cell>(4.97)</cell><cell>(2.82)</cell><cell>(0.02)</cell><cell>(1.42)</cell><cell>(0.01)</cell><cell>(8.82)</cell></row><row><cell>Filter by price</cell><cell>282.13</cell><cell>86.7</cell><cell>3.21</cell><cell>89.16</cell><cell>0.49</cell><cell>369.12</cell></row><row><cell></cell><cell>(4.26)</cell><cell>(2.24)</cell><cell>(0.01)</cell><cell>(1.18)</cell><cell>(0.01)</cell><cell>(7.23)</cell></row><row><cell>Filter by stars</cell><cell>294.39</cell><cell>79.67</cell><cell>3.28</cell><cell>90.08</cell><cell>0.48</cell><cell>383.07</cell></row><row><cell></cell><cell>(9.93)</cell><cell>(4.16)</cell><cell>(0.04)</cell><cell>(2.33)</cell><cell>(0.02)</cell><cell>(12.69)</cell></row><row><cell>Sort by distance</cell><cell>271.74</cell><cell>95.89</cell><cell>3.13</cell><cell>87.61</cell><cell>0.39</cell><cell>395.7</cell></row><row><cell></cell><cell>(7.03)</cell><cell>(3.87)</cell><cell>(0.02)</cell><cell>(2.06)</cell><cell>(0.02)</cell><cell>(12.28)</cell></row><row><cell>Sort by price</cell><cell>268.95</cell><cell>78.41</cell><cell>3.21</cell><cell>85.62</cell><cell>0.52</cell><cell>334.87</cell></row><row><cell></cell><cell>(3.18)</cell><cell>(1.72)</cell><cell>(0.01)</cell><cell>(0.92)</cell><cell>(0.01)</cell><cell>(4.95)</cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_5"><head>Table 4 .</head><label>4</label><figDesc>Estimates of Discrete Choice Models of Hotel Choice This table presents estimates of utility parameters for various discrete choice models (see Section 3.1). The search model sees hotel clicks and search actions as dependent variables; the other three models explain hotel clicks only. The random effects, if included, take a normal distribution (and log-normal for price coefficient). Advance search is defined as the number of days between the date of search and the date of arrival. Default categories for request parameters are no Saturday night stay, more than one guest, more than two weeks advance search, and more than two days stay. Standard errors are in parentheses.</figDesc><table><row><cell></cell><cell></cell><cell>Logit model</cell><cell>Logit model</cell><cell>Logistic</cell></row><row><cell></cell><cell>Search model</cell><cell>random tastes</cell><cell>constant tastes</cell><cell>regression</cell></row><row><cell>Distribution of the price coefficient</cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>E(ln(α))</cell><cell>0.03 (0.01)</cell><cell>0.59 (0.32)</cell><cell>−0.21 (0.11)</cell><cell>−0.35 (0.11)</cell></row><row><cell>SD(ln(α))</cell><cell>0.66 (0.38)</cell><cell>0.81 (0.34)</cell><cell></cell><cell></cell></row><row><cell>Interactions of price with</cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>Saturday night stay</cell><cell>−0.27 (0.18)</cell><cell>−0.27 (0.14)</cell><cell>−0.16 (0.07)</cell><cell>−0.16 (0.10)</cell></row><row><cell>One guest</cell><cell>−0.34 (0.21)</cell><cell>−0.35 (0.13)</cell><cell>−0.06 (0.12)</cell><cell>−0.03 (0.02)</cell></row><row><cell>Within 2 weeks of stay</cell><cell>−1.10 (0.08)</cell><cell>−0.46 (0.19)</cell><cell>−0.17 (0.12)</cell><cell>−0.24 (0.10)</cell></row><row><cell>Within 3 days of stay</cell><cell>0.17 (0.10)</cell><cell>0.19 (0.18)</cell><cell>0.21 (0.15)</cell><cell>0.21 (0.15)</cell></row><row><cell>Non-price hotel characteristics</cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>Position effect (in $)</cell><cell>−35.15 (0.07)</cell><cell>−7.76 (0.05)</cell><cell>−18.51 (0.08)</cell><cell>−24.12 (0.09)</cell></row><row><cell>Distance to city center</cell><cell>−0.05 (0.01)</cell><cell>−0.26 (0.21)</cell><cell>−0.25 (0.16)</cell><cell>−0.28 (0.13)</cell></row><row><cell>Random effect std. dev.</cell><cell>0.21 (0.13)</cell><cell>0.27 (0.17)</cell><cell></cell><cell></cell></row><row><cell>Distance to O'Hare</cell><cell>0.40 (0.28)</cell><cell>0.68 (0.15)</cell><cell>0.44 (0.25)</cell><cell>0.34 (0.12)</cell></row><row><cell>Random effect std. dev.</cell><cell>0.09 (0.03)</cell><cell>0.20 (0.12)</cell><cell></cell><cell></cell></row><row><cell>Outside option and request interactions</cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>Saturday night stay</cell><cell>0.38 (0.20)</cell><cell>0.44 (0.22)</cell><cell>0.19 (0.18)</cell><cell>0.15 (0.16)</cell></row><row><cell>One guest</cell><cell>0.69 (0.33)</cell><cell>0.97 (0.39)</cell><cell>0.31 (0.15)</cell><cell>0.15 (0.14)</cell></row><row><cell>Within 2 weeks of stay</cell><cell>0.86 (0.45)</cell><cell>0.72 (0.17)</cell><cell>0.17 (0.12)</cell><cell>0.12 (0.14)</cell></row><row><cell>Within 3 days of stay</cell><cell>0.10 (0.08)</cell><cell>−0.13 (0.12)</cell><cell>−0.22 (0.18)</cell><cell>−0.22 (0.15)</cell></row><row><cell>Endogeneity controls</cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>Price control</cell><cell>0.08 (0.01)</cell><cell></cell><cell></cell><cell></cell></row><row><cell>Position control</cell><cell>−0.13 (0.02)</cell><cell></cell><cell></cell><cell></cell></row><row><cell>Other nonprice hotel characteristics</cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>Star rating dummies</cell><cell>Yes</cell><cell>Yes</cell><cell>Yes</cell><cell>Yes</cell></row><row><cell>Random effect std. dev.</cell><cell>Yes</cell><cell>Yes</cell><cell></cell><cell></cell></row><row><cell>Neighborhood dummies</cell><cell>Yes</cell><cell>Yes</cell><cell>Yes</cell><cell>Yes</cell></row><row><cell>Random effect std. dev.</cell><cell>Yes</cell><cell>Yes</cell><cell></cell><cell></cell></row><row><cell>Request interact</cell><cell>Yes</cell><cell>Yes</cell><cell>Yes</cell><cell>Yes</cell></row><row><cell>Month dummies</cell><cell>Yes</cell><cell>Yes</cell><cell>Yes</cell><cell>Yes</cell></row><row><cell>Log-likelihood</cell><cell>−137,032</cell><cell>−42,277</cell><cell>−42,918</cell><cell>−45,578</cell></row><row><cell>Log-likelihood: Search and click</cell><cell>−137,032</cell><cell>−173,957</cell><cell>−174,598</cell><cell>−177,258</cell></row><row><cell>Log-likelihood: Click</cell><cell>−19,118</cell><cell>−20,222</cell><cell>−21,311</cell><cell>−21,899</cell></row><row><cell>Number of observations</cell><cell>21,366</cell><cell>21,366</cell><cell>21,366</cell><cell>21,366</cell></row><row><cell>Notes.</cell><cell></cell><cell></cell><cell></cell><cell></cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_6"><head>Table 5 .</head><label>5</label><figDesc>Controls for Endogeneity</figDesc><table><row><cell></cell><cell>Search</cell><cell>Search</cell></row><row><cell></cell><cell>model with</cell><cell>model without</cell></row><row><cell></cell><cell>IV controls</cell><cell>IV controls</cell></row><row><cell cols="2">Distribution of the price coefficient</cell><cell></cell></row><row><cell>E(ln(−α))</cell><cell>0.03 (0.01)</cell><cell>0.03 (0.01)</cell></row><row><cell>SD(ln(−α))</cell><cell>0.66 (0.38)</cell><cell>0.50 (0.35)</cell></row><row><cell>Interactions of price with</cell><cell></cell><cell></cell></row><row><cell>Saturday night stay</cell><cell>−0.27 (0.18)</cell><cell>−0.41 (0.15)</cell></row><row><cell>One guest</cell><cell>−0.34 (0.21)</cell><cell>−0.60 (0.18)</cell></row><row><cell>Within 2 weeks of stay</cell><cell>−1.10 (0.08)</cell><cell>−0.85 (0.25)</cell></row><row><cell>Within 3 days of stay</cell><cell>0.17 (0.10)</cell><cell>0.07 (0.11)</cell></row><row><cell>Non-price hotel characteristics</cell><cell></cell><cell></cell></row><row><cell>Position effect (in $)</cell><cell>−35.15 (0.07)</cell><cell>−31.25 (0.03)</cell></row><row><cell>Distance to city center</cell><cell>−0.05 (0.01)</cell><cell>0.04 (0.01)</cell></row><row><cell>Random effect std. dev.</cell><cell>0.21 (0.13)</cell><cell>0.19 (0.12)</cell></row><row><cell>Distance to O'Hare</cell><cell>0.40 (0.28)</cell><cell>0.52 (0.21)</cell></row><row><cell>Random effect std. dev.</cell><cell>0.09 (0.03)</cell><cell>0.15 (0.11)</cell></row><row><cell cols="2">Outside option and request interactions</cell><cell></cell></row><row><cell>Saturday night stay</cell><cell>0.38 (0.20)</cell><cell>0.51 (0.18)</cell></row><row><cell>One guest</cell><cell>0.69 (0.33)</cell><cell>0.74 (0.18)</cell></row><row><cell>Within 2 weeks of stay</cell><cell>0.86 (0.45)</cell><cell>0.64 (0.38)</cell></row><row><cell>Within 3 days of stay</cell><cell>0.10 (0.08)</cell><cell>0.21 (0.03)</cell></row><row><cell>Endogeneity controls</cell><cell></cell><cell></cell></row><row><cell>Price control</cell><cell>0.08 (0.01)</cell><cell></cell></row><row><cell>Position control</cell><cell>−0.13 (0.02)</cell><cell></cell></row><row><cell cols="2">Other nonprice hotel characteristics</cell><cell></cell></row><row><cell>Star rating dummies</cell><cell>Yes</cell><cell>Yes</cell></row><row><cell>Random effect std. dev.</cell><cell>Yes</cell><cell>Yes</cell></row><row><cell>Neighborhood dummies</cell><cell>Yes</cell><cell>Yes</cell></row><row><cell>Random effect std. dev.</cell><cell>Yes</cell><cell>Yes</cell></row><row><cell>Interactions with requests</cell><cell>Yes</cell><cell>Yes</cell></row><row><cell>Month dummies</cell><cell>Yes</cell><cell>Yes</cell></row><row><cell>Log-likelihood</cell><cell>−137,032</cell><cell>−137,426</cell></row><row><cell>Number of observations</cell><cell>21,366</cell><cell>21,366</cell></row><row><cell cols="3">Note. This table presents a comparison of estimates of the search</cell></row><row><cell cols="3">model with and without controls for endogeneity of price and</cell></row><row><cell>position.</cell><cell></cell><cell></cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_7"><head>Table 6 .</head><label>6</label><figDesc>Search Cost Distribution</figDesc><table><row><cell>Decile</cell><cell>Search costs ($)</cell></row><row><cell>1</cell><cell>8.35</cell></row><row><cell>2</cell><cell>10.89</cell></row><row><cell>3</cell><cell>12.47</cell></row><row><cell>4</cell><cell>14.83</cell></row><row><cell>5</cell><cell>16.25</cell></row><row><cell>6</cell><cell>19.33</cell></row><row><cell>7</cell><cell>34.08</cell></row><row><cell>8</cell><cell>40.53</cell></row><row><cell>9</cell><cell>55.23</cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_8"><head>Table 7 .</head><label>7</label><figDesc>CTR Distribution Under Alternative Rankings</figDesc><table><row><cell></cell><cell></cell><cell></cell><cell cols="2">Simulated rankings</cell><cell></cell><cell cols="2">Model-based rankings</cell><cell></cell></row><row><cell></cell><cell></cell><cell>Default</cell><cell></cell><cell></cell><cell>Logistic</cell><cell>Logit</cell><cell>Logit</cell><cell>Search</cell></row><row><cell></cell><cell></cell><cell>ranking</cell><cell>Popularity</cell><cell>Price</cell><cell>regression</cell><cell>constant</cell><cell>random</cell><cell>and click</cell></row><row><cell>Decile</cell><cell>1</cell><cell>0.203</cell><cell>0.275</cell><cell>0.274</cell><cell>0.374</cell><cell>0.376</cell><cell>0.393</cell><cell>0.420</cell></row><row><cell></cell><cell>2</cell><cell>0.225</cell><cell>0.292</cell><cell>0.294</cell><cell>0.386</cell><cell>0.388</cell><cell>0.406</cell><cell>0.434</cell></row><row><cell></cell><cell>3</cell><cell>0.240</cell><cell>0.304</cell><cell>0.312</cell><cell>0.397</cell><cell>0.399</cell><cell>0.417</cell><cell>0.445</cell></row><row><cell></cell><cell>4</cell><cell>0.255</cell><cell>0.315</cell><cell>0.330</cell><cell>0.406</cell><cell>0.409</cell><cell>0.426</cell><cell>0.454</cell></row><row><cell></cell><cell>5</cell><cell>0.266</cell><cell>0.327</cell><cell>0.346</cell><cell>0.416</cell><cell>0.420</cell><cell>0.435</cell><cell>0.464</cell></row><row><cell></cell><cell>6</cell><cell>0.278</cell><cell>0.337</cell><cell>0.358</cell><cell>0.426</cell><cell>0.430</cell><cell>0.444</cell><cell>0.474</cell></row><row><cell></cell><cell>7</cell><cell>0.291</cell><cell>0.349</cell><cell>0.375</cell><cell>0.436</cell><cell>0.438</cell><cell>0.455</cell><cell>0.484</cell></row><row><cell></cell><cell>8</cell><cell>0.305</cell><cell>0.363</cell><cell>0.390</cell><cell>0.446</cell><cell>0.449</cell><cell>0.464</cell><cell>0.495</cell></row><row><cell></cell><cell>9</cell><cell>0.324</cell><cell>0.382</cell><cell>0.408</cell><cell>0.459</cell><cell>0.464</cell><cell>0.479</cell><cell>0.509</cell></row><row><cell>Mean</cell><cell></cell><cell>0.265</cell><cell>0.327</cell><cell>0.343</cell><cell>0.416</cell><cell>0.419</cell><cell>0.436</cell><cell>0.464</cell></row></table><note>Notes. The table presents the distribution of absolute expected CTRs under alternative ranking scenarios. Logit constant is the logit discrete choice model of click with constant coefficients; logit random has random coefficients, i.e., unobserved tastes for hotel attributes.</note></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_9"><head>Table 8 .</head><label>8</label><figDesc>CTR Comparison Under Alternative RankingsNotes. The table shows absolute expected CTRs under alternative ranking scenarios. Logit constant is the logit discrete choice model of click with constant coefficients; logit random has random coefficients, i.e., unobserved tastes for hotel attributes. The calculations in column (</figDesc><table><row><cell></cell><cell></cell><cell>Ratio of CTR relative</cell><cell>CTR diff. from</cell><cell>Ratio of CTR diff. relative</cell></row><row><cell></cell><cell>Mean CTR</cell><cell>to search and click</cell><cell>popularity ranking</cell><cell>to search and click</cell></row><row><cell>Ranking</cell><cell>(1)</cell><cell>(2)</cell><cell>(3)</cell><cell>(4)</cell></row><row><cell>Default</cell><cell>0.265</cell><cell>0.57</cell><cell>−0.062</cell><cell>−0.45</cell></row><row><cell>Simulated rankings</cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>Popularity</cell><cell>0.327</cell><cell>0.70</cell><cell>0.000</cell><cell>0</cell></row><row><cell>Price</cell><cell>0.343</cell><cell>0.73</cell><cell>0.016</cell><cell>0.11</cell></row><row><cell>Model-based rankings</cell><cell></cell><cell></cell><cell></cell><cell></cell></row><row><cell>Logistic regression</cell><cell>0.416</cell><cell>0.89</cell><cell>0.089</cell><cell>0.65</cell></row><row><cell>Logit constant coefficients</cell><cell>0.419</cell><cell>0.90</cell><cell>0.092</cell><cell>0.67</cell></row><row><cell>Logit random coefficients</cell><cell>0.436</cell><cell>0.94</cell><cell>0.109</cell><cell>0.79</cell></row><row><cell>Search and click</cell><cell>0.464</cell><cell>1</cell><cell>0.137</cell><cell>1</cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_10"><head>Table 9 .</head><label>9</label><figDesc>Distribution of Clicks by Page</figDesc><table><row><cell></cell><cell>Search and click</cell><cell>Default</cell></row><row><cell>Page</cell><cell>ranking (%)</cell><cell>ranking (%)</cell></row><row><cell>First</cell><cell>43.8</cell><cell>23.0</cell></row><row><cell>Second</cell><cell>20.9</cell><cell>18.2</cell></row><row><cell>Third</cell><cell>13.3</cell><cell>22.9</cell></row><row><cell>Fourth</cell><cell>9.5</cell><cell>15.5</cell></row><row><cell>Fifth</cell><cell>5.7</cell><cell>9.8</cell></row><row><cell>Other pages</cell><cell>6.9</cell><cell>10.7</cell></row><row><cell>Total</cell><cell>100</cell><cell></cell></row></table></figure>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot">MarketingScience, 2017, vol. 36, no. 4, pp. 542-564, © 2017 </note>
		</body>
		<back>

			<div type="acknowledgement">
<div xmlns="http://www.tei-c.org/ns/1.0"><head>Acknowledgments</head><p>A previous version of the paper was circulated under the title: Optimizing Click-through in Online Rankings for Partially Anonymous Consumers. The authors thank Lura Forcum, Elisabeth Honka, Ali Hortaçsu, Joowon Kim, Matthĳs Wildenbeest, and participants in the Industrial Organization Society sessions at the Allied Social Sciences Association annual meeting, the 4th Workshop of Consumer Search and Switching, and seminar participants at the University of Iowa, the University of Arizona, and the University of Texas at San Antonio for helpful comments. Special thanks to Emilia Simeonova for encouragement and support. The views expressed are those of the authors and do not necessarily reflect those of the Consumer Financial Protection Bureau or the United States.</p></div>
			</div>

			<div type="annex">
<div xmlns="http://www.tei-c.org/ns/1.0"><head>De los Santos and Koulayev: Optimizing Click-Through in Online Rankings</head><p>Marketing <ref type="bibr">Science, 2017</ref><ref type="bibr">Science, , vol. 36, no. 4, pp. 542-564, © 2017</ref> INFORMS 563 on the first page in our data (generated by the default ranking). This is a substantial improvement, in line with a large predicted gain in CTR that we found in our model-based results.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="7.">Conclusions</head><p>This paper proposes a search and click model that endogenizes consumers' search refinement actions, along with an optimal ranking for online platforms. Additionally, the paper derives a methodology to target individuals with rankings by exploiting the relationship between the parameters of requests available to the platform and the expected consumer price sensitivity.</p><p>Note that the structural approach allows us to link a choice with the different consideration sets observed by the consumer as part of her search process. This modeling approach also allows for search and click prediction under alternative rankings and changing market conditions (availability and prices). This is difficult to achieve with reduced-form approaches to clicks, such as simple popularity rankings, or more generally, machine-learning algorithms. Formally, click maximization is achieved by improving the expected values of choice sets presented to consumers. The optimal ranking is computed for every individual consumer request, while conditioning on the set of currently available products and their prices. In this way, the proposed algorithm uses the technological capacities of a search platform, i.e., its ability to collect information and manipulate displays in real time.</p><p>Counterfactual ranking comparisons demonstrate the poor performance of the default ranking used by the platform even when compared with simple popularity and price sort rankings. The largest gains of performance, as measured by CTRs, are derived from a simple discrete choice model based on hotel characteristics. Further CTR gains are obtained by models that jointly explain search and click and by an optimized ordering of hotel results tailored to individual consumers.</p><p>This paper has important managerial implications. Online platforms offer consumers the ability to analyze and compare product attributes for a large set of distinct alternative products. Incorporating consumer search choice models that allow for heterogeneous tastes and endogenous search refinement allows firms to more precisely present consumers with preferred alternatives. In addition to increased profitability through higher CTRs, reducing search frictions will likely increase consumer satisfaction, as well as retention and return rates.</p></div>			</div>
			<div type="references">

				<listBibl>

<biblStruct xml:id="b0">
	<analytic>
		<title level="a" type="main">RACOFI: A rule-applying collaborative filtering system</title>
		<author>
			<persName><forename type="first">M</forename><surname>Anderson</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Ball</surname></persName>
		</author>
		<author>
			<persName><forename type="first">H</forename><surname>Boley</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Greene</surname></persName>
		</author>
		<author>
			<persName><forename type="first">N</forename><surname>Howse</surname></persName>
		</author>
		<author>
			<persName><forename type="first">D</forename><surname>Lemire</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Mcgrath</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Proc. IEEE/WIC COLA&apos;03</title>
				<meeting>IEEE/WIC COLA&apos;03<address><addrLine>Halifax, Nova Scotia, Canada</addrLine></address></meeting>
		<imprint>
			<date type="published" when="2003" />
			<biblScope unit="volume">46507</biblScope>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b1">
	<analytic>
		<title level="a" type="main">E-customization</title>
		<author>
			<persName><forename type="first">A</forename><surname>Ansari</surname></persName>
		</author>
		<author>
			<persName><forename type="first">C</forename><forename type="middle">F</forename><surname>Mela</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">J. Marketing Res</title>
		<imprint>
			<biblScope unit="volume">40</biblScope>
			<biblScope unit="issue">2</biblScope>
			<biblScope unit="page" from="131" to="145" />
			<date type="published" when="2003" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b2">
	<analytic>
		<title level="a" type="main">Internet recommendation systems</title>
		<author>
			<persName><forename type="first">A</forename><surname>Ansari</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Essegaier</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Kohli</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">J. Marketing Res</title>
		<imprint>
			<biblScope unit="volume">37</biblScope>
			<biblScope unit="issue">3</biblScope>
			<biblScope unit="page" from="363" to="375" />
			<date type="published" when="2000" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b3">
	<analytic>
		<title level="a" type="main">Unifying collaborative and contentbased filtering</title>
		<author>
			<persName><forename type="first">J</forename><surname>Basilico</surname></persName>
		</author>
		<author>
			<persName><forename type="first">T</forename><surname>Hofmann</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Proc. Twenty-first Internat. Conf. Machine Learning</title>
				<meeting>Twenty-first Internat. Conf. Machine Learning<address><addrLine>New York</addrLine></address></meeting>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2004" />
			<biblScope unit="page" from="65" to="72" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b4">
	<analytic>
		<title level="a" type="main">Frictionless commerce? A comparison of Internet and conventional retailers</title>
		<author>
			<persName><forename type="first">E</forename><surname>Brynjolfsson</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Smith</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Management Sci</title>
		<imprint>
			<biblScope unit="volume">46</biblScope>
			<biblScope unit="issue">4</biblScope>
			<biblScope unit="page" from="563" to="585" />
			<date type="published" when="2000" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b5">
	<analytic>
		<title level="a" type="main">Knowledge-based recommender systems</title>
		<author>
			<persName><forename type="first">R</forename><surname>Burke</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Encyclopedia of Library and Information Science</title>
				<meeting><address><addrLine>New York</addrLine></address></meeting>
		<imprint>
			<publisher>Marcel Dekker</publisher>
			<date type="published" when="2000" />
			<biblScope unit="volume">69</biblScope>
			<biblScope unit="page" from="180" to="200" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b6">
	<analytic>
		<title level="a" type="main">Sequential search with refinement: Model and application with click-stream data</title>
		<author>
			<persName><forename type="first">Y</forename><surname>Chen</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Yao</surname></persName>
		</author>
		<idno type="DOI">10.1287/mnsc.2016.2557</idno>
		<ptr target="http://dx.doi.org/10.1287/mnsc.2016.2557" />
	</analytic>
	<monogr>
		<title level="j">Management Sci</title>
		<imprint>
			<date type="published" when="2016-09-28" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b7">
	<analytic>
		<title level="a" type="main">Beyond the endogeneity bias: The effect of unmeasured brand characteristics on household-level brand choice models</title>
		<author>
			<persName><forename type="first">P</forename><surname>Chintagunta</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J-P</forename><surname>Dubé</surname></persName>
		</author>
		<author>
			<persName><forename type="first">K</forename><forename type="middle">Y</forename><surname>Goh</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Management Sci</title>
		<imprint>
			<biblScope unit="volume">51</biblScope>
			<biblScope unit="issue">5</biblScope>
			<biblScope unit="page" from="832" to="849" />
			<date type="published" when="2005" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b8">
	<monogr>
		<title level="m" type="main">Consumer search on the Internet. Working paper</title>
		<author>
			<persName><forename type="first">Santos</forename><surname>De Los</surname></persName>
		</author>
		<imprint>
			<date type="published" when="2017" />
			<pubPlace>Clemson, SC</pubPlace>
		</imprint>
		<respStmt>
			<orgName>Clemson University</orgName>
		</respStmt>
	</monogr>
</biblStruct>

<biblStruct xml:id="b9">
	<monogr>
		<title level="m" type="main">Search, matching, and the role of digital marketplace design in enabling trade: Evidence from Airbnb</title>
		<author>
			<persName><forename type="first">A</forename><surname>Fradkin</surname></persName>
		</author>
		<imprint>
			<date type="published" when="2017" />
			<pubPlace>Cambridge</pubPlace>
		</imprint>
		<respStmt>
			<orgName>Massachusetts Institute of Technology</orgName>
		</respStmt>
	</monogr>
</biblStruct>

<biblStruct xml:id="b10">
	<analytic>
		<title level="a" type="main">Designing ranking systems for hotels on travel search engines by mining user-generated and crowdsourced content</title>
		<author>
			<persName><forename type="first">A</forename><surname>Ghose</surname></persName>
		</author>
		<author>
			<persName><forename type="first">P</forename><surname>Ipeirotis</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Li</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Marketing Sci</title>
		<imprint>
			<biblScope unit="volume">31</biblScope>
			<biblScope unit="issue">3</biblScope>
			<biblScope unit="page" from="492" to="520" />
			<date type="published" when="2012" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b11">
	<analytic>
		<title level="a" type="main">Examining the impact of ranking on consumer behavior and search engine revenue</title>
		<author>
			<persName><forename type="first">A</forename><surname>Ghose</surname></persName>
		</author>
		<author>
			<persName><forename type="first">P</forename><forename type="middle">G</forename><surname>Ipeirotis</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Li</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Management Sci</title>
		<imprint>
			<biblScope unit="volume">60</biblScope>
			<biblScope unit="issue">7</biblScope>
			<biblScope unit="page" from="1632" to="1654" />
			<date type="published" when="2014" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b12">
	<analytic>
		<title level="a" type="main">Website morphing</title>
		<author>
			<persName><forename type="first">J</forename><forename type="middle">R</forename><surname>Hauser</surname></persName>
		</author>
		<author>
			<persName><forename type="first">G</forename><forename type="middle">L</forename><surname>Urban</surname></persName>
		</author>
		<author>
			<persName><forename type="first">G</forename><surname>Liberali</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Braun</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Marketing Sci</title>
		<imprint>
			<biblScope unit="volume">28</biblScope>
			<biblScope unit="issue">2</biblScope>
			<biblScope unit="page" from="202" to="223" />
			<date type="published" when="2009" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b13">
	<analytic>
		<title level="a" type="main">A unified recommendation framework based on probabilistic relational models</title>
		<author>
			<persName><forename type="first">Z</forename><surname>Huang</surname></persName>
		</author>
		<author>
			<persName><forename type="first">D</forename><forename type="middle">D</forename><surname>Zeng</surname></persName>
		</author>
		<author>
			<persName><forename type="first">H</forename><surname>Chen</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Fourteenth Annual Workshop Inform. Tech. Systems (WITS</title>
		<imprint>
			<biblScope unit="page" from="8" to="13" />
			<date type="published" when="2004" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b14">
	<analytic>
		<title level="a" type="main">Accurately interpreting clickthrough data as implicit feedback</title>
		<author>
			<persName><forename type="first">T</forename><surname>Joachims</surname></persName>
		</author>
		<author>
			<persName><forename type="first">L</forename><surname>Granka</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Pan</surname></persName>
		</author>
		<author>
			<persName><forename type="first">H</forename><surname>Hembrooke</surname></persName>
		</author>
		<author>
			<persName><forename type="first">G</forename><surname>Gay</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Proc. 28th Annual Internat. ACM SIGIR Conf. Res. Development Inform. Retrieval</title>
				<meeting>28th Annual Internat. ACM SIGIR Conf. Res. Development Inform. Retrieval<address><addrLine>New York</addrLine></address></meeting>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2005" />
			<biblScope unit="page" from="154" to="161" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b15">
	<analytic>
		<title level="a" type="main">Online demand under limited consumer search</title>
		<author>
			<persName><forename type="first">J</forename><forename type="middle">B</forename><surname>Kim</surname></persName>
		</author>
		<author>
			<persName><forename type="first">P</forename><surname>Albuquerque</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><forename type="middle">J</forename><surname>Bronnenberg</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Marketing Sci</title>
		<imprint>
			<biblScope unit="volume">29</biblScope>
			<biblScope unit="issue">6</biblScope>
			<biblScope unit="page" from="1001" to="1023" />
			<date type="published" when="2010" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b16">
	<analytic>
		<title level="a" type="main">Search for differentiated products: Identification and estimation</title>
		<author>
			<persName><forename type="first">S</forename><surname>Koulayev</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">J. Econom</title>
		<imprint>
			<biblScope unit="volume">45</biblScope>
			<biblScope unit="issue">3</biblScope>
			<biblScope unit="page" from="553" to="575" />
			<date type="published" when="2014" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b17">
	<analytic>
		<title level="a" type="main">Consumer eye movement patterns on Yellow Pages advertising</title>
		<author>
			<persName><forename type="first">G</forename><surname>Lohse</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">J. Advertising</title>
		<imprint>
			<biblScope unit="volume">26</biblScope>
			<biblScope unit="issue">1</biblScope>
			<biblScope unit="page" from="61" to="73" />
			<date type="published" when="1997" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b18">
	<analytic>
		<title level="a" type="main">Content-boosted collaborative filtering for improved recommendations</title>
		<author>
			<persName><forename type="first">P</forename><surname>Melville</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><forename type="middle">J</forename><surname>Mooney</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Nagarajan</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Eighteenth Natl. Conf. Artificial Intelligence</title>
				<imprint>
			<date type="published" when="2002" />
			<biblScope unit="page" from="187" to="192" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b19">
	<analytic>
		<title level="a" type="main">Modeling online browsing and path analysis using clickstream data</title>
		<author>
			<persName><forename type="first">A</forename><forename type="middle">L</forename><surname>Montgomery</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Li</surname></persName>
		</author>
		<author>
			<persName><forename type="first">K</forename><surname>Srinivasan</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><forename type="middle">C</forename><surname>Liechty</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Marketing Sci</title>
		<imprint>
			<biblScope unit="volume">23</biblScope>
			<biblScope unit="issue">4</biblScope>
			<biblScope unit="page" from="579" to="595" />
			<date type="published" when="2004" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b20">
	<monogr>
		<author>
			<persName><forename type="first">Santos</forename><surname>De Los</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Koulayev</forename></persName>
		</author>
		<title level="m">Optimizing Click-Through in Online Rankings</title>
				<imprint>
			<biblScope unit="volume">564</biblScope>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b21">
	<analytic>
		<title/>
	</analytic>
	<monogr>
		<title level="j">Marketing Science</title>
		<imprint>
			<biblScope unit="volume">36</biblScope>
			<biblScope unit="issue">4</biblScope>
			<biblScope unit="page" from="542" to="564" />
			<date type="published" when="2017" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b22">
	<analytic>
		<title level="a" type="main">Predicting product purchase from inferred customer similarity: An autologistic model approach</title>
		<author>
			<persName><forename type="first">S</forename><surname>Moon</surname></persName>
		</author>
		<author>
			<persName><forename type="first">G</forename><forename type="middle">J</forename><surname>Russell</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Management Sci</title>
		<imprint>
			<biblScope unit="volume">54</biblScope>
			<biblScope unit="issue">1</biblScope>
			<biblScope unit="page" from="71" to="82" />
			<date type="published" when="2008" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b23">
	<analytic>
		<title level="a" type="main">A control function approach to endogeneity in consumer choice models</title>
		<author>
			<persName><forename type="first">A</forename><surname>Petrin</surname></persName>
		</author>
		<author>
			<persName><forename type="first">K</forename><surname>Train</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">J. Marketing Res</title>
		<imprint>
			<biblScope unit="volume">47</biblScope>
			<biblScope unit="issue">1</biblScope>
			<biblScope unit="page" from="3" to="13" />
			<date type="published" when="2010" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b24">
	<monogr>
		<author>
			<persName><forename type="first">F</forename><surname>Ricci</surname></persName>
		</author>
		<author>
			<persName><forename type="first">L</forename><surname>Rokach</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Shapira</surname></persName>
		</author>
		<author>
			<persName><forename type="first">P</forename><forename type="middle">B</forename><surname>Kantor</surname></persName>
		</author>
		<title level="m">Recommender Systems Handbook</title>
				<meeting><address><addrLine>New York</addrLine></address></meeting>
		<imprint>
			<publisher>Springer</publisher>
			<date type="published" when="2011" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b25">
	<analytic>
		<title level="a" type="main">Optimal replacement of GMC bus engines: An empirical model of Harold Zurcher</title>
		<author>
			<persName><forename type="first">J</forename><surname>Rust</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Econometrica</title>
		<imprint>
			<biblScope unit="volume">55</biblScope>
			<biblScope unit="issue">5</biblScope>
			<biblScope unit="page" from="999" to="1033" />
			<date type="published" when="1987" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b26">
	<analytic>
		<title level="a" type="main">A conjoint analysis of online consumer satisfaction</title>
		<author>
			<persName><forename type="first">L</forename><forename type="middle">C</forename><surname>Schaupp</surname></persName>
		</author>
		<author>
			<persName><forename type="first">F</forename><surname>Bélanger</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">J. Electronic Commerce Res</title>
		<imprint>
			<biblScope unit="volume">6</biblScope>
			<biblScope unit="issue">2</biblScope>
			<biblScope unit="page" from="95" to="111" />
			<date type="published" when="2005" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b27">
	<analytic>
		<title level="a" type="main">Morphing banner advertising</title>
		<author>
			<persName><forename type="first">G</forename><forename type="middle">L</forename><surname>Urban</surname></persName>
		</author>
		<author>
			<persName><forename type="first">G</forename><surname>Liberali</surname></persName>
		</author>
		<author>
			<persName><forename type="first">E</forename><surname>Macdonald</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Bordley</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><forename type="middle">R</forename><surname>Hauser</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Marketing Sci</title>
		<imprint>
			<biblScope unit="volume">33</biblScope>
			<biblScope unit="issue">1</biblScope>
			<biblScope unit="page" from="27" to="46" />
			<date type="published" when="2014" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b28">
	<analytic>
		<title level="a" type="main">Endogeneity in brand choice models</title>
		<author>
			<persName><forename type="first">J</forename><forename type="middle">M</forename><surname>Villas-Boas</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><forename type="middle">S</forename><surname>Winer</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Management Sci</title>
		<imprint>
			<biblScope unit="volume">45</biblScope>
			<biblScope unit="issue">10</biblScope>
			<biblScope unit="page" from="1324" to="1338" />
			<date type="published" when="1999" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b29">
	<analytic>
		<title level="a" type="main">Unison-CF: A multiple-component, adaptive collaborative filtering system</title>
		<author>
			<persName><forename type="first">M</forename><surname>Vozalis</surname></persName>
		</author>
		<author>
			<persName><forename type="first">K</forename><forename type="middle">G</forename><surname>Margaritis</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Adaptive Hypermedia and Adaptive Web-Based Systems</title>
		<title level="s">Lecture Notes Comput. Sci.</title>
		<meeting><address><addrLine>Berlin Heidelberg</addrLine></address></meeting>
		<imprint>
			<publisher>Springer-Verlag</publisher>
			<date type="published" when="2004" />
			<biblScope unit="volume">3137</biblScope>
			<biblScope unit="page" from="255" to="264" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b30">
	<analytic>
		<title level="a" type="main">Optimal search for the best alternative</title>
		<author>
			<persName><forename type="first">M</forename><surname>Weitzman</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Econometrica</title>
		<imprint>
			<biblScope unit="volume">47</biblScope>
			<biblScope unit="issue">3</biblScope>
			<biblScope unit="page" from="641" to="654" />
			<date type="published" when="1979" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b31">
	<analytic>
		<title level="a" type="main">Collaborative ensemble learning: Combining collaborative and content-based information filtering via hierarchical Bayes</title>
		<author>
			<persName><forename type="first">K</forename><surname>Yu</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Schwaighofer</surname></persName>
		</author>
		<author>
			<persName><forename type="first">V</forename><surname>Tresp</surname></persName>
		</author>
		<author>
			<persName><forename type="first">W</forename><forename type="middle">Y</forename><surname>Ma</surname></persName>
		</author>
		<author>
			<persName><forename type="first">H</forename><forename type="middle">J</forename><surname>Zhang</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Uncertainty Artificial Intelligence: Proc. 19th Conf. (UAI-2003)</title>
				<meeting><address><addrLine>San Francisco</addrLine></address></meeting>
		<imprint>
			<publisher>Morgan Kaufmann</publisher>
			<date type="published" when="2003" />
			<biblScope unit="page" from="616" to="623" />
		</imprint>
	</monogr>
</biblStruct>

				</listBibl>
			</div>
		</back>
	</text>
</TEI>
