CELEBRATING 30 YEARS
Vol. 30, No. 3, May­June 2011, pp. 447­468 issn 0732-2399 eissn 1526-548X 11 3003 0447

doi 10.1287/mksc.1100.0626 © 2011 INFORMS

A Dynamic Model of Sponsored Search Advertising

Song Yao
Kellogg School of Management, Northwestern University, Evanston, Illinois 60208, s-yao@kellogg.northwestern.edu
Carl F. Mela
Fuqua School of Business, Duke University, Durham, North Carolina 27708, mela@duke.edu
Sponsored search advertising is ascendant--Forrester Research reports expenditures rose 28% in 2007 to $8.1 billion and will continue to rise at a 26% compound annual growth rate [VanBoskirk, S. 2007. U.S. interactive marketing forecast, 2007 to 2012. Forrester Research (October 10)], approaching half the level of television advertising and making sponsored search one of the major advertising trends to affect the marketing landscape. Yet little empirical research exists to explore how the interaction of various agents (searchers, advertisers, and the search engine) in keyword markets affects consumer welfare and firm profits. The dynamic structural model we propose serves as a foundation to explore these outcomes. We fit this model to a proprietary data set provided by an anonymous search engine. These data include consumer search and clicking behavior, advertiser bidding behavior, and search engine information such as keyword pricing and website design.
With respect to advertisers, we find evidence of dynamic bidding behavior. Advertiser value for clicks on their links averages about 26 cents. Given the typical $22 retail price of the software products advertised on the considered search engine, this implies a conversion rate (sales per click) of about 1.2%, well within common estimates of 1%­2% [Narcisse, E. 2007. Magid: Casual free to pay conversion rate too low. GameDaily.com (September 20)]. With respect to consumers, we find that frequent clickers place a greater emphasis on the position of the sponsored advertising link. We further find that about 10% of consumers do 90% of the clicks.
We then conduct several policy simulations to illustrate the effects of changes in search engine policy. First, we find the search engine obtains revenue gains of 1% by sharing individual-level information with advertisers and enabling them to vary their bids by consumer segment. This also improves advertiser revenue by 6% and consumer welfare by 1.6%. Second, we find that a switch from a first- to second-price auction results in truth telling (advertiser bids rise to advertiser valuations). However, the second-price auction has little impact on search engine profits. Third, consumer search tools lead to a platform revenue increase of 2.9% and an increase of consumer welfare by 3.8%. However, these tools, by reducing advertising exposures, lower advertiser profits by 2.1%.
Key words: sponsored search advertising; two-sided market; dynamic game; structural models; empirical IO; customization; auctions
History: Received: March 19, 2009; accepted: November 19, 2010; Eric Bradlow served as the editor-in-chief and K. Sudhir served as associate editor for this article. Published online in Articles in Advance March 15, 2011.

1. Introduction
Sponsored search is one of the largest and fastest growing advertising channels. In January 2010 alone, Internet users conducted 15.2 billion searches using the top five American search engines compared with 13.5 billion in the previous January, indicating a robust 13% year over year increase.1 In the United States, annual advertising expenditures on sponsored search are forecasted to grow to $25 billion by 2012.2 By contrast, overall 2007 television advertising spending in the United States is estimated to be $64 billion, a decrease of 1.7% from the preceding year.3 Hence,
1 See comScore (2010) and comScore (2009). 2 See VanBoskirk (2007). 3 See TNS Media Intelligence (2008).

search engine marketing is becoming a central component of the promotional mix in many organizations.
Given the increasing ubiquity of sponsored search advertising, the topic has seen substantially increased attention in marketing as of late (Ghose and Yang 2009; Rutz and Bucklin 2007, 2011; Goldfarb and Tucker 2011). To date, empirical research on keyword search has been largely silent on the perspective of the search engine, the competition between advertisers, and the behavior of the searcher. Given that the search engine interacts with advertisers and searchers to determine the price and consumer welfare of the advertising medium (and hence its efficacy), our objective is to broaden this stream of research to incorporate the role of all three agents: the search engine, the advertisers, and the searchers. This exercise enables us to determine the role of

447

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

448

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

search engine marketing strategy on the behavior of advertisers and consumers as well as the attendant implications for search engine revenues. Our key contributions include the following.
1. From a theoretical perspective, we conceptualize and develop an integrated model of Web searcher, advertiser, and search engine behavior. Much like Yao and Mela (2008), we construct a model of a twosided network in an auction context. One side of the two-sided network includes the searchers who generate revenue for the advertiser. On the other side of the network are advertisers whose bidding behavior determines the revenue of the search engine. In the middle lies the search engine. The goal of the search engine is to price consumer information, set auction mechanisms, and design Web pages to elucidate product information so as to maximize its profits.
2. From a substantive point of view, we offer concrete marketing policy recommendations to the search engine. In particular, the two-sided network model of keyword search we consider allows us to address the effect of the following policy simulations (and would enable us to address many others) on auction house and advertiser profits as well as consumer welfare:
· Search tools. Many search engines, especially specialized ones such as Shopping.com, provide users options to sort/filter search results using certain criteria such as product prices. On one hand, the search tools may mitigate the desirability of bidding for advertisements because these tools can remove less relevant advertisements. This would lower search engine revenues. On the other hand, these tools can also attract more users to the site, leading to a potential increase in advertising exposures and searchers. This would increase revenues. Our analysis indicates that positive consumer effects on search engine profits (5.5%) outweigh the corresponding negative advertiser effects on search engine profits (-2 6%) and that overall the sort/filter options enhance platform profits by 2.9%. Consistent with this result, there is a corresponding increase in consumer welfare of 3.8% and an attendant loss in advertiser profits of 2.1%.
· Segmentation and targeting. Most search engines auction keywords across all market segments. However, it is possible to auction keywords by segment. This targeting tends to reduce competition between advertisers within segments as markets are sliced more narrowly, leading to lower bids and hence lower potential revenues for the search engine. Yet targeting also enhances the efficiency of advertising, which tends to increase advertiser bids. Overall, we find that the latter effect dominates (2.1%) the former effect (-1 1%) and that search engine revenue increases 1% by purveying keywords by consumer market segments. Moreover, we find advertiser profits

improve by 6% (from reduced competition in bidding and more efficient advertising), and consumer welfare (as measured by utility) increases 1.9%. Hence, this change leads to considerable welfare gains across all agents.
· Mechanism design. The wide array of search pricing mechanisms raises the question of which auction mechanism is the best in the sense of incenting advertisers to bid more aggressively, thereby yielding maximum returns for the search engine. We consider two common mechanisms: a first-price auction (as used by the considered firm in our analysis) and a secondprice auction (wherein a firm pays the bid of the next highest bidder). Virtually no revenue gains accrue to the platform from a second-price auction (0.02%). However, advertiser bids under second-price auction are close to bidders' true values (bids average 98% of valuations), whereas bids under the first-price auction are much lower (70%). This finding is consistent with theory that suggests first-price auctions lead to bid shading and second-price auctions lead to truth telling (Edelman et al. 2007). Hence, we lend empirical validation to the theoretical literature on auction mechanisms in keyword search.
3. From a methodological view, we develop a dynamic structural model of keyword advertising. This dynamic is induced by the search engine's use of past advertising performance when ranking current advertising bids. The dynamic aspect of the problem requires the use of some recent innovations pertaining to the estimation of dynamic games in economics (e.g., Bajari et al. 2007). Overall, we find that there is a substantial improvement in model fit when the advertiser's strategic bidding behavior is considered, consistent with the view that their bidding behavior is dynamic. One key finding from this model is that advertisers in our application have an average value per click of $0.26. Given that the average price of software products advertised on the site in our data is about $22, this implies these advertisers expect about 1.2% (i.e., $0.26/$22) of clicks will lead to a purchase. This is consistent with the industry average of 1%­2% reported by GameDaily.com (Narcisse 2007), suggesting good external validity for our model.
Although we cast our model in the context of sponsored search, we note that the problem, and hence the conceptualization, is even more general. Any interactive, addressable media format (e.g., DVR, satellite digital radio) can be utilized to implement similar auctions for advertising. For example, with the convergence in media between computers and television in DVRs, simple channel or show queries can be accompanied by sponsored search, and this medium may help to offset advertising losses arising from ads skipping by DVR users (Bronnenberg et al. 2010, Kempe and Wilbur 2010). In such a

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

449

notion, the research literature on sponsored search auctions generalizes to a much broader context, and our model serves as a basis for exploring search-based advertising.
The remainder of this paper proceeds as follows. First, we present an overview of the relevant literature to differentiate our analysis from previous research. Given the relatively novel research context, we then describe the data to help make the problem more concrete. Next, we outline the details of our model, beginning with the clicking behavior of consumers and concluding with the advertiser bidding behavior. Subsequently, we turn to estimation and present our results. We then explore the role of targeted bidding, advertising pricing, and Web page design by developing policy simulations that alter the search engine marketing strategies. We conclude with some future directions.
2. Recent Literature
Research on sponsored search, commensurate with the topic it seeks to address, is nascent and growing. Heretofore, this literature can be characterized along two distinct dimensions: theoretical and empirical. The theoretical literature details how agents (e.g., advertisers) are likely to react to different pricing mechanisms. In contrast, the empirical literature measures the effect of advertising on consumer response in a given market but not the reaction of these agents to changes in the platform environment (e.g., advertising pricing, information state, or the Web page design of the platform). By integrating the theoretical and empirical research streams, we develop a complete representation of the role of pricing and information in the context of keyword search.
Foundational theoretical analyses of sponsored search include Edelman et al. (2007), Varian (2007), Chen and He (2006), Athey and Ellison (2008), Katona and Sarvary (2010), Iyengar and Kumar (2006), and Feng (2008). Summarizing the key insights from this stream of work, we note that (i) there are three types of agents interacting in the sponsored search context: Internet users who engage in keyword search, advertisers that bid for keywords, and the search platform; (ii) searchers affect advertisers' bidding behavior by reacting to the search engine's Web page design and hence advertisers' payoffs; (iii) bidders affect searcher behavior by the placement of their advertisements on the page; and (iv) changes in advertiser and consumer behavior are incumbent upon the strategies of the platform.
Despite these insights, several limits remain. First, because equilibrium outcomes are incumbent upon the parameters of the system, it is hard to characterize precisely how agents will behave. This implies

that it would be desirable to estimate a model of keyword search to measure these behaviors. Second, a static advertiser game over bidding periods is typically assumed, which is inconsistent with the pricing practices used by search engines. Search engines commonly use the preceding period's click-throughs together with current bids to determine advertising placement, making this an inherently dynamic game. Third, this research typically assumes no asymmetry in information states between the advertiser and the search engine even though the search engine knows individual-level clicking behaviors and the advertiser does not. We discuss these issues in this paper.
Empirical research on sponsored search advertising is also proliferating (including Rutz and Bucklin 2007, 2011; Ghose and Yang 2009). Although extant empirical research on sponsored search establishes a firm link between advertising, slot position, and revenues--and indicates that these effects can differ across advertisers--some limitations of this stream of work remain. First, it emphasizes a single agent (one advertiser), making it difficult to predict how advertisers in an oligopolistic setting might react to a change in the policy of the search engine. Further, an advertiser's value to the search engine pertains not only to its direct payment to the search engine but also to the indirect effect that the advertiser has on the intensity of competition during bidding. Second, the advertisers' actions affect search engine users, and vice versa. For example, with alternative advertisers being placed at premium slots on a search result page, it is likely that users' browsing behaviors will be different. As advertisers make decisions with the consideration of users' reactions, any variations of users' behaviors provide feedback on advertisers' actions and thus will ultimately affect the search engine revenue.
Integrating these two research streams suggests that it is desirable to both model and estimate the equilibrium behaviors of all the agents in a network setting. In this regard, sponsored search advertising can be characterized as a two-sided market wherein searchers and advertisers interact on the platform of the search engine (Rochet and Tirole 2006). This enables us to generalize a structural modeling approach advanced by Yao and Mela (2008) to study two-sided markets. However, additional complexities exist in the keyword search setting, including (i) the aforementioned information asymmetry between advertisers and the search engine, and (ii) the substantially more complex auction pricing mechanism used by search engines relative to the fixedfee auction-house pricing considered in Yao and Mela (2008). Moreover, unlike the pricing problem addressed in Yao and Mela (2008), sponsored search bidding is inherently dynamic owing to the use of lagged advertising click rates to determine current

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

450

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

period advertising placements. Hence we incorporate the growing literature of two-step dynamic game estimation (e.g., Hotz and Miller 1993; Bajari et al. 2007, 2009; Pesendorfer and Schmidt-Dengler 2008). Instead of explicitly solving for the equilibrium dynamic bidding strategies, the two-step estimation approach assumes that observed bids are generated by equilibrium play and then use the distribution of bids to infer underlying primitive variables of bidders (e.g., the advertiser's expectation about the return from advertising). A similar method is also used in an auction context in Jofre-Bonet and Pesendorfer (2003). Equipped with these advertiser primitives, we solve the dynamic game played by the advertiser to ascertain how changes in search engine policy affect equilibrium bidding behavior.
3. Empirical Context
The data underpinning our analysis are drawn from a major search engine for high-technology consumer products. Within this broad search domain, we consider search for music management software because the category is relatively isolated in the sense that searches for this product do not compete with others on the site.4 The category is a sizable one for this search engine as well. Along with the increasing popularity of MP3 players, the use of music management PC software is increasing exponentially, making this an important source of revenue. The goal of the search engine is to enable consumers to identify and then download trial versions of these software products before their final purchase.5 It is important to note that the approach we develop can readily generalize to other contexts and that we consider this particular instantiation to be an illustration of a more general approach.
3.1. Data Description The data comprise of three files, including
· Bidding file. Bidding is logged into a file containing the bidding history of all active bidders from
4 The search engine defines music management broadly enough that an array of different search terms (e.g., "MP3," "iTunes," "iPod," "lyric," etc.) yield the same search results for the software products in this category. Hence we consider the consumer decision of whether to search for music software on the site and whether to download given a search. This search algorithm allows us to abstract away from issues pertaining to consumer search and advertisers bidding across multiple keywords. Recognizing the importance of these issues, we call for future research on these dimensions.
5 A "click" and a "download" are essentially the same from the perspectives of the advertiser, consumer, and search engine. In the click case, a consumer makes several clicks to investigate and compare products offered by different vendors and then makes a final purchase. In the download case, a consumer downloads several products and makes the comparison before final purchase. Hence there is no difference for a click and a download in the current context. We use click and download interchangeably throughout the paper.

January 2005 to August 2007. It records the exact bids submitted, the time of each bid submission, and the resulting monthly allocation of slots. Hence, the unit of analysis is a vendor­bid event. These data form the cornerstone of our bidding model.
· Product file. Product attributes are kept in a file that records, for each software firm in each month, the characteristics of the software they purvey. This file also indicates the download history of each product in each month.
· Consumer file. Consumer log files record each visit to the site and are used to infer whether downloads occur as well as browsing histories. A separate but related file includes registration information and detailed demographics for those site visitors that are registered. These data are central to the bidding model in the context of complete information.
We detail each of these files in turn.
3.1.1. Bidding File. Most search engines yield "organic" search results that are often displayed as a list of links sorted by their relevance to the search query (Bradlow and Schmittlein 2000). Sponsored search involves advertisements placed above or along side the organic search results. Given that users are inclined to view the topmost slots in the page (Ansari and Mela 2003), advertisers are willing to pay a premium for these more prominent slots (Goldfarb and Tucker 2011).
To capitalize on this premium, advertising slots are auctioned off by search engines. Advertisers specify bids on a per-click basis for a search term. Although there is considerable variation in the nature of the auctions they use, the most widely adopted approach is the one developed by Google. Google's algorithm factors in not only the level of the bid, but the expected click-through rate of the advertiser. This enhances search engine revenue because these revenues depend not only on the per-click bid, but also the number of clicks a link receives. Winning advertisers pay the next bidder's bid (adjusted for clickthrough rates).6
The mechanism used by the firm we consider is similar to that of Google except that the considered search engine uses a first-price auction in place of a second-price auction (we intend to compare the efficacy of this mechanism to that of Google in our policy experiments). Winning bids are denoted as sponsored search results, and the site flags these as
6 With a simplified setting, Edelman et al. (2007) show that the Google practice may result in an equilibrium with bidders' payoffs equivalent to the Vickrey-Clarke-Groves (VCG) auction, whereas VCG auction has been proved to maximize total payoffs to bidders. Iyengar and Kumar (2006) further show that under some conditions the Google practice induces VCG auction's dominant "truthtelling" bidding strategy; i.e., bidders will bid their own valuations.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

451

Table 1 Bids Summary Statistics

Mean

SD

Nonzero bids (¢) Nonzero bids/bidder All bids (¢) Bids/bidder

19 55 6 40 8 14
23 13

8 32 10 46 11 04
9 68

Minimum
15 1 0 1

Maximum
55 30 55 32

sponsored links. The site we consider affords up to five premium slots, which is far less than the 400 or so products that would appear at the search engine. Losing bidders and nonbidders are listed beneath the top slots on the page, and like the previous literature, we denote these listings as organic search results.
The search engine collects bidding and demographic data on all advertisers (product attributes, product download history, and bids from active bidders). Table 1 reports summary statistics for the bidding files. At this search engine, bids were submitted on a monthly basis. Over the 32 months from January 2005 to August 2007, 322 bids (including zeros) were submitted by 21 software companies.7 As indicated in Table 1, bidders on average submitted about 22 positive bids in this interval (slightly less than once per month). The average bid amount (conditioned on bidding) was $0.20 with a large variance across bidders and time.
3.1.2. Product File. Searching for a keyword on this site results in a list of relevant software products and their respective attributes. Attribute information is stored in a product file along with the download history of all products that appeared in this category from January 2005 to August 2007. In total, these data cover 394 products over 32 months. The attributes include the price of the nontrial version of a product, backward compatibility with preceding operating systems (e.g., Windows 98 and Windows Server 2003), expert ratings provided by the site, and consumer ratings of the product. Trial versions typically come with a 30-day license to use the product for free, after which consumers are expected to pay for its use. Expert ratings at the site are collected from several industrial experts of these products. The consumer rating is based on the average feedback score about the product from consumers. Table 2 gives summary statistics for all products as well as active bidders' products. Based on the compatibility information, we sum each product's operating system compatibility dummies and define this summation as a measure for that product's compatibility with older operating systems. This variable is later used in our estimation.
7 Because some products were launched after January 2005, they were not observed in all periods.

Table 2 Product Attributes and Downloads

Mean

SD Minimum Maximum

All products

Nontrial version price ($) 16 65 20 43 0

Expert rating (if rated)

3 87

0 81 2

Average consumer

3 89

1 31 1

rating (if rated)

Months lapsed since

15 31

9 88 1

last update

Compatibility index

3 29

1 47 0

Number of downloads/ 1 367 29 9 257 16 0

(product × month)

Bidders' products

Nontrial version price ($) 21 97 15 87 0

Expert rating (if rated)

4

0 50 3

Average consumer

4 06

0 91 2 5

rating (if rated)

Months lapsed since

2 38

0 66 1

last update

Compatibility index

3 51

1 51 0

Number of downloads/ 1 992 12 6 557 43 0

(product × month)

150 5 5
31
5 184,442
39 95 5 5
3
5 103,454

Overall, active bidders' products have higher prices, better ratings, and more frequent updates.
3.1.3. Consumer File. The consumer file contains the log files of consumers from May 2007 to August 2007. This file contains each consumer's browsing log when they visit the search engine both within the search site and across Internet properties owned by the search site. The consumer file also has the registration information for those that register.
The browsing log of a consumer indicates whether the consumer made downloads and, if yes, which products she downloaded. Upon a user viewing the search results of software products, the search engine allowed the consumer to sort the results based on some attributes such as the ratings; consumers can also filter products based on some criteria such as whether a product's nontrial version is free. The browsing log records the sorting and filtering actions of each consumer. Before sorting and filtering, the top five search results are allocated to sponsored search slots, and the remaining slots are ordered by how recently the software has been updated. There is a small, discrete label indicating whether a search result is sponsored, and sorting and filtering will often remove these links from the top five premium slots.
As the demographic information upon the registration is only optional, the data set provides little if any reliable demographics of consumers. Hence we focus instead on whether a consumer is a registered user of the search engine and on their past search behavior at the other website properties--in particular, whether they visited any music-related site (which should control for the consumers' interests in music).

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

452

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

Figure 1 The Relationship Between Bids, Past Downloads, Updates, and Competing Products

Bid levels (cents) Bid levels (cents)

22 20 18 16

Lagged

5
downloa1ds0(/1,000)

15

20

5
Lapse

10
since last

15
update

(months)

25 20 15
Lagged5downloa1d0s (/1,000) 15

120
100
20 La4g0geddot6wo0tnalloca8od0ms (p/e1t,i0to0r0s)'

3.2. The Dynamics of Advertiser Bidding As the search engine considers advertisers' past downloads when assigning current placements, there exists the potential for dynamic bidding behavior on the part of advertisers. Advertisers can bid lower amounts for the same placement with a large number of preceding period downloads.
To further illustrate dynamic bidding behavior in our data, we consider two nonparametric spline regressions. One regresses advertiser bids on past downloads and the update recency of the product (because the site returns a higher organic rank to more recently updated products). Another considers advertiser bids on past downloads and total past competing products' downloads. Figure 1 plots the results. For all levels of update recency and lagged competing downloads, there is a strong inverse relationship between bid levels and past downloads, suggesting that advertisers do account for past downloads when making bidding decisions.8 The second regression affords additional evidence of dynamic bidding; when competitors have a large number of lagged downloads, the advertiser bids more aggressively to offset its competitors' bidding advantage.9
By itself, the negative autocorrelation between downloads and bids does not necessarily imply
8 In the regression of bids on past downloads and update recency, this effect of past downloads is moderated slightly by update recency and is generally lowest for recently updated products. The moderating effect of update recency may be a consequence of advertisers having less of an incentive to promote a recently updated product, in light of its advantaged position in the organic search section.
9 The results demonstrated in Figure 1 could be an artifact of pooling bidders' observations together. Thus, we consider analogous nonparametric analyses for three frequent advertisers and find the results to be similar.

advertisers are strategic; rather, advertisers may simply be myopic, reacting to their downloads in the preceding period. Accordingly, when we develop our model in the next section, we shall consider the possibility that advertisers are not forward looking (see §6.2.1). Results from that analysis are also consistent with dynamic bidding behavior.
4. Model
The model incorporates behaviors of the agents interacting on the search engine platform: (i) advertisers who bid to maximize their respective profits and (ii) utility maximizing consumers who decide whether to click on the advertiser's link. For any given policy applied by the search engine, this integrated model enables us to predict equilibrium revenues for the search engine (the consumer­advertiser interactions are analogous to a subgame contingent on search engine behavior). The behavior of the bidder (advertiser) is dependent on the behavior of the consumer as consumer behavior affects advertiser expectations for downloads and, hence, their bids. The behavior of the consumer is dependent on the advertiser because the rank of the advertisement affects the behavior of the consumer. Hence, the behaviors are interdependent. We first exposit the consumer model and then solve the bidder problem conditioned on the consumers' behaviors.
4.1. Consumer Model Advertiser profit (and therefore bidding strategy) is incumbent upon their forecast of consumer downloads for their products djt k Xjt c , where k denotes the position of the advertisement on the search engine results page, Xjt indicates the vector of attributes of advertiser j's product at period t, and c are

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

453

Figure 2 Consumer Decisions

Arriving at the search engine

Not search (C1) Search (C1)

Sorting/filtering (C2)

Download (C3)

parameters to be estimated.10 Thus, we seek to develop a forecast for djt k Xjt c and the attendant consequences for bidding. To be consistent with the advertisers information set, we base these forecasts of consumer behavior solely on statistics observed by the advertiser: the aggregate download data and the distribution of consumers characteristics. Later, in §7, we assess what happens to bidding behavior and platform revenues when disaggregate information is revealed to advertisers by the platform. We begin by describing the consumer's download decision process and how it affects the overall number of downloads.
4.1.1. The Consumer Decision Process. Figure 2 presents an overview of the decisions made by consumers. In any given period t, the consumer's problem is whether and which software to select to maximize their utility. The resolution of this problem is addressed by a series of conditional decisions.
First, the consumer decides whether she should search on the category considered in this analysis (C1). We presume that the consumer will search on the site if it maximizes her expected utility.11
Conditioned on engaging a search, the consumer next decides whether to sort and/or filter the results (C2). The two search options lead to the following four options for viewing the results: ={0  neither, 1  sorting but not filtering, 2  not sorting but filtering, 3  sorting and filtering}.12 For each option, the set of products returned by the search engine differs in terms of the number and the order of products. Consumers choose the sorting/filtering option that maximizes their expected utility.
10 In our application, we treat the periodicity of t as monthly because that is consistent with the bidding process. To explore the robustness of our findings to this treatment, we reestimate the consumer model at a biweekly level and find little change to the estimates.
11 Although we do not explicitly model the consumer's decision to search across different terms, product categories, or competitors, our model incorporates an "outside option" that can be interpreted as a composite of these alternative behaviors.
12 We categorize sorting/filtering based on the most prevalent behaviors observed in the data. Sorting by ratings and/or filtering by price (free or not) account for 83% observations using sorting/filtering options. We also experiment a specification with all sorting/filtering options included, but the model Akaike information criterion (AIC) deteriorates from -12491 2 to -12525 6, and our key insights are unaffected. As a result, we present the more parsimonious specification.

Finally, the consumer chooses which, if any, products to download (C3). We presume that consumers choose to download software if it maximizes their expected utility. We discuss the modeling details for this process in a backward induction manner (C3­C1).

Download. We assume that consumers exhibit heterogeneous preferences for products and download those alternatives that maximize their expected utility. We specify consumer i of preference segment g to have underlying latent utility u~gijt = wigjt - cigjt for downloading software j in period t. In particular, wigjt represents the expected benefit from the usage of the downloaded alternative j, whereas cigjt can be interpreted as the opportunity cost (disutility) of time spent on locating the product. Letting a index product attributes, we have

wigjt

=

~

g j

+

xjat

~g a

+ e~ijt

(1)

a

where

·

~

g j

is

the

segment-specific

intercept

for

product

j;

· xjat is the level of observed attribute a of product j;

·

~

g a

is

consumer

i's

"taste"

regarding

product

attribute a, which is segment specific; and

· e~ijt is individual idiosyncratic preference shock, realized after the sorting/filtering decision. The

shocks are independently distributed over individu-

als, products, and periods as zero mean normal ran-

dom variables.

We assume that the search cost of locating a product cigjt is a function of its slot position, kjt, because consumers tend to view a Web page from the top

down and may spend more time to locate a prod-

uct if the product is placed at the bottom of the page

(Ansari and Mela 2003).13 Specifically,

-c~igjt = ~g kjt + e~icjt

(2)

where ~g is segment-specific cost parameters on slot ranking, and e~icjt is individual cost shock that is independently distributed across people, products, and periods as a mean zero normal random variable.
Hence the net utility of product j becomes

u~ gijt = wigjt - c~igjt

=

~

g j

+

xjat

~g a

+

~g
0

kjt

+

~gijt

(3)

a

where ~gijt = e~ijt + e~icjt.14

13 With an additional dummy variable of "left versus right," which interacts with kjt, this specification can be easily extended to accommodate search results that are sorted both from left to right and from top to bottom such as those at Google.
14 We also consider a specification wherein we include a dummy variable for sponsored links to ascertain whether there is a signaling value of sponsorship over and above link order. Inconsistent with this conjecture, model fit decreases from -12 491 to -12 513, and the estimate is insignificant.

454

To allow the variances of download errors ( ~gijt ) and

sorting/filtering

errors

(

g it

,

which

will

be

detailed

below) to differ, both must be properly scaled (see

Train 2003). Hence we have the following assumption.

Assumption 1. The ~ijts are independently and identi-

cally distributed normal random variables with mean zero

and variance normalized to

g 2. The

g it

s

are

indepen-

dently and identically distributed Type I extreme value ran-

dom variables.

Under Assumption 1, we may redefine the utility in Equation (3) as

ugijt = g u¯ gijt + ijt

(4)

u¯gijt =

g j

+

xjat

g a

+

g 0

kj

t

(5)

a

where

g j

g a

g

ijt =

~

g j

~

g a

~g

~ijt / g; u¯gijt is the

scaled "mean" net utility and ijt  N 0 1 . The result-

ing choice process is a multivariate probit choice

model.15 Letting dijt = 1 indicate download (and

dijt = 0 no download), we have

 1

if ugijt  0

dijt = 0 otherwise

(6)

and the probability of downloading conditional on

parameters

g j

g a

g is

Pr dijt = 1 = Pr ugijt  0

= Pr g u¯gijt + ijt  0

= Pr - ijt  u¯gijt

= u¯gijt

(7)

where · is the standard normal distribution cumu-

lative distribution function.

Although consumers know the distribution of the

product

utility

error

terms

(~

g ijt

),

these

error

terms

do not realize before the sorting/filtering (C2) and

search (C1) decisions (see Hong and Shum 2006,

15 We consider an alternative specification that allows the utilities across products to be correlated. Using a compound symmetric covariance structure for the product errors, we find decreased model fit (AIC, -12 491 versus -12 503). It can be shown that, under the weak assumptions that (1) the consumer allocates her time between searching/browsing and the outside options (such as leisure time), and (2) it is not optimal to allocate all time to searching/browsing (i.e., there is no corner solution), the consumer download problem reduces to a multivariate independent choice probit model. The discussion, available as an appendix, can be requested from the authors.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

Hortaçsu and Syverson 2004, Kim et al. 2010).16 Hence, consumers can only form an expectation about the total utilities of all products under a given sorting/filtering option prior to choosing that option. Viewed in this light, the choice of a sorting and filtering strategy is informative about consumer preferences and provides an additional source of information to identify their preferences.

Sorting and Filtering. Before making a download decision, consumers face several sorting and filtering decisions that are indexed as = 0 1 2 3-- corresponding to no sorting or filtering, no sorting but filtering, sorting but no filtering, and both sorting and filtering, respectively. We expect consumers to choose the option that maximizes their expected download utility.
Let Uigt denote the total expected utility from products under option , which can be calculated based on Equation (3):

Uigt = E ugijt ugijt  0 Pr ugijt  0

(8)

j

This definition reflects that a product's utility is real-

ized only when it is downloaded. Hence, the expected

utility E ugijt ugijt  0 is weighted by the download

likelihood Pr ugijt  0 . The expectation E · is taken

over the random preference shocks

g ijt

.

In addition to the expected download utility Uigt ,

individuals may accrue additional benefits or costs for

using sorting/filtering option that are known to the

individuals but not observed by researchers. These

benefits and costs might accrue through unobserved

browsing experience or time constraints. We denote

such unobserved benefits or costs of the sort/filter

decision

and

g it

as ( is a

g

+

g it

s, where

g

random error term.

is an intercept term The total utility of

search option is thus given by

zgit =

g

+ Uigt

+

g it

(9)

Consumers choose the option of sorting/filtering that

leads to With

the highest total utility

g it

following a Type I

zgit . extreme

value

distri-

bution (Assumption 1), the choice of sorting/filtering

becomes a logit model such that

Pr

g it

=

exp g + Uigt 3 =0 exp g + Uigt

(10)

16 In an alternative model, we relax the assumption that consumers know the attributes and replace it with the less restrictive assumption that consumers only know the empirical distribution of the attribute levels. Hence, these consumers need to integrate over this uncertainty in their sort and filter decisions. The model fit deteriorates mainly because of the simulation errors (AIC, -12 491 2 versus -12 550 2), but there is little impact on the models' parameter estimates.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

455

To better appreciate the properties of this model, note that Uigt in Equation (8) can be written in a closed form:17

Uigt = E ugijt ugijt  0 · Pr ugijt  0
j

=g
j

u¯gijt +

u¯ gijt u¯ gijt

· u¯gijt

(11)

With such a formulation, the factors driving the person's choice of filtering or sorting become more apparent:
· Filtering eliminates options with negative utility, such as highly priced products (because consumer price sensitivity is negative). As a result, the summation in Equation (11) for the filter option will increase as the negative u¯gijt are removed. This raises the value of the filter option, suggesting that price-sensitive people are more likely to filter on price.
· Sorting reorders products by their attribute levels. Products that appear low on a page will typically have lower utility regardless of their product content (because consumer slot rank sensitivity is negative). For example, suppose a consumer relies more on product ratings. By moving more desirable items that have high ratings up the list, sorting can increase the u¯gijt for these items, thereby increasing the resulting summation in Equation (11) and the value of this sorting option.

Keyword Search. The conditional probability of keyword search takes the form

Pr searchgi

=

1

exp + exp

g 0

+

g 1

I

Vigt

g 0

+

g 1

I

Vigt

(12)

where I Vig is the inclusive value for searching conditional on the segment membership. The inclusive value I Vigt is defined as

I Vigt = log

exp zgit

(13)

This specification can be interpreted as the consumer making a decision to use a keyword search based on the rational behavior of utility maximization (McFadden 1977, Ben-Akiva and Lerman 1985). A search term is more likely to be invoked if it yields higher expected utility.

17 For a normal random variable x with mean , standard deviation and left truncated at a (Greene 2003), E x x  a = +
a - / , where a - / is the hazard function such that a- / = a- / 1- a- / . Hence with ugijt  N g u¯gijt g 2 , we have
E ugijt ugijt  0

=

g · u¯gijt +

g· 1-

- g · u¯gijt / g - g · u¯gijt /

g

= g u¯gij +

u¯ gij u¯ gij

Segment Membership. Recognizing that consumers are heterogeneous in behaviors described above, we apply a latent class model in the spirit of Kamakura and Russell (1989) to capture heterogeneity in consumer preferences. Heterogeneity in preference can arise, for example, when some consumers prefer some features more than others. We assume G exogenously determined segments. Note that our specification implies a dependency across decisions that is not captured via the stage-specific decision errors, and it therefore captures the effect of unobserved individual-specific differences in search behavior.
The prior probability for user i being a member of segment g is defined as

pgigt = exp

g 0

+

Demoit

g

/

G g

=1

exp

g 0

+ Demoit

g

(14)

where Demoit is a vector of attributes of user i such

as demographics and past browsing history; vector

g 0

g g contains parameters to be estimated. For

the purpose of identification, one segment's parame-

ters are normalized to zero.

4.1.2. Consumer Downloads. The search, sort/

filter, and download models can be integrated over

consumer preferences to obtain an expectation of the

number of downloads that an advertiser receives

for a given position of its keyword advertisement.

Advertisers must form this expectation predicated on

observed aggregate download totals, djt (in contrast to

the search engine who observes yijt it, and Demoit).

To develop this aggregate download expectation,

we begin by noting that the download utility ugijt

is a function of consumer-specific characteristics and

decisions ijt =

g ijt

g it

searchgi , segment g member-

ship, Demoit and that an advertiser needs to develop

an expectation of downloads over the distribution of

these unobserved (to the advertiser) individual char-

acteristics. Define

Aijt = ijt ugijt  0

i.e., Aijt is the set of values of ijt that will lead to the download of product j in period t.
Let ijt denote the distribution of ijt. The likelihood of downloading product j in period t can be
expressed as

Pjt =

ijt

ijt Aijt

=

u¯ gijt

Demoit g

· Pr searchgit pgigtd

exp Uigt 3 =0 exp Uigt
Demoit

(15) (16)

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

456

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

where the first term in the brackets captures the

download likelihood, the second term captures the

search strategy likelihood, and the first term outside

the brackets captures the likelihood of search. The pgigt is the probability of segment g membership, and
Demoit is the distribution of demographics. Correspondingly, the advertiser with attributes Xjt has an expected number of downloads for appear-

ing in slot k, djt k Xjt c , which can be computed as follows:

djt k Xjt c = MtPjt

(17)

where c is the set of consumer preference parameters, and Mt is the market size in period t.
Product attributes are posted on the search engine

and are therefore common knowledge to all advertis-
ers and consumers. We assume these Xjt (including prices) are exogenous within the scope of our spon-

sored search analysis for several reasons. First, adver-

tisers distribute and promote their products through

multiple channels, and they do so over longer peri-

ods of time than considered herein. Hence, product

attributes and prices are more likely to be determined

via broader strategic considerations than the partic-

ular auction game and time frame we consider. Sec-

ond, the attribute and price levels for each product

are stable over the duration of our data and analy-

sis. We would expect more variation in attribute and

price levels if they were endogenous to the particular

advertiser and search engine decisions we consider.

Third, keeping product attributes and prices stable

may actually be strategic decisions of advertisers.

However, because there is little or no variation in the

data over time, it is not feasible to estimate endoge-

nous attribute/price decision making with our data.

4.2. Advertiser Model Figure 3 presents an overview of the dynamic game played by the advertiser. Advertiser j's problem is to decide the optimal bid amount bjt with the objective of maximizing discounted present value of payoffs.18 Higher bids lead to greater revenues because they yield more favorable positions on the search engine, thereby yielding more click-throughs for the advertiser. However, higher bids also increase costs (payments), leading to a trade-off between costs and revenues. The optimal decision of whether and how much to bid is incumbent upon the bidding mechanism, the characteristics of the advertiser, the information available at the time of bidding (including the state variables), and the nature of competitive interactions.

18 Because the search engine used in our application has the dominant market share in the considered category, we do not address advertiser bidding on other sites. Also, it would be difficult to obtain download data from these more minor competitors. We note that this is an important issue and call for future research.

Figure 3 Advertiser Decisions
Valuation per download (A1)

Previous downloads (state variable)

Expected revenue = Valuation × Expected downloads

Expected costs = Bid × Expected downloads (A2)

Optimal bid: maximizing present
value (A3)

Slot
Downloads (new state variable)

An advertiser's period profit for a download is the value it receives from the download less the costs (payments) of the download. Although we do not observe the value of a download, we infer this value by noting that the observed bid can be rationalized only for a particular value accrued by the advertiser. We presume this value is drawn from a distribution known to all firms. The total period revenue for the advertiser is then the value per download times the expected number of downloads.19 The total period payment upon winning is the number of downloads times the advertiser's bid. Hence, the total expected period profit is the number of downloads times the profit per download (i.e., the value per downloads less the payment per download).
Of course, the bid levels and expected download rates are affected by rules of the auction. Although we elaborate in further detail on the specific rules of bidding below, at this point we simply note that the rules of the auction favor advertisers whose products were downloaded more frequently in the past because such products are more likely to lead to higher revenues for the platform.20 Current period downloads are, in turn, affected by the position of the advertisement on the search engine. Because past downloads affect current placement, and thus current downloads, the advertiser's problem is inherently dynamic; past downloads are treated as a state variable.
Finally, given the rules of the auction, we note that all advertisers move simultaneously. Whereas we presume a firm knows its own value, we assume competing firms know only the distribution of this value.
19 The expected number of downloads is inferred form the consumer model, and we have derived this expression in §4.1.2.
20 This is because the payment made to the search engine by an advertiser is the advertiser's bid times its total downloads.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

457

The process is depicted in Figure 3. We describe the process with more details as follows: §4.2.1 details the rules of the auction that affect the seller costs (A2), §4.2.2 details the advertisers' value distribution (A1), and §4.2.3 indicates how period values and costs translate to discounted profits and the resulting optimal bidding strategy (A3).

4.2.1. Seller Costs and the Bidding Mechanism.

We begin by discussing how slot positions are allo-

cated with respect to bids and the effect of these slot

positions on consumer downloads (and thus adver-

tiser revenue).

Upon a consumer completing a query, the search

engine returns k = 1 2 K N slots covering

the products of all firms. Only the top K = 5 slots are

considered premium slots. Auctions for these K pre-

mium slots are held every period (t = 1 2 ). An

advertiser seeks to appear in a more prominent slot

because this may increase demand for the advertiser's

product. Slots K + 1 to N are nonpremium slots that

compose a section called organic search section.

There are N advertisers who are interested in the

premium slots (N  N ). To procure a more favor-

able placement, advertiser j submits bid bjt in period t. These bids, submitted simultaneously, are summa-

rized by the vector bt = b1t b2t

bNt .21 Should an

advertiser win slot k, the realized number of down-

loads djt is a random draw from the distribution with the expectation djt k Xjt c . The placement of advertisers into the K premium slots is determined by the

ranking of their bjtdjt-1 j , i.e., the product of current bid and last period's realized downloads; the topmost

bidder gets the best premium slot, the second bidder

gets the second-best premium slot, and so on. A win-

ner of one premium slot pays its own bid bjt for each download in the current period. Hence, the total pay-

ment for winning the auction is bjtdjt. Given that the winners are determined in part by

the previous period's downloads, the auction game is

inherently dynamic. Before submitting a bid, the com-

monly observed endogenous state variables at time t

are the realized past downloads of all bidders from

period t - 1:

st = dt-1 = d1t-1 d2t-1

dNt-1

(18)

If an advertiser is not placed at one of the K premium slots, it will appear in the organic section; advertisers placed in the organic section do not pay for downloads from consumers. The ranking in the organic search section is determined by the product

21 For the purpose of a clear exposition, we sometimes use boldface

notations or pairs of braces to indicate row vectors whose elements

are variables across all bidders. For example, dt = djt j is a vector

whose elements are djt  j where j = 1 2

N.

update recency at period t, which is a component of the attribute of products, Xt. Other attributes include price, consumer ratings, and so on. In contrast to st, Xt can be considered as exogenous state variables, evolving according to some exogenously determined distribution. The endogenous state variables, in contrast, are affected by bidders' actions.22 All state variables st and Xt are commonly observed by all bidders before bidding.
4.2.2. Seller Value. The advertiser's bid determines the cost of advertising and must be weighed against the potential return when deciding how much to bid. We denote advertiser j's valuation regarding one download of its product in period t as vjt. We assume that this valuation is private information but drawn from a normal distribution that is commonly known to all advertisers. Specifically,

vjt = v Xjt + fj + rjt

(19)

= Xjt + fj + rjt

where are parameters to be estimated and reflect the effect of product attributes on valuation. The fj are firm-specific fixed effect terms assumed to be identically and independently distributed across advertisers. This fixed effect term captures heterogeneity in valuations that may arise from omitted firm-specific effects such as more efficient operations.23 The rjt  N 0 2 are private shocks to an advertiser's valuation in period t, assumed to be identically and independently distributed across advertisers and periods. The sources of this private shock may include (1) temporary increases in the advertiser's valuation because of some events such as a promotion campaign, (2) unexpected shocks to the advertiser's budget for financing the payments of the auction, (3) temporary production capacity constraint for delivering the product to users, and so on. The random shock rjt is realized at the beginning of period t. Although rjt is private knowledge, we assume the distribution of rjt  N 0 2 is common knowledge among bidders. We further assume the fixed effect fj of bidder j is known to all bidders but not to researchers. Given bidders may observe opponents' actions for many periods, the fixed effect can be inferred among bidders (Greene 2003).

22 Throughout the paper, "state variables" is sometimes used implicitly to refer to the endogenous state variable, past downloads.
23 To capture unobserved heterogeneity of advertisers' valuations and the corresponding bidding strategies, we also consider a latent class advertiser model with segment-specific , f , and bidding policies (Arcidiacono and Miller 2010, Chung et al. 2010). The firststep model fit for the bidding policies decreases (AIC changes from 2,076 to 2,110). The insights stay the same pertaining to the valuations of advertisers from the second-step estimation.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

458

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

4.2.3. Seller Profits: A Markov Perfect Equilibrium. Given vjt and state variable st, predicted downloads and search engine's auction rules, bidder j decides the optimal bid amount bjt with the objective of maximizing discounted present value of payoffs. In
light of this, every advertiser has an expected period payoff, which is a function of st, Xt, rjt, and all advertisers' bids bt:

E j bt st Xt rjt fj

K
= E Pr k bjt bt-j st Xt · vjt - bjt · djt k Xjt c
k=1

N

+E

Pr k bjt bt-j st Xt · vjt · djt k Xjt c

k=K+1

K
= E Pr k bjt bt-j st Xt · Xjt + fj + rjt - bjt
k=1
· djt k Xjt c

N

+E

Pr k bjt bt-j st Xt · Xjt + fj + rjt

k=K+1

· djt k Xjt c

(20)

where the expectation for profits is taken over other advertisers' bids bt-j . The Pr k · is the conditional probability of advertiser j getting slot k, k =
1 2 N ; Pr k · depends not only on bids but also on states st (the previous period's downloads) and product attributes Xt. This is because (i) the pre-
mium slot allocation is determined by the ranking of bjtdjt-1 j , where dt-1 are the state variables; and (ii) the organic slot allocation is determined by product update recency, an element of Xt.
In addition to the current period profit, an adver-
tiser also takes its expected future payoffs over an
infinite horizon into account when making decisions.
In period t, given the state variables, advertiser j's
discounted expected future payoffs evaluated prior to the realization of the private shock rjt is given by

E

-t j b s X rj a

(21)

=t

where a =

fj , with a denoting advertiser

behavior (in contrast to the parameters c in the con-

sumer model). The parameter is a common dis-

count factor. The expectation is taken over the random

term rjt, bids in period t as well as all future realization of s, X, shocks, and bids. The endogenous state

variables st+1 in period t + 1 is drawn from a proba-

bility distribution P st+1 bt st Xt .

We use the concept of a pure-strategy Markov per-

fect equilibrium (MPE) to model the bidder's problem

of whether and how much to bid in order to maximize

the discounted expected future profits (Bajari et al.

2007, Dubé et al. 2010a, and others). The MPE implies

that each bidder's bidding strategy only depends

on the then-current profit-related information, includ-

ing state Xt and its private shock rjt. Hence, we can describe the equilibrium bidding strategy of bidder j

as a function j st Xt rjt = bjt.24 Given a state vector s, product attributes X, and prior to the realization

of current rj (with the time index t suppressed), bidder j's expected payoff under the equilibrium strategy

profile = 1 2 sively as

N can be expressed recur-

Vj s X = E j s X rj a

+ Vj s X s

· dP s b s X s (22)

where the expectation is taken over current and future realizations of random terms r and X. To test the alternative theory that advertiser's may be myopic in their bidding, we will also solve the advertiser problem under the assumption that period profits are maximized independently over time.
The advertiser model can then be used in conjunction with the consumer model to forecast advertiser behavior, as we shall discuss in §7. In a nutshell, we presume advertisers will choose bids to maximize their expected profits. A change in information states, bidding mechanisms, or Web page design will lead to an attendant change in bids conditioned on the advertisers value function, which we estimate as described next.

5. Estimation
5.1. An Overview Although it is standard to estimate dynamic MPE models via a dynamic programming approach such as a nested fixed point estimator (Rust 1994), this requires one to repetitively evaluate the value function (Equation (22)) through dynamic programming for each instance in which the parameters of the value function are updated. Even when feasible, it is computationally demanding to implement this approach. Instead, we consider the class of two-step estimators. Specifically, in this application we implement the twostep estimator proposed by Bajari et al. (2007) (BBL henceforth). In the electronic companion, which is

24 The bidding strategies are individual specific because of the fixed

effect fj (hence the subscript j). For the purpose of clear exposition, we use j st Xt rjt instead of j st Xt rjt fj throughout the paper.
Multiple observations for each advertiser allows the identification

of j j = 1 2

N.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising Marketing Science 30(3), pp. 447­468, © 2011 INFORMS
available as part of the online version of this paper and can be found at http://mktsci.pubs.informs.org/, we also derive a Bayesian likelihood-based estimator for the two-step model. This approach has the advantage that it does not rely on asymptotics for inference. The estimates are essentially identical although the posterior predictive 95% intervals for the Bayesian model parameters are slightly more narrow than the BBL confidence intervals, and their distribution is slightly skewed.
As can be seen in Equation (22), the value function is parametrized by the primitives of the value distribution a. Under the assumption that advertisers are behaving rationally, these advertiser private values for clicks should be consistent with observed bidding strategies. Therefore, in the second-step estimation, values of a are chosen so as to make the observed bidding strategies congruent with rational behavior. We detail this step in §5.3.
However, as can be observed in Equations (22) and (20), computation of the value function is also incumbent upon (i) the bidding policy function that maps bids to downloads, product attributes, and private shocks j st Xt rjt = bjt; (ii) the expected downloads djt k Xjt c ; and (iii) a function that maps the likelihood of future states as a function of current states and actions P st+1 bt st Xt . These are estimated in the first step as detailed in §5.2 and then substituted into the value function used in the second step estimation.
The identification of the consumer model follows the identification strategies of classical discrete-choice models. The advertiser model's identification follows BBL. We provide a more detailed discussion of its identification in Appendix A.3 of the electronic companion.
5.2. First-Step Estimation In the first step of the estimation, we seek to obtain the following:
1. A "partial" policy function j s X , describing the equilibrium bidding strategies as a function of the observed state variables. We estimate the policy function by noting that players adopt equilibrium strategies (or decision rules) and that behaviors generated from these decision rules lead to correlations between (i) the observed states and (ii) advertiser decisions (i.e., bids). The partial policy function captures this correlation. In our case, we use a Tobit model with a flexible polynomial specification in state variables to link bids to downloads and product characteristics. Details are described in §A.1.1 of the electronic companion.25 Subsequently, the full policy function
25 As a robustness check, we also consider a thin-plate spline function for the policy function. We obtain essentially the same

459
j s X rjt can be inferred based on j s X by integrating out the private random shocks rjt. Hence the partial policy function can be thought of as the marginal distribution of the full policy function.
2. The expected downloads for a given firm at a given slot, djt k Xj c . The djt k Xj c follows directly from the consumer model. Hence, the first step estimation involves (i) estimating the parameters of the consumer model and then (ii) using these estimates to compute the expected number of downloads. The expected total number of downloads as a function of slot position and product attributes is obtained by using the results of the consumer model to forecast the likelihood of each person downloading the software and then integrating these probabilities across persons.26 We discuss our approach for determining the expected downloads in §A.1.2 of the electronic companion.
3. The state transition probability P s b s X , which describes the distribution of future states (current period downloads) given observations of past downloads, product attributes, and actions (current period bids). These state transitions can be derived by (i) using the policy function to predict bids as a function of past downloads and product attributes; (ii) determining the slot ranking as a function of these bids, past downloads, and product attributes; and then (iii) using the consumer model to predict the number of current downloads. Details regarding our approach to determining the state transition probabilities is outlined in §A.1.3 of the electronic companion.
With the first-step estimates of j s X rjt , djt k Xj c , and P s b s X , we can compute the value function in Equation (22) as a function with only a unknown. In the second step, we estimate these parameters.
5.3. Second-Step Estimation The goal of the second-step estimation is to recover the primitives of the bidder value function, a. The intuition behind how the second-stage estimation works is that true parameters should rationalize the
second-step estimates under both specifications. We report the results of the polynomial specification because the identification of BBL with continuous control under nonparametric policy function is still not established (BBL, p. 1346). We discuss the robustness check in the electronic companion.
26 As an aside, we note that advertisers have limited information from which to form expectations about total downloads because they observe the aggregate information of downloads but not the individual-specific download decisions. Hence, advertisers must infer the distribution of consumer preferences from these aggregate statistics. In a subsequent policy simulation we allow the search engine to provide individual-level information to advertisers to assess how it affects advertiser behavior and, therefore, search engine revenues.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

460

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

observed data. For bidders' data to be generated by rational plays, we need

Vj s X j -j a  Vj s X j -j a

 j= j

(23)

where j is the observed equilibrium policy function and j is some deviation from j . This equation means that any deviations from the observed equilib-
rium bidding strategy will not result in more profits.
Hence, we first simulate the value functions under
the equilibrium policy j and the deviated policy j (i.e., the left-hand side and the right-hand side of
Equation (23)). Then we obtain a using a minimum distance generalized method of moments (GMM) esti-
mator as described in BBL. We describe the details
of this second-step estimation in Appendix A.2 of the
electronic companion.

6. Results
6.1. First-Step Estimation Results Recall, the goal of the first-step estimation is to determine the policy function, j st Xt rjt , the expected downloads djt k Xjt c , and the state transition probabilities P st+1 bt st Xt . To determine j st Xt rjt , we first estimate the partial policy function j st Xt and then compute the full policy function. To determine djt k Xjt c we first estimate the consumer model and then compute the expected downloads. Last, P st+1 bt st Xt is derived from the consumer model and the partial policy function. Thus, in the first stage we need only to estimate the partial policy function and the consumer model. With these estimates in hand, we compute j st Xt rjt djt k Xjt c , and P st+1 bt st Xt for use in the second step. Thus, we report below the estimates for the partial policy function and the consumer model on which these functions are all based.
6.1.1. Partial Policy Function j s X . The vector of independent variables s X for the partial policy function (i.e., the flexible polynomial function and the alternative thin-plate spline function as outlined in Appendix A.1.1 of the electronic companion) contains the following variables:
· Product j's state variable, last period download djt-1, and the square of this term. We reason that high past downloads increase the likelihood of a favorable placement and, therefore, affect bids. We introduce djt-1 2 to accommodate potential nonlinearity in the effect of past downloads on bids.
· Two market-level variables (and their respective squares): the sum of last period downloads from all bidders and the number of bidders in last period. Because we only have 322 observations of bids, it is

infeasible to estimate a parameter to reflect the effect of each opponent's state (i.e., competition) on the optimal bid. Moreover, it is unlikely a bidder can monitor every opponent's state in each period before bidding because such a strategy carries high cognitive and time costs. Hence, summary measures provide a reasonable approximation of competing states in a limited information context. Others in the literature who have invoked a similar approach include Jofre-Bonet and Pesendorfer (2003) and Ryan (2010). Like them, we find this provides a fair model fit. Another measure of competitive intensity is the number of opponents. Given that bidders cannot directly observe the number of competitors in the current period, we used a lagged measure of the number of bidders.
· The interaction term between past download djt-1 and update recency. This term is introduced to capture the interaction between the two variables observed in §3.2.
· Product j's attributes in period t Xjt , including its nontrial version price, expert rating, consumer rating, update recency, and compatibility with an older operating system. We expect that a higher-quality product will yield greater downloads, thereby affecting the bidding strategy.
· An advertiser-specific constant term to capture the impact of the fixed effect fj on bidding strategy.27
· To control the possible effect of the growth of ownership of MP3 players, we also collect the average lagged price of all new MP3 players in the market from a major online retailing platform (http://www.pricegrabber.com).
Table 3 reports the estimation results.28 As a measure of fit of the model, we simulated 10,000 bids from the estimated distribution. The probability of observing a positive simulated bid is 41.0%; the probability of observing a positive bid in the real data is 41.6%. Conditional on observing a positive simulated bid, these bids have a mean of $0.19 with a standard deviation of $0.09. In the data, the mean of observed positive bids is $0.20, and the standard deviation is $0.08. At the individual bids level, the withinsample bidding choice hit rate is 0.98. Conditional on
27 An alternative, and more flexible, approach to capture heterogeneity used by Misra and Nair (2011) estimates the two-step model agent-by-agent; this approach is feasible in contexts with large amounts of data for each agent, a moderate state and actions space, and a modicum of agent interactions. Given that this is not the case in our context, we instead employ a fixed effect specification in both the valuation function and the bidding policy and assume that the fixed effects in the valuation function do not moderate the bidding policy function. Recently, Arcidiacono and Miller (2010) and Chung et al. (2010) have proposed a latent class approach to accommodate heterogeneity that is feasible to estimate in our context. As noted in §4.2.2, our findings are robust to this approach. Accordingly, we believe the fixed effect assumption is of limited consequence in our context.
28 To conserve space, we do not report the estimates of fixed effects.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

461

Table 3 Bidding Function Estimates

Parameters

SE

Lagged downloadsjt /103 (Lagged downloadsjt /103 2 Total lagged downloadst /103 (Total lagged downloadst /103 2 Lagged downloadsjt /103 ×
Lapse since last updatejt Lagged number of bidderst Lapse since last updatejt Nontrial version pricejt Expert ratingsjt Consumer ratingsjt Compatibility indexjt Lagged MP3 player pricet
Log likelihood
p < 0 10; p < 0 05.

-0 32

0 06

-0 09

0 07

0 08

0 04

0 02

0 01

0 06

0 03

0 02

0 01

-0 55

0 30

0 40

0 21

0 46

0 56

0 82

0 38

-0 19

0 03

0 09

0 03

7 17

1 06

-1 002 9

observing a positive bid, the mean absolute percentage error (MAPE) is 0.05. To access the out-of-sample fit, we also estimate the same model only using 70% (227/322) of the observations and use the remaining 30% as a holdout sample. The change in estimates is negligible. We then use the holdout to simulate 10,000 bids. The probability of observing a positive bid is 41.1%, whereas there are 42.4% positive bids in the holdout sample. Among the positive simulated bids, the mean is $0.23 and the standard deviation is $0.08. The corresponding statistics in the holdout are $0.21 and $0.07. The hit rate and MAPE for the holdout are 0.94 and 0.08, respectively. Overall, the fit is good.
The estimates yield several insights into the observed bidding strategy. First, the bidder's state variable djt-1 is negatively correlated with its bid amount bjt because the ranking of the auction is determined by the product of bjt and djt-1. All else being equal, a higher number of lagged downloads means a bidder can bid less to obtain the same slot. Second, the total number of lagged downloads in the previous period j djt-1 and the lagged number of bidders both have a positive impact on a bidder's bid. We take this to mean increased competition leads to higher bids. Third, bids are increasing in the product price. One possible explanation is that a high priced product yields more value to the firm for each download, and hence the firm competes more aggressively for a top slot. Fourth, and similarly, a high price for MP3 players reflects a greater value for the downloads, also leading to a positive effect on bids. Fifth, "Lapse since last update" has a negative effect on bids. Older products are more likely obsolete, thereby generating lower value for consumers. If this is the case, firms can reasonably expect fewer final purchases after downloads and, therefore, bid less for

Table 4 Alternative Numbers of Latent Segments

AIC

1 segment 2 segmentsa 3 segments 4 segments
aIndicates the model with the best fit.

-12 159 2 -12 491 2 -12 571 1 -12 551 4

these products. Sixth and likewise, higher compatibility with prior software versions reflects product age, leading to a negative estimate for this variable. Seventh, although the effect is quite small, the interaction between update recency and lagged download is significant. This result may stem from older products appearing lower in the organic search results, thereby enhancing the incremental effect of securing a sponsored slot near the top, thus increasing the advertiser incentive to bid. Finally, ratings from consumers and experts (albeit not significant for experts) have a positive correlation with bid amounts--these again imply greater consumer value for the goods, making it more profitable to advertise them.

6.1.2. Consumer Model. The consumer model is

estimated using MLE approach based on the likeli-

hood function described in Appendix A.1.2 of the

electronic companion. We consider the download

decisions for each of the 21 products who entered

auctions, plus the top three products who did not.

Together, these firms constitute over 80% of all down-

loads. The remaining number of downloads are scat-

tered across 370 other firms, each of whom has a

negligible share. Hence, we exclude them from our

analysis.29

We estimate an increasing number of latent seg-

ments until there is no improvement in model fit as

defined by the AIC. Table 4 reports the AIC values for

up to four segments. The two-segment model yields

the best result, with 0.07 as the in-sample MAPE of

and 0.11 as 10% of the sample holdout MAPE. The

overall fit is good.

Table 5 presents the estimates of the model with

two segments. Conditional on the estimated segment

parameters and demographic distribution, we calcu-

late the segment sizes as 88% and 12%, respectively.

Based on the parameter estimates in Table 5, seg-

ment 1 is less likely to initiate a search (low

g 0

and

low download utility function intercept). The primary

basis of segmentation is whether a customer has vis-

ited a music website at other properties owned by

29 As noted by Zanutto and Bradlow (2006), excluding products from the analysis might induce sample bias. As a robustness check, we reestimate the model with a random sample of five additional products that were originally omitted. There is little change to the estimates, but the model fit deteriorates (AIC, -12 491 versus -12 517). Hence we retain the current specification.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

462

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

Table 5 Consumer Model Estimates

g (utility parameters)

Constant

Slot rank

Nontrial version price

Expert ratings

Consumer ratings

Compatibility index

Total download percentage

g (sorting/filtering scaling)

g (fixed effect,

sorting/filtering)

Sorting only

Filtering only

Sorting and filtering

g (search probability)

g 0

(base)

(1-correlation)

g (segment parameters)

Constant

Music site visited

Registration status

Product downloaded

in last month

Segment 1 (88%)
(Infrequent searcher)
Estimate (SE)
-0 05 (0.03) -0 13 (0.05)
0 01 (0.01) 0 10 (0.05) 0 11 (0.03) -0 06 (0.03) 0 03 (0.02) 1 44 (0.40)
0 13 (0.06) 0 06 (0.11) -0 03 (0.18)
-8 13 (2.22) 0 79 (0.31)
-- -- -- --

Segment 2 (12%)
(frequent searcher and slot sensitive)
Estimate (SE)
0 25 (0.10) -0 65 (0.05) -0 08 (0.03)
0 08 (0.03) 0 05 (0.02) -0 15 (0.20) 0 12 (0.04) 1 50 (0.53)
0 04 (0.15) 0 27 (1.21) -0 21 (1.11)
-0 66 (0.30) 0 83 (0.12)
-3 25 (1.20) 6 50 (2.11)
-0 15 (0.25) -0 35 (0.15)

the download website; these customers are far more likely to be in the frequent download segment. Moreover, upon engaging a search, segment 1 appears to be less sensitive to slot ranking but more sensitive to consumer and expert ratings than segment 2. Segment 2, composed of those who search more frequently, relies more heavily on the slot order when downloading. Overall, we speculate that segment 1 is made up of the occasional downloaders who base their download decisions on others' ratings and tend not to exclude goods of high price. In contrast, segment 2 contains the "experts," or frequent downloaders who tend to rely on their own assessments when downloading. Of interest is the finding that those in segment 2 rely more on advertising slot rank. This is consistent with a perspective that frequent downloaders might be more strategic; knowing that higher-quality firms tend to bid more and obtain higher ranks, those who download often place greater emphasis on this characteristic (Chen and He 2006, Athey and Ellison 2008). It could also reflect the greater opportunity cost of time for frequent searchers. Because these consumers conduct more searches, they search less "deeply" conditioned on a search. Otherwise, the total number of searches (i.e., the number of searches times the number of alternative considered per search), and hence the total cost of search, would be extremely large.
More insights on this difference in download behavior across segments can be gleaned by determining

Table 6 Searching Behavior of Consumers

Segment 1 (%)

Searching No sorting or filtering Sorting but no filtering No sorting but filtering Sorting and filtering

0 09 74 8 25 1 0 0

Segment 2 (%)
62 5 85 5
79 61 05

the predicted probabilities of searching and sort-

ing/filtering by

g 1

I

Vigt

/ 1+exp

computing

g 0

+

g 1

I

Vigt

Pr searchgi and Pr

g it

= =

exp exp

g 0

+

g+

Uigt / 3 =0 exp g + Uigt in Equations (12) and

(10), respectively. Table 6 reports these probabilities

for both segments.

Table 6 confirms the tendency of those in seg-

ment 2 to be more likely to initiate a search in the

focal category. Although comprising only 12% of all

consumers, they represent 90% of all searches. The

increased searching frequency suggests that members

of segment 2 are ideal customers to target because

more searches lead to more downloads.

Moreover, segment 2 (heavy downloaders) is more

likely to be influenced by sponsored advertising. To

see this, note that segment 1 consumers put more

weight on the ratings of products (e.g., expert and

consumer ratings) than do segment 2 consumers. As

a consequence, segment 1 consumers engage in far

more sorting. Sorting eliminates the advantage con-

ferred by sponsored advertising because winners of

the sponsored search auction may be sorted out of

desirable slots on the page.

Table 6 also indicates consumers in segment 1

(occasional downloaders) seldom filter. Filtering

occurs when consumers seek to exclude negative util-

ity options from the choice set (e.g., omitting a prod-

uct not compatible with a certain operating system).

Given the high sensitivity to rank order, segment 2

consumers are more prone to eliminate advertised

options by filtering. We suspect that this segment, by

virtue of being a frequent visitor, searches for very

specific products that conform to a particular need.

Overall, however, segment 1 is more likely to sort

and/or filter than segment 2 (25.1% versus 14.5%),

suggesting that segment 2 is more valuable to adver-

tisers. We will explore this conjecture in more detail

in our policy analysis.

6.2. Second-Step Estimation Results
6.2.1. Alternative Models. In addition to our proposed dynamic bidding model, we consider two alternative models of advertiser behavior: (i) myopic bidding and (ii) heterogeneous advertiser valuations across consumer segments.30 Table 7 reports the fit of

30 We do not estimate the discount factor . As shown in Rust (1994), the discount factor is usually unidentified. We fix = 0 99

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

463

Table 7 Alternative Models

Model

Average GMM objective functions

Base model

1.11

Base model without

3.15

advertiser dynamics

Base model with

1.09

heterogeneous customer valuations

each model. In the first alternative model, advertisers maximize period profits independently as opposed to solving the dynamic bidding problem given in Equation (22). This model yields a considerably poorer fit, with the average objective under the dynamic model of 1.1, compared with 3.2 under the myopic setting.31 Hence, we conclude that the data are consistent with a specification where advertisers are bidding strategically.32 This strategic behavior might result from dynamics in the bidding process coupled with nonlinearity in advertising response. Similar dynamic behavior has been evidenced in the face of nonlinear advertising demand systems with dynamics in advertising carryover (Bronnenberg 1998).
The second alternative model considers the case wherein advertiser valuations for clicks differ across segments. In this model, we augment Equation (19) by allowing these valuations to vary by segment and then integrate this heterogeneity into the seller profit function given by Equation (20). This model leads to only a negligible increase in fit. Closer inspection of the results indicates little difference in valuations across segments, implying that advertisers perceive the conversion rates of each segment to be essentially the same. Hence, we adopt the more parsimonious single valuation model. It is further worth noting that all of our subsequent results and policy simulations evidence essentially no change across these two models.
6.2.2. Valuation Model Results. Table 8 shows the results of second-step estimation for the favored
for our estimation. We also consider = 0 90 and = 0 95 and observe minimal differences in the results.
31 Specifically, we reestimate the second step of BBL approach by bootstrapping across the empirical distribution of first-stage estimates and computing the average of the GMM objective functions under the assumption of forward looking. We then set the discount factor to zero and reestimate the second step using bootstrapping and take the average of the GMM objective functions under the assumption of myopic bidding.
32 Owing to the inability of model fit alone to substantiate forward-looking behavior, techniques to disentangle myopic from dynamic behavior using field data have become an ongoing research problem of interest in marketing (Misra and Nair 2011, Dubé et al. 2010b).

Table 8 Value-per-Click Parameter Estimates

Estimate

SE

Lapse since last updatejt

-0 96

0 27

Nontrial version pricejt

0 21

0 10

Expert ratingsjt

0 55

0 08

Consumer ratingsjt

0 88

0 11

Compatibility indexjt

-0 31

0 03

Lagged MP3 player pricet

0 02

0 01

, Random shock SD

1 44

0 40

model.33 With respect to the advertiser value function, we find that newer, more expensive, and betterrated products yield greater values to the advertiser. This is consistent with our conjecture in §6.1.1 that firms bid more aggressively when having higher values for downloads. We find that, after controlling for observed product characteristics, 95% of the variation in valuations across firms is on the order of $0.02. We attribute this variation in part because of differences in the operating efficiency of the firms.
Given the second-step results, we can further estimate the value of a download to a firm in each period. In Figure 4, the kernel density estimator distribution of these estimates across time and advertisers is depicted. As indicated in the figure, there is substantial variation in the valuation of downloads. Table 8 explains some of this variation as a function of the characteristics of the software- and firm-specific effects. Results indicate that higher prices and quality correlate with higher valuations, presumably because these factors are associated with increased advertiser revenue and sales conversion rates. Overall, the mean value of a download to these advertisers is $0.26. This compares with an average bid of $0.20, as indicated in Table 1, suggesting that advertisers obtain a small surplus of about $0.05. This surplus could arise from either (i) the advertisers bidding less than their valuation because of the use of a generalized first-price auction, or (ii) the benefit accruing from a high level of preceding downloads that would enable an advertiser to shade their bids further below their respective valuations. In our policy simulations, we will further explore the role of the auction mechanism on bids and whether it is possible to induce truth telling.
To our knowledge, this is the first paper to impute the advertiser's return from a click in a keyword search context. One way to interpret these results is to consider the firm's expected sales per download to rationalize the bid. The firm's profit per click is roughly CRtj · Pjt - bjt, where CRtj indicates the download-sale conversion rate (or sales per download) and Pjt is the nontrial version price. Ignoring
33 Advertiser-specific constant terms fj are not reported to conserve space.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

464

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

Figure 4 0.08

Distribution of Values per Download

Density

0.04

0.00 0

10

20

30

40

50

60

Value of one download (cents)

dynamic effects and setting this profit per click equal to vjt - bjt yields a rough approximation of the conversion rate as CRtj = vjt/Pjt. Viewed in this light, the effect of higher-quality software, which raises vjt, leads to a higher implied conversion rate. Noting that the aver-
age price of the software is $22, this average per-click
valuation implies that 1.2% of all clicks lead to a pur-
chase (that is, the conversion rate is 0 26/22 = 1 2%).
This estimate lies within the industry average con-
version rate of 1%­2% reported by GameDaily.com, suggesting our findings have high face validity.34

7. Policy Simulations
Given the behavior of consumers and advertisers, we can predict how changes in search engine policy affect overall bidding, downloads, consumer welfare, and revenues. The advertiser­consumer behaviors are analogous to a subgame conditioned on search engine policy. To assess the effect of changes in policy, we recompute the equilibrium behavior of consumers and advertisers conditioned on the new policy.35 One might ask whether these deviations in policy are valid as the initial strategies might reflect optimal behavior on the part of the search engine. However, extensive interactions with the search site make it clear that they have neither considered using these alternative policies nor have they tried them in the past in order to obtain a sense of the strategies' impacts. Hence, we do not conjecture that they are behaving strategically, and thus we think these are reasonable policy simulations to consider. Alternatively, estimating a model incorporating the engine's behavior invokes rather strong assumptions of rationality because of the complexity and novelty of the problem. Also, we observe no variation in the considered behaviors of the search engine, meaning there is no means to identify the primitives driving such behaviors.
We describe three policy simulations: (i) the effect of alternative Web page designs on search engine

34 See Narcisse (2007).
35 The policy simulations assume that the parameters from the consumer utility function and the advertiser valuation for consumers' clicks are invariant to a change in website design or search engine's auction mechanisms.

revenues, (ii) the value of targeting (i.e., allowing advertisers to bid on keywords by segment), and (iii) the effect of alternative pricing mechanisms on search engine revenue. As we can no longer assume the optimal advertiser policy function estimated in stage 1 of our two-step estimator remains invariant in the face of a change in search engine policy, the following policy simulations involve explicitly solving the infinite-horizon dynamic programming problem to recompute an updated (1) advertiser bidding function, (2) consumer download probability, and (3) set of state transitions. Owing to the complexities of solving this game, we develop an approximate dynamic programming (DP) approach to solve it.36 More details regarding the implementation of the policy simulations are presented in Technical Appendix B of the electronic companion.37 Hence, we limit our discussion to the objectives and insights from these simulations.
7.1. Policy Simulation I: Alternative Web Page Design
The goal of the search engine's sorting/filtering options is to provide consumers with easier access to price and rating information across different products. As shown in §4.1 and evidenced by our results, sorting and filtering play a crucial role in consumer decision process. In light of this outcome, it is possible to consider an alternative Web page design of the search engine--eliminating the option of sorting and filtering for consumers--and assessing the resulting impact on consumer search, advertiser bidding, and the search engine's revenues. Because this change can have contrasting effects on consumer behavior (consumers should be less likely to search on the site because of the decrease in utility arising from fewer search options) and advertiser behavior (advertisers should bid more because of the decreased likelihood that their advertisements will be sorted or
36 Parallel to our research, a recent study by Farias et al. (2010) demonstrates the validity of the approximate DP algorithm predicated upon a nonparametric policy function. However, our application uses a parametric policy function; to the extent the parametric function is not sufficiently flexible to capture agent behavior, our results will be biased. It is worth noting that we considered an array of different polynomial parametric models, and our results were invariant to these alternative specifications. It is further worth noting that large action and state space coupled with complex interactions among bidders can complicate the implementation of a nonparametric approach.
37 The search for a revised parametric policy function (see Technical Appendix B.1 in the electronic companion) in the neighborhood of the original policy observed in the data, coupled with the assumption of the advertiser symmetry, mitigates the potential for a multiplicity of equilibrium (Bresnahan and Reiss 1991, Dubé et al. 2005). Moreover, Jofre-Bonet and Pesendorfer (2003) show the existence of pure-strategy equilibrium in a dynamic procurement auction. If there exist multiple equilibriums, the new functions can be interpreted as the policies that are the closest to the observed policy.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

465

filtered out of the search results), the overall effect is unclear. Using our model, it can be tested which effect dominates. We do this by setting the probability of consumer choosing no sorting/filtering option in Equation (10) to one. This manipulation mimics the scenario in which the sorting/filtering option is disabled. Under this new policy, we find that the search engine's revenue decreases by 2.9%, suggesting that the consumer effect is larger.38
Next, to more precisely measure these contrasting effects, we apportion the revenue change across consumers and advertisers. Let Djt0 (Djt1) denote the number of downloads for product j in period t before (after) the change of the Web page. Let Bjt0 (Bjt1) denote the bid from advertiser j in period t before (after) the new policy. Accordingly, we can calculate (i) the revenue effect arising solely from changes in consumer behavior by holding advertiser behavior fixed j t Bjt1Djt1 - j t Bjt1Djt0 , and (ii) the effect arising from changing advertiser behavior by holding consumer behavior fixed j t Bjt1Djt0 - j t Bjt0Djt0 . Using this decomposition, we find the effect arising from consumers j t Bjt1Djt1 - j t Bjt1Djt0 / j t Bjt0Djt0 is -5 1% and the effect from advertisers j t Bjt1Djt0 -
j t Bjt0Djt0 / j t Bjt0Djt0 is 2 2%. Consistent with this result, consumer welfare as measured by their overall utility declines 3 8% when the search tools are removed, whereas advertiser profits increase 2 1%.39 Thus, for the search engine, the disadvantage of this new policy to consumers outweighs the advantages resulting from more aggressive advertiser bidding.
7.2. Policy Simulation II: Segmentation and Targeting
Advertisers might realize notable dividends if they can capitalize on the search engine's market intelligence about consumer preferences (Pancras and Sudhir 2007). By sharing information on its consumers, the search engine can allow an advertiser to vary its bids across market segments. For example, consider two segments, A and B, wherein segment B is more sensitive to product price and segment A is more sensitive to product quality. Consider further two firms, X and Y , where firm X purveys a lowerprice but lower-quality product. Intuitively, firm X should bid more aggressively for segment B because quality-sensitive segment A will not likely buy the low-quality good X. This should lead to higher revenues for the search engine. On the other hand, there
38 The bootstrapped 95% confidence interval for the revenue change of the search engine is (-3 9%, -1 0%).
39 The 95% confidence intervals for the welfare changes of consumers and advertisers are (-5 1% -1 9%) and 0 6% 4 0% , respectively.

is less bidding competition for firm X within segment B because Y finds this segment unattractive-- this dearth of competition can drive the bid of X down for segment B. This would place downward pressure on search engine profits. Hence, the optimal revenue outcome for the search engine is likely to be incumbent upon the distribution of consumer preferences and the characteristics of the goods being advertised. Our approach can assess these effects of segmentation and targeting strategy on the search engine's revenue.
To implement this policy simulation, we enable the search engine to serve a different advertisement to each market segment and allow advertisers to bid differentially each period for these keyword slots across the two consumer segments (see Technical Appendix B.2 in the electronic companion for details). We find the search engine's resulting revenue increases by 1%. Using a similar decomposition mentioned in §7.1, we find the revenue effect arising from the consumer side of the market is 1.4%. We attribute this effect mainly to the enhanced efficiency of advertisements under targeting. In other words, targeting leads to more desirable advertisements for consumers, thereby yielding increased downloads. In contrast, the effect arising from advertisers is -0 4% as a result of diminished competitive intensity. Overall, the consumer effect of targeting is dominant, and a net gain in profitability is indicated.40
This policy also benefits advertisers in two ways: by increasing the efficiency of their advertising and reducing the competitive intensity of bidding within their respective segments. Overall, we project a 5.8% increase in advertiser revenue under the targeting policy. Consistent with this view of consumer gains, consumer welfare increases by 1.6%. In sum, every agent finds this new policy to be an improvement.
7.3. Policy Simulation III: Alternative Auction Mechanisms
Auction mechanism design has been an active domain of research since the seminal work of Vickrey (1961). Optimal mechanism design involves several aspects including the rules of the auction, efficiency of the auction in terms of allocation surplus across players, new design to eliminate the dynamic bidding behavior, and so forth. We focus on the payment rules in this investigation. In particular, whereas the focal search engine currently charges winning advertisers their own bids, many major search engines such as Google.com and Yahoo.com are applying a "generalized second-price auction" (Edelman et al. 2007).
40 The 95% confidence intervals for the revenue/welfare changes of the search engine, advertisers, and consumers are (0.2%, 1.5%), (4.8%, 6.4%), and (0.8%, 2.6%), respectively.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

466

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

Under the generalized second-price auction rules, winners are still determined by the ranking of bjt djt-1 j . However, instead of paying its own bid amount, the winner of a slot pays the highest losing bidder's bid adjusted by their last period downloads. For example, suppose bidder j wins a slot with the bid of bjt and last period download djt-1; its payment for each download will be bjt djt-1/djt-1, where j is the highest losing bidders for the slot bidder j wins.
Although generalized second-price auction is widely adopted by major search engines, the optimality of such a mechanism has not been substantiated (Iyengar and Kumar 2006, Katona and Sarvary 2010). Further, whether the truth-telling equilibrium strategy still holds under a dynamic setting is unknown. By implementing a policy simulation that contrasts the search engine and advertiser revenues under the two different mechanisms, we find little difference in revenues for the advertiser or search engine (for example, search engine revenues increase 0.02%). However, the advertisers' bids for clicks approach their values for clicks. Under second-price auction, the median ratio of bid/value is 0.98 compared with 0.77 under firstprice auction. This is consistent with the theory that in equilibrium bidders bid their true values under generalized second-price auction (Edelman et al. 2007). This offers empirical support for the contention that generalized second-price auctions yield truth telling-- although we find little practical consequence in terms of auction house revenue.
8. Conclusion
Given the $9 billion firms annually spend on keyword advertising, and its rapid growth, we contend that the topic is of central concern to advertisers and platforms that host advertising alike. In light of this growth, it is surprising that there is little extant empirical research pertaining to modeling the demand and pricing for keyword advertising in an integrated fashion across advertisers, searchers, and search engines. As a result, we develop a dynamic structural model of advertiser bidding behavior coupled with an attendant model of search behavior. Because we need to infer advertiser and consumer valuations and use these estimates to infer the effects of a change in search engine strategy, we develop a structural model of keyword search as a two-sided network. In particular, we consider (i) how the platform or search engine should price its advertising via alternative auction mechanisms; (ii) whether the platform should accommodate targeted bidding wherein advertisers bid not only on keywords, but also behavioral segments (e.g., those that purchase more often); and (iii) how an alternative Web page design of the search engine with less product information would affect bidding behavior and the engine's revenues.

Our model of advertiser bidding behavior is predicated on the advertiser choosing its bids to maximize the net present value of its discounted profits. Specifically, we estimate advertiser valuations for clicks by choosing them such that, for an observed set of bids, the valuations rationalize the bidding strategy. That is, their bids make advertisers' profits as high as possible. In this sense, our structural model "backs out" the advertiser's expectation for the profit per click. Given an estimate of these valuations, it becomes possible to ascertain how advertiser profits are affected by a change in the rules of the auction, a change in the Web page design, or a change in the information state of the advertiser.
We find that the estimated valuations for downloads/clicks are consistent with a download to sales ratio of 1.2%, well within industry estimates of 1% to 2%.
As noted above, a central component to the calculation of advertiser profits is the expectation of the number of clicks on its advertisement received from consumers. This expectation of clicks is imputed from our consumer search and clicking model. This model, which involves three steps (the choice of whether to search, whether to use search tools, and whether to download), follows from the standard random utility theory (McFadden 1977).
Using the consumer and advertiser model, we conduct policy simulations pertaining to search engine policy. Relating to the consumer side, we explore the effect of changing the search engine's website design to reduce usability but increase advertising exposures. We manipulate usability by removing the sorting and filtering feature on the search engine site and find an overall reduction of 2.9% in search engine revenue, suggesting that it would not be prudent to change the site. Second, we consider the possibility of allowing advertisers to bid by segment and allowing advertising slot rankings to differ by segment. Although this reduces competition within segments, targeting also enhances the expected number of downloads by increasing the relevance of the advertisements (suggesting larger search engine profits). Overall, the latter effect dominates, leading to an increase in search engine revenues of 1%. Third, we explore alternative auction designs. We find that a generalized secondprice auction leads to truth telling in advertiser bids and revenue equivalence for the search engine. This extends the work on generalized second-price auction mechanisms to dynamic settings.
Several extensions are possible. First, we use a twostep estimator to model the dynamic bidding behavior of advertisers without explicitly solving for the equilibrium bidding strategy. Solving explicitly for this strategy could provide more insights into bidder behavior in this new marketing phenomenon. For

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

467

example, following the extant literature, we assume that a bidder's return from advertising only comes from consumers' clicks. It is possible that advertisers also accrue some values from the exposures at the premium slots. Second, our analysis focuses on a single category. The existence of multiple keyword auctions may present opportunities for collusion among bidders. By doing so, they can find a more profitable trade-off between payments to the search engine and clicks across keywords. One managerial implication is how to detect and discourage collusion and reduce its negative impact on search engine revenues. Third, competition between search engines over advertisers is not modeled. Although our data provider has a dominant role in this specific category, interengine competition is unattended in the literature. Fourth, the counterfactual policy functions reflect local equilibriums that are the closest to the observed policy (Doraszelski and Satterthwaite 2010, Doraszelski and Escobar 2010). Although this lessens the concern of multiplicity, we suggest that more rigid proof of the existence and uniqueness in the keyword auction context as a future research direction. Finally, our analysis is predicated on a relatively short duration of bidding behavior. Over the longer term, there may be additional dynamics in bidding and download behavior that might arise from consumer learning or the penetration of search marketing into the market place, the so-called "durable goods problem" (Horsky and Simon 1983). Overall, we hope this study will inspire further work to enrich our knowledge of this new marketplace.
9. Electronic Companion
An electronic companion to this paper is available as part of the online version that can be found at http:// mktsci.pubs.informs.org/.
Acknowledgments The authors thank seminar participants at Cornell University, Dartmouth College, Duke University, Emory University, Erasmus University, Georgia Institute of Technology, Georgia State University, Harvard Business School, INSEAD, London Business School, New York University, Northwestern University, Ohio State University, Rice University, Stanford University, University of British Columbia, University of California at Berkeley, University of California at Davis, University of California at Riverside, University of Chicago, University of Maryland, University of Rochester, University of Southern California, University of Texas, University of Tilburg, University of Wisconsin, and Yale University; the 2008 Marketing Science Conference, NET Institute Conference 2009, NBER Summer Institute 2009, and AMA Summer Conference 2009 as well as J.-P. Dubé, Wes Hartmann, Günter Hitsch, Han Hong, Wagner Kamakura, Anja Lambrecht, Andrés Musalem, Harikesh Nair, Peter Rossi, and Rick Staelin for their feedback. The

authors gratefully acknowledge financial support from the NET Institute (http://www.netinst.org) and the Kauffman Foundation.
References
Ansari, A., C. F. Mela. 2003. E-customization. J. Marketing Res. 40(2) 131­145.
Arcidiacono, P., R. A. Miller. 2010. CCP estimation of dynamic discrete choice models with unobserved heterogeneity. Working paper, Duke University, Durham, NC.
Athey, S., G. Ellison. 2008. Position auctions with consumer search. Working paper, Harvard University, Cambridge, MA.
Bajari, P., C. Lanier Benkard, J. Levin. 2007. Estimating dynamic models of imperfect competition. Econometrica 75(5) 1331­1370.
Bajari, P., V. Chernozhukov, H. Hong, D. Nekipelov. 2009. Identification and efficient semiparametric estimation of a dynamic discrete game. Working paper, University of Minnesota, Minneapolis.
Ben-Akiva, M., S. Lerman. 1985. Discrete Choice Analysis: Theory and Application to Travel Demand. MIT Press, Cambridge, MA.
Bradlow, E. T., D. C. Schmittlein. 2000. The little engines that could: Modeling the performance of World Wide Web search engines. Marketing Sci. 19(1) 43­62.
Bresnahan, T. F., P. C. Reiss. 1991. Entry and competition in concentrated markets. J. Political Econom. 99(5) 977­1009.
Bronnenberg, B. J. 1998. Advertising frequency decisions in a discrete Markov process under a budget constraint. J. Marketing Res. 35(3) 399­406.
Bronnenberg, B. J., J.-P. Dubé, C. F. Mela. 2010. Do digital video recorders influence sales? J. Marketing Res. 47(6) 998­1010.
Chen, Y., C. He. 2006. Paid placement: Advertising and search on the Internet. Working paper, University of Colorado, Boulder.
Chung, D., T. Steenburgh, K. Sudhir. 2010. Do bonuses enhance sales productivity? A dynamic structural analysis of bonusbased compensation plans. Working paper, Yale University, New Haven, CT.
comScore. 2009. comScore releases January 2009 U.S. search engine rankings. Press release (February 18), http://ir.comscore .com/releasedetail.cfm?ReleaseID=366442.
comScore. 2010. comScore releases January 2010 U.S. search engine rankings. Press release (February 11), http://ir.comscore .com/releasedetail.cfm?ReleaseID=444505.
Doraszelski, U., J. Escobar. 2010. A theory of regular Markov perfect equilibria in dynamic stochastic games: Genericity, stability, and purification. Theoretical Econom. 53(3) 369­402.
Doraszelski, U., M. Satterthwaite. 2010. Computable Markovperfect industry dynamics. RAND J. Econom. 41(2) 215­243.
Dubé, J.-P., G. J. Hitsch, P. K. Chintagunta. 2010a. Tipping and concentration in markets with indirect network effects. Marketing Sci. 29(2) 216­249.
Dubé, J.-P., G. J. Hitsch, P. Jindal. 2010b. Estimating durable goods adoption decisions from stated preference data. Working paper, University of Chicago, Chicago.
Dubé, J.-P., K. Sudhir, A. Ching, G. Crawford, M. Draganska, J. Fox, W. Hartmann et al. 2005. Recent advances in structural econometric modeling: Dynamics, product positioning and entry. Marketing Lett. 16(3­4) 209­224.
Edelman, B., M. Ostrovsky, M. Schwarz. 2007. Internet advertising and the generalized second-price auction: Selling billions of dollars worth of keywords. Amer. Econom. Rev. 97(1) 242­259.
Farias, V., D. Saure, G. Y. Weintraub. 2010. An approximate dynamic programming approach to solving dynamic oligopoly models. Working paper, Massachusetts Institute of Technology, Cambridge.
Feng, J. 2008. Optimal mechanism for selling a set of commonly ranked objects. Marketing Sci. 27(3) 501­512.
Ghose, A., S. Yang. 2009. An empirical analysis of search engine advertising: Sponsored search in electronic markets. Management Sci. 55(10) 1605­1622.

Yao and Mela: A Dynamic Model of Sponsored Search Advertising

468

Marketing Science 30(3), pp. 447­468, © 2011 INFORMS

Goldfarb, A., C. Tucker. 2011. Search engine advertising: Channel substitution when pricing ads to context. Management Sci. 57(3) 458­470.
Greene, W. H. 2003. Econometric Analysis. Prentice Hall, Upper Saddle River, NJ.
Hong, H., M. Shum. 2006. Using price distributions to estimate search costs. RAND J. Econom. 37(2) 257­276.
Horsky, D., L. S. Simon. 1983. Advertising and the diffusion of new products. Marketing Sci. 2(1) 1­17.
Hortaçsu, A., C. Syverson. 2004. Product differentiation, search costs, and competition in the mutual fund industry: A case study of S&P 500 index funds. Quart. J. Econom. 119(2) 403­456.
Hotz, V. J., R. A. Miller. 1993. Conditional choice probabilities and the estimation of dynamic models. Rev. Econom. Stud. 60(3) 497­529.
Iyengar, G., A. Kumar. 2006. Characterizing optimal adword auctions. Working paper, Columbia University, New York.
Jofre-Bonet, M., M. Pesendorfer. 2003. Estimation of a dynamic auction game. Econometrica 71(5) 1443­1489.
Kamakura, W. A., G. J. Russell. 1989. A probabilistic choice model for market segmentation and elasticity structure. J. Marketing Res. 26(4) 379­390.
Katona, Z., M. Sarvary. 2010. The race for sponsored links: Bidding patterns for search advertising. Marketing Sci. 29(2) 199­215.
Kempe, D., K. C. Wilbur. 2010. What can television networks learn from search engines? How to select, order, and price advertisements to maximize advertiser welfare. Working paper, University of Southern California, Los Angeles.
Kim, J. B., P. Albuquerque, B. J. Bronnenberg. 2010. Online demand under limited consumer search. Marketing Sci. 29(6) 100­1023.
McFadden, D. L. 1977. Modeling the choice of residential location. Discussion Paper 477, Cowles Foundation, Yale University, New Haven, CT.
Misra, S., H. Nair. 2011. A structural model of sales-force compensation dynamics: Estimation and field implementation. Quant. Marketing Econom. Forthcoming.
Narcisse, E. 2007. Magid: Casual free to pay conversion rate too low. GameDaily.com (September 20), http://www.gamedaily.com/

articles/features/magid-casual-free-to-pay-conversion-rate-too -low/70943/?biz=1. Pancras, J., K. Sudhir. 2007. Optimal marketing strategies for a customer data intermediary. J. Marketing Res. 44(4) 560­578. Pesendorfer, M., P. Schmidt-Dengler. 2008. Asymptotic least squares estimators for dynamic games. Rev. Econom. Stud. 75(3) 901­928. Rochet, J.-C., J. Tirole. 2006. Two-sided markets: A progress report. RAND J. Econom. 37(3) 645­667. Rust, J. 1994. Structural estimation of Markov decision processes. R. F. Engle, D. L. McFadden, eds. Handbook of Econometrics, Vol. IV. Elsevier Science, Amsterdam, 3081­3143. Rutz, O. J., R. E. Bucklin. 2007. A model of individual keyword performance in paid search advertising. Working paper, Yale University, New Haven, CT. Rutz, O. J., R. E. Bucklin. 2011. From generic to branded: A model of spillover dynamics in paid search advertising. J. Marketing Res. Forthcoming. Ryan, S. 2010. The costs of environmental regulation in a concentrated industry. Working paper, Massachusetts Institute of Technology, Cambridge. TNS Media Intelligence. 2008. TNS Media Intelligence reports U.S. advertising expenditures grew 0.2 percent in 2007. Press release (March 25), http://www.tnsglobal.com/_assets/files/ TNS_Market_Research_2007_Year_end_press_release.pdf. Train, K. E. 2003. Discrete Choice Methods with Simulation. Cambridge University Press, Cambridge, UK. VanBoskirk, S. 2007. U.S. interactive marketing forecast, 2007 to 2012. Forrester Research (October 10), http://www.forrester .com/rb/Research/us_interactive_marketing_forecast%2C_2007 _to_2012/q/id/42463/t/2. Varian, H. R. 2007. Position auction. Internat. J. Indust. Organ. 25(6) 1163­1178. Vickrey, W. 1961. Counterspeculation, auctions, and competitive sealed tenders. J. Finance 16(1) 8­37. Yao, S., C. F. Mela. 2008. Online auction demand. Marketing Sci. 27(5) 861­885. Zanutto, E. L., E. T. Bradlow. 2006. Data pruning in consumer choice models. Quant. Marketing Econom. 4(3) 267­287.

