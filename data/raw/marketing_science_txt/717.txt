Vol. 27, No. 6, November­December 2008, pp. 1126­1131 issn 0732-2399 eissn 1526-548X 08 2706 1126

informs ®
doi 10.1287/mksc.1080.0366 © 2008 INFORMS

Research Note
Structural Demand Estimation with Varying Product Availability

Hernán A. Bruno
Erasmus School of Economics, Erasmus University Rotterdam, 3000 DR Rotterdam, The Netherlands, bruno@few.eur.nl
Naufel J. Vilcassim
London Business School, London NW1 4SA, United Kingdom, nvilcassim@london.edu
This paper develops a model that extends the traditional aggregate discrete-choice-based demand model (e.g. Berry et al. 1995) to account for varying levels of product availability. In cases where not all products are available at every consumer shopping trip, the observed market share is a convolution of two factors: consumer preferences and the availability of the product in stores. Failing to account for the varying degree of availability would produce incorrect estimates of the demand parameters. The proposed model uses information on aggregate availability to simulate the potential assortments that consumers may face in a given shopping trip. The model parameters are estimated by simulating potential product assortment vectors by drawing multivariate Bernoulli vectors consistent with the observed aggregate level of availability. The model is applied to the UK chocolate confectionery market, focusing on the convenience store channel. We compare the parameter estimates to those obtained from not accounting for varying availability and analyze some of the substantive implications.
Key words: structural modeling; availability; retailing History: This paper was received April 28, 2006, and was with the authors 11 months for 2 revisions;
processed by Tulin Erdem. Published online in Articles in Advance June 19, 2008.

1. Introduction
The development of demand estimation methods based on individual-level discrete-choice models using aggregate data has allowed researchers to infer the distribution of consumer preferences by observing aggregate realizations of demand, product and demographic characteristics, and other external factors affecting demand (Berry et al. 1995). One key underlying assumption of aggregate choice models is the complete availability of all products over the consumer choice occasions. Although this assumption may be realistic in certain choice situations (e.g., mobile telephone services), it may not hold in others such as grocery products. With market-level data (cf. Dube 2004), where sales are aggregated across households and stores, part of the observed variation in market shares could be explained by variation in distribution coverage, as well as assortment variation or stockouts in different retailers or zones. In such cases, one would be ascribing differences in market shares to variations in consumers' taste and behaviors, even though there

might be a significant contribution to the observed variance from different levels of availability.1
One of the reasons aggregate availability varies is that retailers make assortment decisions. Empirical studies have shown a convex relationship between distribution and market share (Reibstein and Farris 1995). Additionally, availability can vary because of out of stocks or slow adoption of new products (Bronnenberg et al. 2000, Bronnenberg and Mela 2004). Whatever the reason(s) for the variation in availability, two important questions are: What impact does it have on estimated demand effects of marketing mix and other variables? Would ignoring it lead to incorrect inferences about demand effects?
The issue of varying product availability has been absent from the reviews of the literature on structural
1 Demand estimation with varying levels of availability has been proposed in the past. For example, Jeuland (1979) integrated a model of availability into a model of multibrand choices. In discrete-choice random utility methods, varying availability is corrected by introducing the corresponding observed choice set (e.g., Campo et al. 2003).

1126

Bruno and Vilcassim: Structural Demand Estimation with Varying Product Availability Marketing Science 27(6), pp. 1126­1131, © 2008 INFORMS

1127

modeling (see Dube et al. 2005, Chintagunta et al. 2006, Kadiyali et al. 2001). One possible exception to this is the work of Tenn (2006). Although Tenn's (2006) work deals with store heterogeneity in promotions, its model could be applied to the problem of varying product availability provided some of the assumptions made there are applicable. Specifically, Tenn's (2006) analysis uses the fact that most of the time only one product is promoted in the product category analyzed (premium ice cream), which allows him to identify the marginal distribution of promotional activity. Applying this assumption to varying product availability would require that at any point in time only a single product has less than 100% availability--something that clearly does not hold in our data. An additional assumption is that the promotions are the same across all stock-keeping units (SKUs) of a given brand. In many categories where size or product form effects are present (for example, when only one size (32 oz.) or one form (powder) of a detergent is on promotion), so that aggregating across SKUs to the brand level is not appropriate, applying Tenn's (2006) model would be computationally challenging, if not infeasible. We contend that the method proposed here would be more suitable for the situation with many products (both brands and SKUs) in the category as it is computationally simpler. This paper presents a tractable model that can account for varying levels of product availability, and which can be easily estimated similar to Berry et al. (1995).
This paper is designed to (1) recognize that ignoring varying levels of availability when using aggregate-level data, as mentioned above, can lead to incorrect inferences about consumer preferences and, more important, (2) provide a method to use aggregate measures of product availability to statistically correct the demand estimates. Our model can be considered an extension of the well known discrete choice-based models with aggregate data. The main challenge is that, although we observe the aggregate level of distribution, we do not observe the set of products available in a particular store. Hence we use simulation methods to model the different possible assortments of products that individual stores may have had on a given shopping trip.
To illustrate the availability issue and apply our model, we analyze data from the chocolate confectionery industry sold through the impulse channel in the United Kingdom.
2. Accounting for Varying Levels of Availability
2.1. Observed and Conditional Market Shares We model a market of J partially differentiated competing products. Consumers can choose any one of

the J alternatives with respective prices p1 pJ or choose not to purchase any (i.e., they have an outside

option). At time t, the choice of alternative j = 1 J

with a characteristics vector xjt provides consumer h with a level of utility equal to uhjt = xjth h - hpjt + jt + hjt .
The parameter vector h and the parameter h cap-
ture, respectively, the taste for the product character-

istics and the price sensitivity for consumer h. The

term jt captures unobserved product characteristics or unobserved market-level demand shocks, depend-

ing on the definition of x. We assume that the nopur-

chase option (j = 0) provides a utility level of zero. If

is extreme value distributed, the probability choice

follows the logit form (McFadden 1974).

Heterogeneity in preferences among consumers is

modeled by assuming that the variation in indi-

vidual parameters follows a probability distribution

such as a continuous parametric distribution, or a

nonparametric mass-point distribution. To simplify

the notation, we write the individual-level parame-

ters in terms of their mean across individuals and

an individual-level deviation (noted as realization of

the random variables and ). Hence we write

the parameters as h = +

and h = + ,

where the scalar and the matrix are param-

eters. Additionally, we write the mean utility level

(that is, constant across consumers) as jt = xjth h -

hpjt + jt, and collect the heterogeneity terms in hjt =

xjt

-

pjt. Conditional on the parameters, the

logit market share for product j is the integral over

the heterogeneity =

,

S~jt =

exp jt + jt

1+

J k=1

exp

kt +

kt

dG

(1)

The previous expressions, though ubiquitous in the

literature, rely on the assumption that all products

are available when consumers make purchase decisions. The notation S~j represents the share conditional on complete availability, in contrast to the unconditional

share Sj , defined below. We let ajt denote the availability of product j during
a purchase occasion at time t. The variable ajt can only take two values: 1 if the product is available and 0

if the product is not available. The set of products

available is therefore denoted by the J -dimensional

vector at = a1t

aJt). The expectation over prefer-

ences S~jt at is the share conditional on at, and hence

a function of the availability vector,

S~jt at =

ajt exp jt + jt

1+

J k=1

akt

exp

kt +

kt

dG

The observed market share is the expectation of the expression above over all possible availability vectors.

1128

Bruno and Vilcassim: Structural Demand Estimation with Varying Product Availability Marketing Science 27(6), pp. 1126­1131, © 2008 INFORMS

That is, the share can be written as an expectation over all values of a,

Sjt =

S~jt at at

(2)

all at

In Equation (2) all at denotes all possible combinations of ajt  0 1 , and at is the joint probability of observing the vector at. In summary, the observed share is the result of averaging over all the shop-
ping trips consumers made in period t, each of which
involved the choice over a particular realization of the
availability vector at.

2.2. Estimation Strategy

The proposed method introduces information on the

observed levels of aggregate availability in the com-

putation of the market shares. In essence, we use

the aggregate level of availability to approximate

the probability of finding a particular product, and

thus compute the expectation in Equation (2). The

logit estimation of demand involves finding param-

eters that minimize a convenient measure of dis-

tance between the observed and the computed market

shares. Berry et al. (1995) proposed using an empir-

ical distribution of pseudorandom draws to approx-

imate the population density. The expectation over

consumer preferences can be computed by summing

over the random draws. Traditionally, each draw is a

particular realization of the multivariate distribution

of preferences. The method we propose involves gen-

erating vectors of product availability by taking ran-

dom draws from the empirical distribution of avail-

ability. These availability vectors are then used in

addition to the utility random draws to compute the

market shares using Equation (2).

Note that the proposed approach does not involve

putting additional parameters into the model. Our

data include information that can be used as a proxy

for the probability of availability for each product

a1

aJ for each market time period. How-

ever, we do not observe the joint probability of the

multivariate Bernoulli vector of availability a =

a1

aJ . To compute the joint probability, we

make further assumptions about the correlation

among the aj s. We assume that aj is independent of ak for j = k. That is to say, the probability of one
product being available is independent of whether

other products are available. This is an acceptable

assumption in some situations and particularly in the

context of our estimation below.

Let a^ = a^1

a^J denote the ith multivariate

Bernoulli draw with marginal distributions given by

a1

aJ . We use this draw to approximate the

sum of integrals in Equation (2). In the spirit of Berry

et al. (1995) and Nevo (2001), we compute the sum

S^jt

=1 I I i=1 1 +

a^jti exp jt + jt ^i

J k=1

a^kti

exp

kt +

kt

^i

(3)

Distribution (%)

Figure 1 Sales and Distribution of Similar Products

Sales (million units)

7.0

100

Dist.

90

6.0

80

5.0

70

4.0

60

50

3.0

40

2.0

1.0

M&M

Sales

30

20

10

0.0 1997

2000

0 2003

Period (years)

Sales (million units)

7.0

100

6.0

Dist.

90

80

5.0

70

4.0 3.0
Smarties 2.0 1.0

60

50

40

30

Sales

20

10

0.0 1997

2000

0 2003

Period (years)

Distribution (%)

By equating the share computed in Equation (3) to the observed shares, we obtained a system of equations analogous to those in Berry (1994), Berry et al. (1995), and Nevo (2001). It can be shown that the mean utility levels can be obtained using a recursive form as outlined in Berry (1994) and Berry et al. (1995).2

3. Application
We apply our estimation framework to characterize the demand system in the chocolate confectionery industry in the United Kingdom. We focus on the impulse channel (convenience stores, newsagents, tobacconists, etc.) where our assumptions are likely to hold.
Figure 1 illustrates the effect of distribution on sales. The drop in sales of Smarties seen around 2003 coincides with falling distribution coverage and should be noted if we are estimating consumer demand. Otherwise, the drop in demand will affect the demand parameter estimates and lead to incorrect inferences about consumer preferences and price sensitivities.
The data were provided by Information Resources, Inc. (IRI) and cover 113 four-week periods from June 1996 to February 2005 on confectionery products from

2 The proof is available from the authors.

Bruno and Vilcassim: Structural Demand Estimation with Varying Product Availability Marketing Science 27(6), pp. 1126­1131, © 2008 INFORMS

Table 1 Summary of the Data Set

Product
Dairy Milk Whole Nut Fruit & Nut Caramel Flake Snowflake Dream Wispa Galaxy Galaxy Caramel Galaxy Ripple M&Ms Maltesers Mars Mars 5 Little Ones Kit Kat Kit Kat Chunky Kit Kat Cubes Milky Bar Milky Bar Munchies Smarties Double Cream Snicker Snickers Cruncher

Manufacturer
Cadbury Cadbury Cadbury Cadbury Cadbury Cadbury Cadbury Cadbury Masterfoods Masterfoods Masterfoods Masterfoods Masterfoods Masterfoods Masterfoods Nestle Nestle Nestle Nestle Nestle Nestle Nestle Masterfoods Masterfoods

Variable format
Block Block Block Block Indulgence Indulgence Block Indulgence Block Block Indulgence Bite sized Bite sized Filler Indulgence Indulgence Filler Bite sized Block Bite sized Bite sized Block Filler Filler

Weeks on market
113 113 113 113 113 58 109 113 113 113 113 113 113 113 53 113 76 18 63 38 113
33 113 45

Average availability (%)
95 86 90 86 85 53 29 65 87 66 70 80 95 99 14 96 89 63 69 40 81 65 97 38

Average price (GBP)
0 53 0 55 0 54 0 36 0 34 0 37 0 66 0 33 0 47 0 34 0 32 0 47 0 54 0 34 0 35 0 34 0 35 0 50 0 25 0 46 0 41 0 49 0 35 0 32

1129
Average share (%)
9 00 3 50 4 10 4 60 3 70 1 50 0 70 2 10 5 10 2 10 2 70 3 60 8 00 15 70 0 30 11 80 6 70 1 60 4 00 0 70 3 70 1 40 10 80 0 70

the UK market. For each product, we observe national unit sales, average price, and category-weighted distribution. We defined the total market as the total units of confectionery consumed in the corresponding time period. We constructed the market share as the ratio of sales to the total market unit sales. In measuring aggregate availability, we use the all commodity volume (ACV) weighted distribution as the aggregate availability variable to recognize that not all stores have identical sales and traffic. Although this is not the ideal measure of distribution (Dolan and Hayes 2005), it serves as a good proxy considering that we are using national UK-level data. In addition, ACV is a standard measure used by practitioners and researchers and is widely available from market research companies. Note also that the data (including distribution) are aggregated at the brand level (see Little 1998 for a discussion of aggregation for sales and distribution measures). This is a common procedure when the estimation is performed at the product level (as opposed to using a characteristics-based approach). We expect these shortcomings (common to many situations in which aggregate data are used) to be minimized by focusing on the impulse channel because these smaller stores are less likely to carry a large variety of SKUs.3

We use four variables that indicate the format of the confectionery product (block, filler, indulgence, and bite sized). In Table 1, we provide a summary of the data set and we can see that most of the products were available for the whole period of observation. Products that were not available during the whole period of observation were launched after June 1996. No product in the data set disappeared during the period of observation. The confectionery market is composed of thousands of different products with many different variants and SKUs. The data set we are using aggregates across different SKUs and, overall, covers 70% of the market. Because of the highly fragmented nature of the category, small market shares (on the order of 1%) do not necessarily represent low levels of sales. Finally, note that some products have significant market shares in spite of low availability levels (e.g., Snowflake). It should be noted from Table 1 that some products have high levels of availability, although they are not in the market in the early weeks because they were launched after June 1996. Conversely, other products are present in the market for the whole period observation but show low levels of availability.
To account for potential endogeneity, we use three types of instruments for price, as it is well accepted

3 If they stock a product, they tend to carry the single-pack, regular size, regular flavor SKU. We found that this is the case by observing data at the SKU level for the years 2002­2005. In addition, stores in

the impulse channels are similar to one another in terms of sales volume and size, thus minimizing the aggregation bias in the ACV computation.

1130

Bruno and Vilcassim: Structural Demand Estimation with Varying Product Availability Marketing Science 27(6), pp. 1126­1131, © 2008 INFORMS

Table 2 Product Intercepts for the Standard and the Proposed Method

Estimates (standard errors)

Product
Dairy Milk Whole Nut Fruit and Nut Caramel Flake Snowflake Dream Wispa Galaxy Galaxy Caramel Galaxy Ripple M&Ms Maltesers Mars Mars 5 Little Ones Kit Kat Kit Kat Chunky Kit Kat Cubes Milky Bar Milky Bar Munchies Smarties Double Cream Snicker Snickers Cruncher

Random coefficients
logit
-1 047 (0.606) -1 874 (0.604) -1 726 (0.595) -2 488 (0.413) -2 863 (0.383) -3 626 (0.657) -4 236 (1.210) -3 224 (0.471) -1 848 (0.533) -3 485 (0.444) -3 193 (0.360) -4 716 (0.586) -3 572 (0.632) -1 632 (0.396) -9 403 (4.587) -1 565 (0.426) -2 507 (0.554) -5 322 (1.095) -2 780 (0.634) -6 581 (0.892) -5 022 (0.516) -3 097 (0.731) -1 987 (0.413) -5 185 (1.548)

Random coefficients
logit with/availability
-1 130 (1.021) -1 932 (0.177) -1 794 (0.264) -2 477 (0.189) -3 140 (0.375) -3 664 (1.021) -3 377 (0.177) -3 455 (0.264) -1 853 (0.189) -3 194 (0.375) -3 273 (1.021) -4 994 (0.177) -3 974 (0.264) -2 212 (0.189) -7 924 (0.375) -1 843 (1.021) -3 054 (0.177) -6 018 (0.264) -2 828 (0.189) -6 486 (0.375) -5 479 (1.021) -3 000 (0.177) -2 579 (0.264) -5 353 (0.189)

that the unobserved term jt is likely to be correlated with the price of the product. First, we use price indices for labor costs and spot prices for cocoa. Second, we use average prices from our manufacturer products (as they may capture manufacturer-specific changes in marginal cost). Finally, we use average prices of products of the same format. These variables were selected after carefully studying their explanatory power on price using hedonic regressions. Together, they explain around 80% of the observed variance in prices.
It can be seen from the results in Table 2, that when availability is corrected for using the proposed methodology, two-thirds of the product intercept estimates are higher. As we pointed out in the introduction, not accounting for availability penalizes products with low distribution coverage because of, for instance, sluggish retailer adoption. In contrast, well-established products with very high distribution and market shares (Mars, Snickers, Kit Kat, and popular plain chocolates) have lower product intercept estimates.
In Table 3, we show the estimates for the product characteristics.
These patterns also translate to the product characteristics, although the format coefficients are harder to interpret because they depend on many products. Note, however, that controlling for availability produces different estimates, particularly in the

Table 3 Estimates for Product Characteristics and Heterogeneity

Estimates (standard errors)

Variable format Estimate

RC logit

RC logit with availability

Price Block Indulgence Filler Bite sized

Mean Sigma
Mean Sigma
Mean Sigma
Mean Sigma
Mean Sigma

-5 414 (1.121) 1 212 (1.185)
-2 509 (0.569) 0 054 (1.376)
-2 828 (0.853) 1 063 (0.137)
-3 979 (0.697) 0 233 (0.526)
-5 042 (0.763) 2 459 (0.240)

-6 061 (0.375) 2 365 (0.399)
-2 399 (0.447) 0 279 (1.021)
-3 299 (0.671) 1 897 (0.177)
-3 883 (0.548) 1 122 (0.264)
-5 390 (0.600) 3 031 (0.189)

price coefficient, which is smaller in absolute value (i.e., less price sensitivity). In many cases, the bestselling brands in a given category have high levels of availability. If the estimation were restricted to the top few brands in the category, the results from the two methods would not differ much from each other. However, in the category we are analyzing, top brands account for only a fraction of total category sales. So estimating the model using only the top brands (a practice that could be sensible when analyzing other categories such as ketchup) would leave a large proportion of the market out of the estimation. In general, we would expect this to be the case for situations in which a large number of products have to be included in the estimation (e.g., the Nevo 2001 analysis of the cereal product category).
Evaluating the competitive landscape is one of the main uses of structural models. To this end, unbiased price coefficients and elasticity measures are very important. If the variation in product availability is ignored, sales variations because of changes in distribution will be captured by the price coefficient (or other environmental factors in more general models). This may result in contamination of the price coefficient by nonprice factors. For instance, if we compare the competitive clout and the vulnerability (Kamakura and Russell 1989)4 for the products in our data set, we find that the biggest difference occurs for products that have lower levels of availability. In Figure 2, the computed clout and vulnerability are plotted. When estimates are corrected for varying availability, some newly introduced products seem less vulnerable (lower left corner of the lower panel in Figure 2).
4 Competitive clout is a measure of how other products sales are affected by a change in price of the focal brand, while vulnerability measures the change in sales associated with changes in prices of competing brands.

Bruno and Vilcassim: Structural Demand Estimation with Varying Product Availability Marketing Science 27(6), pp. 1126­1131, © 2008 INFORMS

1131

Figure 2 Competitive Clout and Vulnerability

Vulnerability

0.16 0.14 0.12 0.10 0.08 0.06 0.04 0.02 0.00
0.00

Not corrected for availability

Kit Kat Chunky

Snickers Kit Kat
Maltesers

Dairy Milk Mars

0.10 0.20 0.30 0.40 0.50 0.60 0.70 Clout

Vulnerability

Corrected for availability 0.14

0.12

0.10 0.08 0.06

Kit Kat Chunky

Snickers

Maltesers

0.04

Galaxy Ripple Snowflake

Wispa

0.02 Mars 5 Little Ones

Kit Kat

0.00

0.00

0.10

0.20

0.30

Clout

Dairy Milk Mars

0.40

0.50

4. Conclusions
In this paper, we have proposed a straightforward extension to the traditional discrete-choice-based demand estimation method developed in Berry et al. (1995) to incorporate information on product availability. To do that, we assumed that availability is independent across products. We have illustrated our method using data from the UK impulse channel sales of chocolate confectionery products.

Acknowledgments The authors thank Céline Bonnet and conference participants at the INRA-IDEI Empirical Industrial Organization of the Food Retailing Industry for useful discussions. The authors also thank J.-P. Dube, Bart Bronnenberg, and Pradeep Chintagunta for helpful comments, Georg Toufar for making the data available, and the area editor and four anonymous reviewers for comments and suggestions. All errors remain with the authors.

References
Berry, S. 1994. Estimating discrete-choice models of product differentiation. RAND J. Econom. 25(2) 242­262.
Berry, S., J. Levinsohn, A. Pakes. 1995. Automobile prices in market equilibrium. Econometrica 63(4) 841­889.
Bronnenberg, B. J., C. F. Mela. 2004. Market roll-out and retailer adoption of new brands. Marketing Sci. 23(4) 500­518.
Bronnenberg, B. J., V. Mahajan, W. R. Vanhonacker. 2000. The emergence of market structure in new repeat-purchase categories: The interplay of market share and retailer distribution. J. Marketing Res. 37 16­31.
Campo, K., E. Gijsbrechts, P. Nisol. 2003. The impact of retailer stockouts on whether, how much, and what to buy. Internat. J. Res. Marketing 20 273­286.
Chintagunta, P. K., T. Erdem, P. Rossi, M. Wedel. 2006. Structural modeling in marketing: Review and assessment. Marketing Sci. 25(6) 604­616.
Dolan, R., T. Hayes. 2005. The myths and dangers of ACV. The New England Consulting Group, http://www.brandweek.com/.
Dube, J.-P. 2004. Multiple discreteness and product differentiation: Demand for carbonated soft drinks. Marketing Sci. 23(1) 66­81.
Dube, J.-P., K. Sudhir, A. Ching, G. S. Crawford, M. Draganska, J. T. Fox, W. Hartmann, G. J. Hitsch, V. B. Viard, M. Villas-Boas, N. Vilcassim. 2005. Recent advances in structural econometric modeling: Dynamics, product positioning and entry. Marketing Lett. 16(3­4) 209­224.
Jeuland, A. P. 1979. The interaction effect of preference and availability on brand switching and market share. Management Sci. 25(10) 953­965.
Kadiyali, V., K. Sudhir, V. R. Rao. 2001. Structural analysis of competitive behavior: New empirical industrial organization methods in marketing. Internat. J. Res. Marketing 18 161­186.
Kamakura, W. A., G. J. Russell. 1989. A probabilistic choice model for market segmentation and elasticity structure. J. Marketing Res. 26 379­390.
Little, J. D. C. 1998. Integrated measures of sales, merchandising and distribution. Internat. J. Res. Marketing 15 473­485.
McFadden, D. 1974. Conditional logit analysis of qualitative choice behavior. P. Zarembka, ed. Frontiers in Econometrics. Academic Press, New York, 105­142.
Nevo, A. 2001. Measuring market power in the ready-to-eat cereal industry. Econometrica 69(2) 307­342.
Reibstein, D. J., P. W. Farris. 1995. Market share and distribution: A generalization, a speculation, and some implications. Marketing Sci. 14(3, Part 2) G190­G202.
Tenn, S. 2006. Avoiding aggregation bias in demand estimation: A multivariate promotional disaggregation approach. Quant. Marketing Econom. 4(4) 383­405.

