Vol. 29, No. 4, July­August 2010, pp. 585­601 issn 0732-2399 eissn 1526-548X 10 2904 0585

informs ®
doi 10.1287/mksc.1100.0559 © 2010 INFORMS

Demand Estimation with Social Interactions and the Implications for Targeted Marketing

Wesley R. Hartmann
Stanford Graduate School of Business, Stanford University, Stanford, California 94305, hartmann_wesley@gsb.stanford.edu
This paper develops a model for the estimation and analysis of demand in the context of social interactions. Decisions made by a group of customers are modeled to be an equilibrium outcome of an empirical discrete game, such that all group members must be satisfied with chosen outcomes. The game-theoretic approach assists estimation by allowing us to account for the endogeneity of group members' decisions while also serving as a managerial tool that can simulate equilibrium outcomes for the group when the firm alters the marketing mix to the group. The model builds upon the existing literature on empirical models of discrete games by introducing a random coefficients heterogeneity distribution. Monte Carlo simulations reveal that including the heterogeneity resolves the endogenous group formation bias commonly noted in the social interactions literature. By estimating the heterogeneous equilibrium model using Bayesian hierarchical Markov chain Monte Carlo, we can also recover some parameters at the individual level to evaluate group-specific characteristics and targeted marketing strategies. To validate the model and illustrate its implications, we apply it to a data set of groups of golfers. We find significant social interaction effects, such that 65% of the median customer value is attributable to the customer and the other 35% is attributable to the customer's affect on members of his group. We also consider targeted marketing strategies and show that group-level targeting increases profit by 1%, whereas targeting within groups can increase profitability by 20%. We recognize that customer backlashes to targeting could be greater when group members receive different offers, so we suggest some alternatives that could retain some of the profitability of within group targeting while avoiding customer backlashes.
Key words: decision making; interdependent preferences; consumption; discrete choice; social interactions; targeted marketing; customer relationships
History: Received: July 7, 2008; accepted: November 29, 2009; processed by Yuxin Chen. Published online in Articles in Advance April 8, 2010.

1. Introduction
With the recent growth of social networking websites and information technology that can track consumption behavior, marketers are increasingly conducting research in the area of social interactions. Although most of the work has been in the areas of diffusion (e.g., Van den Bulte and Stremersch 2004) and word of mouth (Godes et al. 2005), there is relatively little work extending choice models to analyze data in which the decision of one customer is directly influenced by the decisions of, as opposed to the referrals from, one or more of the customer's peers. However, such interactions are common. Individuals are often observed to eat together at restaurants, watch movies together, play games online together, or choose common wireless phone plans to take advantage of innetwork calling discounts. In each of these examples, individuals may differ in their preferences but prefer to coordinate the decisions to yield either social or pecuniary benefits.
From the marketer's perspective, there are unique implications when individuals within a group coordinate their decisions. Like a word-of-mouth social

interaction, the lifetime value of any given customer will depend on the customer's demand and others' demand that is generated by the customer's social interactions. However, unlike word of mouth, where the social interaction is primarily relevant for customer acquisition, coordinated decision making implies that the social interactions are relevant for every purchase occasion. In such cases, a marketer cannot invest heavily in an initial social interaction such as a referral with the hope that it will generate a long stream of future revenue.1 Rather, the marketer's focus is on incorporating the social interaction into all marketing mix decisions.
This paper develops a model that can be used to estimate social interactions and analyze their implications. One important challenge in developing such a model is to extend the typical discrete choice model to include the decisions of a customer's peers. To do this we recognize that coordinating decisions within a group involves individuals weighing their personal
1 Kumar et al. (2007) provide a discussion of how referrals can be incorporated into customer lifetime value estimates.

585

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

586

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

preferences against those of their peers to find decisions from which none of the group members has an incentive to deviate. In other words, we model their decisions as the equilibrium outcome of a coordination game. This characterization of group decision making is common in the economics literature and is most closely related to the "battle of the sexes" game.2 To make this empirically tractable, we incorporate the coordination game directly into an econometric model. Hence, the model falls within the broad class of empirical models of discrete games defined by Bresnahan and Reiss (1991) and is most comparable to equilibrium models of social interactions defined by Brock and Durlauf (2001) and Soetevent and Kooreman (2007).
The equilibrium model serves two purposes. First, the model provides an econometric benefit by accounting for the fact that when a partner's decision enters the payoffs of a focal customer's choice equation, it is an endogenous variable.3 The model deals with this by treating all of the group members' choices as a single outcome of a simultaneous-move game with complete information.4 Second, the equilibrium model allows us to conduct counterfactuals to measure customer values and the effect of marketing mix activities in the presence of social interactions. Therefore, the model is a useful way for managers to evaluate potential social interactions even if customer data are not available. Customer data provide the benefit of measuring preference parameters to focus on empirically relevant predictions of the model rather than on the full range of comparative statics that the parameter space may yield.
Another concern that arises when developing models to estimate social interactions is that unobserved customer heterogeneity may be correlated between the members of a group. As is well documented in the sociology literature, individuals tend to form groups with similar individuals, i.e., homophily. This implies a natural correlation in the behavior of individuals
2 Fudenberg and Tirole (1991, p. 18) describe an example of the "battle of the sexes" in which two players "wish to go to an event together, but disagree about whether to go to a football game or the ballet." Our model is similar, except that from the perspective of the firm, the interest is whether one, both, or neither buy. The no-purchase option may or may not have a coordination benefit. In the applications we consider, no purchase occurs with a high frequency such that it is safe to assume that if a customer does not purchase, her utility is unlikely to be affected by whether or not the other person purchases (i.e., social interaction benefits only arise when both purchase).
3 That is, the partner's decision is a function of the unobserved preferences of the focal customer and hence not exogenous to the error term in the equation for the focal customer.
4 This endogeneity problem has been referred to in the social interactions literature by Manski (1993) and Moffitt (2001) as the simultaneity problem.

that could be incorrectly interpreted as a causal social interaction. Nair et al. (2010) account for this potential confound by including individual-level fixed effects in their linear model. In this paper, we also exploit the panel structure of data but do so using a hierarchical Bayesian Markov chain Monte Carlo (MCMC) approach. Through model simulations, we illustrate that incorporating a rich random coefficients heterogeneity specification into equilibrium models of social interactions resolves a large potential bias. The Bayesian approach has the added advantage of allowing us to recover individual-level parameter estimates to evaluate targeted marketing strategies as in Rossi et al. (1996).
To validate our model, and analyze the marketing implications of the social interactions, we apply it to a data set of groups of golfers. An important aspect of the data is that we observe individuals purchasing with one or more of their golfing partners and also purchasing alone. This helps us obtain posterior inference on how much of an individual's demand is attributable to his own innate preferences as opposed to the social interaction effect conveyed by his partner(s). The golfing data also allow us to analyze the behavior of individuals that may be partnered with two different individuals who are themselves not partnered with one another (i.e., group members by association).
After estimating the model, we explore features of the model that can be used to guide a firm's marketing decisions. First, we decompose a customer's value into his own purchases and the purchases he generates in his partners. We find that 65% of the median customer value is attributable to the customer, and the other 35% is attributable to the customer's effect on his partners. This distribution varies across the customers, with substantial mass at both 10% and 50% of the customer value attributable to effects on partners. Second, we consider targeting advertised pricing in the context of social interactions. We find that targeting at the group level increases profit by 1%, whereas targeting within groups can increase profitability by 20%. We also illustrate that targeting without recognizing the social interaction leads to 16% less profit. Finally, we note that targeting within groups has the ability to alienate some customers. We therefore suggest that firms may want to make offers to the group that allow them to allocate the price between members. An example might be a two-for-one price. Although withingroup bargaining is beyond the scope of this paper, the lower the price one partner pays, the less elastic is the demand of his peers.
The remainder of this paper is structured as follows. Section 2 defines the equilibrium model and discusses its features. Section 3 describes the econometric specification and identification. Section 4 describes

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

587

the empirical application. Section 5 reports model estimates, measures of customer values, and pricing implications. Section 6 concludes.

2. An Empirical Equilibrium Model of Social Interactions
In this section we define a model of how individuals choose their actions when the payoff of their actions is contingent on the decisions of others in their group. To be clear, the focus of this paper is the analysis of actions within a group rather than the formation of the group itself. We therefore take as given a predetermined set of dyadic relationships that form a group.5 We define to be an N × N matrix in which element ij equals one if individual i and j are partners and equals zero otherwise. The diagonals of this matrix are consequently irrelevant. All relationships are assumed to be symmetric such that ij = ji. A group that includes an individual i also includes all individuals j for which ij = 1, all individuals k for which jk = 1, and so on. To make this assumption is essential because even though i may not be partnered with k, i's decisions are influenced by k through k's effect on j. The N individuals observed in the data will therefore be divided into G mutually exclusive groups of varying sizes (i.e., groups are defined large enough that an individual can only be a member of a single group). Because some individuals may be grouped with more than one other person, we will allow the utility of an incremental partner to decline.
From this point forward, we index an individual by his group, g, and which individual he is within that group, i. We therefore define the preference parameters of individual i in group g to be ig. In each time period t, individuals are modeled to make a binary purchase decision yigt  0 1 , where yigt = 1 indicates a purchase. The decision is an outcome of a discrete choice random utility model with the following latent utilities:

u yigt y-igt igt ig



v0 + 0 igt

= v1igt y-igt

ig

if yigt = 0 (1)
+ 1 igt if yigt = 1

v1igt represents the nonstochastic portion of the indirect utility from choosing a firm's good or service.
The primary feature of this model, and its deviation

5 Firms may identify relationships through a variety of means. For example, Internet social networking sites may observe whether two individuals have put one another on a friend list. It is important to note that group identification and relationship formation is a challenging research area of its own (see, for example, Narayan 2007).

from the standard discrete choice model, is that the indirect utility is a function of y-igt, a vector of the decisions of others in the group.6 This function is specified in §3.1 such that additional partners joining in an activity have diminishing marginal effects on the focal individual. also affects the indirect utility because it identifies which group members directly affect i s decision. Because of our interest in individuals that prefer to coordinate consumption decisions, we focus on models in which the following holds.

Assumption 1. v1igt yjgt = 1 y-i jgt ig

>

v1igt yjgt = 0 y-i jgt ig

if ij = 1, and v1igt yjgt =

1 y-i jgt ig

= v1igt yjgt = 0 y-i jgt ig

if

ij = 0.

In other words, a group member purchasing

increases i's utility of purchasing if that group mem-

ber is i's partner but has no direct effect on i's pur-

chase decision if not a partner but rather just a group

member by association. When ji = 0, j does still indirectly affect i through any other partners that i and j

have in common.

v0 is the utility of the outside good, which is normalized to zero. igt is an extreme value distributed individual- and time-specific shock to preferences.

We assume this is independent across individuals

and time.

This latent utility structure applies to all individu-

als in the group. Furthermore, we assume complete

information such that individuals in a group know

others' s, s, and any other variables that may enter

the indirect utilities. Given that individuals care about

the decisions of others in the group, we model them

to coordinate on a set of decisions, ygt, from which none of the individuals will have an incentive to devi-

ate. Specifically, we define ygt to be a pure-strategy

Nash equilibrium; i.e., u yigt y-igt igt ig



u yigt y-igt igt ig

 yigt.

2.1. Multiple Equilibria A problem that commonly arises in discrete games, and also in the decisions of groups, is that there may be more than one decision, ygt, sufficiently satisfactory that all individuals will go along with it. For example,

6 In some cases, it may also be appropriate to define the outside alternative as being a function of y-igt. For example, two golfers might be playing tennis together when not at the course. Without broader knowledge of group activities beyond those with the specific firm, it is impossible to identify such behavior. Furthermore, because the majority of no-purchase occasions likely do not involve a joint activity of the individuals, the model as defined in this paper should provide a more realistic estimate and is perhaps the best a manager could do in trying to analyze the behavior observed in its customer purchase database. In applications where coordination on the outside alternative occurs, the later definition (in §2.1) that a 1 1 outcome Pareto dominates a 0 0 outcome would not necessarily hold.

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

588

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

if none of the individuals has a strong enough preference to unilaterally purchase, but all of them would be willing to do so if the rest purchased, none purchasing and all purchasing are both equilibria.
Multiple equilibria can present problems for both of the model's purposes: estimation and counterfactual analysis. In the case of estimation, the lack of a unique equilibrium can prevent us from defining a likelihood function. When conducting counterfactuals, the lack of a unique equilibrium prevents us from predicting outcomes when the market environment implies multiple equilibria.
Consider an interaction with two players, A and B. There are four possible outcomes of the game: yA yB  1 1 1 0 0 1 0 0 . The equilibrium conditions for each are the following:

1 1 if v11A + 1A > 0A and v11B + 1B > 0B

1 0 if v10A + 1A > 0A and v11B + 1B < 0B

0 1 if v11A + 1A < 0A and v10B + 1B > 0B

(2)

0 0 if v10A + 1A < 0A and v10B + 1B < 0B

where v1yBA abbreviates v1A yB A . Multiple equilibria arise when there is an overlap in 1A - 0A and
1B - 0B in the conditions for two different equilibria. In this two-player example, outcomes 1 1 and 0 0 are both equilibria when -v10A > 1A - 0A > -v11A and -v10B > 1B - 0B > -v11B . To illustrate this, we apply the graphical depiction of Bresnahan and Reiss (1991) to our model.
Figure 1 depicts the inequalities that form these equilibria over the space defined by A = 1A - 0A on the horizontal axis and B = 1B - 0B on the vertical axis.7 Equilibrium 1 1 corresponds to regions II, III, V, and VI. Equilibria 1 0 and 0 1 correspond to regions IX and I, respectively. Equilibrium 0 0 corresponds to regions IV, V, VII, and VIII. Notice that region V arises in both 1 1 and 0 0 . This implies that under the specific set of s defined by region V, there are multiple equilibria.
Multiple equilibria are problematic in estimation because the s must integrate to one, yet we would double-count the s in region V if we merely used the equilibrium conditions to define the probability of each outcome. Researchers have often circumvented this problem by assuming that individuals will always select the equilibrium that maximizes the

7 This graphical approach follows that introduced by Bresnahan and Reiss (1991) and has been used in the entry literature to illustrate equilibria and the potential for multiple equilibria. In our case, complementarities between consumers imply that the region of multiple equilibria involves neither or both consuming, whereas in the case of competition between potential entrants, the region of multiple equilibria involves a single entrant.

Figure 1 Regions of Equilibria

B = 1B ­ 0B
{v11A + A > 0} {v10A + A > 0}

I

II

III
{v10B + B > 0}

IV

V

VI
{v11B + B > 0}

VII

VIII

IX

A = 1A ­ 0A
Notes. The horizontal and vertical axes in the figure define the net shock to preferences for consuming, i = 1i - 0i , for individuals A and B, respectively. The dashed lines define indifference between consuming and not when an individual's partner is not consuming. The solid lines define indifference between consuming and not when an individual's partner is consuming. Regions II, V, and VI represent coordinated consumption in that at least one partner is consuming only because the other is consuming. In region V, it is also possible that neither consumes, but this is Pareto-dominated by both consuming. Region III defines cases in which partners coincidentally consume together. Regions IV, VII, and VIII correspond to neither consuming. Regions I and IX correspond to only one partner consuming.

total surplus of the agents (e.g., Berry 1992). This assumption is even more plausible in the social interaction game we have defined because the equilibrium that maximizes total surplus is also the equilibrium that maximizes individual surplus. Specifically, equilibrium 1 1 Pareto dominates equilibrium 0 0 because individuals in a group either prefer to play with their partner or are indifferent; i.e., v11i  v10i. Therefore, when we define our likelihood function below, we will define the Pareto-dominant equilibrium to occur when the s leave the group in a position of multiple equilibria.
The Pareto equilibrium selection rule will also assist us when defining counterfactuals. For example, an advertisement or price decrease could shift the vs into a region where multiple equilibria are much more likely. This could leave substantial ambiguity in terms of potential outcomes. However, by turning to the notion of Pareto dominance, we can narrow down the potential outcomes further by recognizing that the individuals would have little incentive to settle on an equilibrium that leaves both players worse off than if they had selected the other equilibrium.

3. Empirical Model and Identification
3.1. Data Likelihood Construction of the likelihood for empirical models of discrete games is very similar to that for typical

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

589

discrete choice models, but it differs in that rather than dividing the space into two mutually exclusive regions for a binary choice, the space of s across all group members is divided into mutually exclusive regions based on equilibrium conditions and selection rules. Specifically, we construct the likelihood of an observed choice by integrating over the s that (i) satisfy the equilibrium conditions for the observed choice and (ii) are not associated with another equilibrium that is favored by the selection rule.
For simplicity, we will define the likelihood for the two-player game here, but we extend it up to four players in the empirical application below and in Appendix 1 of the electronic companion to this paper, available as part of the online version that can be found at http://mktsci.pubs.informs.org. The likelihoods for the four possible outcomes, yA yB 
0 0 1 0 0 1 1 1 , can be expressed as function of inequalities as follows:

Pr 1 1 = Pr v11A + 1A > 0A Pr v11B + 1B > 0B

Pr 1 0 = Pr v10A + 1A > 0A Pr v11B + 1B < 0B

(3)

Pr 0 1 = Pr v11A + 1A < 0A Pr v10B + 1B > 0B

Pr 0 0 = 1-Pr 1 1 -Pr 1 0 -Pr 0 1

Notice that the primary difference between these probabilities and the equilibrium conditions defined above in Equation (2) is that the probability of outcome 0 0 involves integration over a smaller space because this outcome is Pareto-dominated in region V. The likelihood function for a given group, g, over the Tg periods that we observe is therefore

Lg yAg yBg

Tg

11

g=

Pr A B

t=1 A=0 B=0

g 1 yAgt = A

· 1 yBgt = B

(4)

If agents are homogeneous, there will only be two parameters to estimate in the simple model without covariates: v11 v10 . As depicted in Equation (3), there are three separate moments to identify these two variables. This implies that exogenous variables are not necessary to identify the model parameters. However, exogenous variables can easily be included in Equation (1) to provide less parametric identification, which we do in simulations below.
We now define the parameterization we use for the indirect utilities. We define the indirect utilities of purchasing in an additively linear form:

v1igt y-igt ig

= 0ig + 1ig 1

ij yjgt  1

j =i

+ ig 1ig 1

ij yjgt  2

j =i

+

2 ig

1ig 1

ij yjgt  3

j =i

+ + ig Xigt

(5)

where 0ig is the individual-specific taste for purchasing the firm's product, 1ig is the individual's preference for a partner also purchasing from the firm in the same time period, and 1{ } above represents an indicator of the expression inside. We allow the individual to obtain additional utility increases, 1ig, when more partners join in the purchase occasion. However, we scale these utility increases by the term , which is assumed to be positive. If it is less than one, then the marginal utility of additional partners is decreasing. Note that the representation above assumes that group members are substitutable so long as a partnership between them exists; i.e., ij = 1. Xigt is a vector of potentially individual-specific marketing mix or other variables that affect the individual's utility, and
ig measures the impact of these variables. The specification could be generalized, for example, by allowing 1ig to differ by partner (e.g., 1igj ), but we use this specification because it easily scales up and illustrates a minimal amount of data and parameters required to estimate such a model. Similarly, restricts the relation between different group structures, and this could also be relaxed when appropriate.

3.2. Heterogeneity Structure

In practice, consumers may differ in their utilities

both across and within groups. For example, a vast

literature notes the existence of homophily, the pro-

cess through which similar individuals systematically

group together. If a researcher incorrectly used a

homogeneous version of the model above, homophily

would imply a positive correlation in the s across

members within a group. With no other way to man-

ifest itself, this correlation would lead to a posi-

tive bias in v1igt yjgt = 1 y-i jgt ig

- v1igt yjgt = 0

y-i jgt ig

.

We account for homophily by allowing customers'

preferences to include unobserved heterogeneity that

is potentially correlated between the individuals.

We define the group-specific parameter vector g =

01g

0Ng ln 11g

ln 1Ng 1g

Ng , where

gN

. The preference for purchasing with

a partner, 1ig, is modeled to be log-normally dis-

tributed to impose the restriction that individuals in

a group prefer to have a partner also purchasing.8

is the population mean vector of the parameters

that includes the feature that all individuals within

8 Relaxation of this restriction could lead to a lack of an equilibrium that would unnecessarily complicate our analysis. See Bresnahan and Reiss (1991) for more on this.

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

590

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

the group have the same expectation of the param-

eters; i.e., = 0

01

1

. Note

that we define the mean of the underlying normally

distributed parameter for the partner effect to be 1. The covariance matrix for the parameters is most eas-

ily expressed decomposed into a matrix of standard

deviations and correlations = SRS, where

S = diag

0

0

1

1

and



R

R

=

R

0 01

R 01 R 1

R

R

0

1

1 0

0

= 

0
0 01
~01
~01
0
~0

1
~01
01
~0
0

1
0
01
~01
0

0
1 ~01
~01
01
~0
~0

~0

~0 0



R

R

0 1



R

01 ~01

~01

~01 01

01 ~01

~01

~01 01

11

1

11

1

1

1

11

1 ~1

~1

~1

1

1 ~1

~1

~1 1

0 ~0

~0 

~0
~0
1
~1
~1 1

0
~1
1
1

0
~0
1
~1
1

~0
0
~1
~1
1



1

(6)

where the symbol "" over the correlation coefficient means that it is a cross-partner­cross-parameter correlation, such as ~01, which is the relationship between A's intercept and B's partner effect, as opposed to
01, which describes the relationship between A's intercept and A's partner effect, or 0, which would describe the relationship between A's intercept and B's intercept. Although it is possible to estimate this entire matrix, we focus only on the upper left set of correlations, R , to capture the correlations between
0
individuals' inherent tastes for the good or service. This set of correlations is that most likely affected by homophily.
We estimate this model and heterogeneity structure using a hierarchical Bayesian model. It is useful to point out that a simulated maximum likelihood approach could also be used but would provide less direct inference of the individual-level parameters. The heterogeneity distribution above forms the priors over individual-level paramaters, which are drawn using a Metropolis­Hastings algorithm as a result of the extreme value errors. The population mean parameters are defined to have normal or log-normal

priors. The standard deviations of the populationlevel s are defined to be log-normal, whereas the variances of the s are inverse-Gamma. The distributions and steps of the MCMC process are more thoroughly laid out in Appendix 2 of the electronic companion.
3.3. Identification and Parameter Recovery in Model Simulations
3.3.1. Identification of a Homogeneous Model. We now return to identification. As noted at the end of §3.1, the homogeneous model with two players is identified based on the fact that there are two unknown parameters and three separate probabilities observed in Equation (3) to identify these parameters. A three-player version implies seven separate probabilities to identify the parameters, although only adding the parameter. As specified above, four or more players add additional observed probabilities but imply no additional parameters. Given these additional moments, one could clearly make the specification for three or more players even more complex. It is important to note that we have defined the likelihood assuming the s are independent. If there is plausible concern of correlation among the unobservables of the players, identification would absorb an additional moment. Furthermore, the exclusion restrictions would become very useful in identification. Without obvious exclusion restrictions, the researcher must either find other restrictions to facilitate identification or conduct robustness checks to verify that correlated unobservables are not a concern. In the estimation below, we test the robustness of the estimates to the inclusion and exclusion of an obvious correlated unobservable and find that the social interaction effect remains stable.
Table 1 reports Monte Carlo simulations and parameter recovery. In all models reported in the table, the likelihood for a group's decision is defined based on Equation (3) and Appendix 1 of the electronic companion. This equilibrium-based derivation of the likelihood accounts for the endogeneity of partners' decisions. We illustrate its value in resolving biases below.
The left panel of Table 1 reports Monte Carlo simulations and parameter recovery for the homogeneous model. We first only estimate the model with pairs and see that all parameters are recovered. Then we estimate the model with pairs, threesomes, and foursomes and recover parameters. Note that as described previously, all groups are nonoverlapping.
3.3.2. Identification of a Heterogeneous Model. Intuitively, the heterogeneity structure is identified based on the panel structure of the data in which we repeatedly observe each of the groups. Under

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

591

Table 1 Parameter Recovery in Monte Carlos

Homogeneous model

Heterogeneous model

2.5

97.5

Estimates percentile True values percentile

2.5

97.5

Median percentile True values percentile

Pairs only Intercept Partner effect X
Pairs and threesomes Intercept Partner effect X Additional partner

-3 03 0 52 0 29
-3 04 0 52 0 27
-1 04

Pairs, threesomes, and foursomes

Intecept

-3 03

Partner effect

0 51

X

0 28

Additional partner

-0 99

-3 09 0 48 0 25
-3 09 0 48 0 24
-1 23
-3 08 0 47 0 25
-1 11

-3 00 0 50 0 25
-3 00 0 50 0 25
-1 00
-3 00 0 50 0 25
-1 00

-2 97 0 56 0 33
-2 98 0 55 0 30
-0 88
-2 99 0 54 0 31
-0 89

Pairs only Intercept Partner effect X
Std. dev. intercept Std. dev. partner effect Std. dev. X Corr intercepts

-3 02 0 49 0 27
1 95 0 20 0 15 0 72

Pairs, threesomes, and foursomes

Intercept

-3 18

Partner effect

0 47

X

0 28

Additional partner

-1 07

Std. dev. intercept

1 70

Std. dev. partner effect 0 21

Std. dev. X

0 15

Std. dev. add partner

0 21

Corr intercept

0 75

-3 39 0 43 0 22 1 74 0 14 0 11 0 60
-3 39 0 41 0 24
-1 23
1 51 0 15 0 11 0 13 0 66

-3 00 0 50 0 25 2 00 0 20 0 10 0 67
-3 00 0 50 0 25
-1 00
2 00 0 20 0 10 0 10 0 67

-2 67 0 55 0 32 2 23 0 28 0 20 0 82
-2 95 0 52 0 32
-0 88
1 92 0 28 0 19 0 37 0 82

Notes. The partner effect and additional partner parameters are transformed in the likelihood by taking logs. The estimates here are the pretransformed values.

the Bayesian estimation approach, as we observe the group more times, the estimates of group-level parameters will shrink around the true group-level values within the population distribution of the parameters. Keep in mind that in referring to group-level parameters, there are potentially separate parameters for each individual within the group (e.g., A, B, C, etc.).
It is first useful to consider which parameters could be identified with a sufficiently long time series for the group. If there are no covariates and only two players, then based on Equation (3) we can identify three parameters. Let us call these the intercept for A, the intercept for B, and a partner effect that is assumed to be the same for both A and B. By observing a time series for multiple groups, we can also estimate a variance for each of these parameters in the population. We can also identify correlations between the parameters, but let us hold off on that for now. One useful thing to point out here is that three intercepts and three variances are actually too many parameters: the mean and variance of A's and B's parameters are the same because the definition as A or B is purely random. Essentially, we only need the mean and variance of both the intercept and partner effect parameters. The discussion above illustrates that we have that.
It is now useful to return to two interrelated points in the preceeding paragraph: (i) we ignored the discussion of the correlations between the parameters, and (ii) the partner effect was assumed identical for A and B. The correlation between the intercepts is

identified from the fact that we could get a group specific value for both A's and B's intercepts. If these both do not appear to be independent draws from the distribution defined by the mean and variance parameters of the intercept, then there is an identifiable correlation. When dealing with the partner effect, we assumed it was perfectly correlated (i.e., identical) within the group. This was because we cannot identify group-specific values for A's and B's partner effect. Following the discussion we just had for the intercepts, this implies that we cannot identify the correlation between the partner effects within a group. However, the correlation need not be assumed to be one. We could similarly assume the correlation is zero; in this case, the partner effect is allowed to differ within the group.9 To summarize, for the twoplayer case without covariates, we can identify both the mean and variance of the intercept and the partner effect and the correlation between A's and B's intercepts, but we do need to assume a correlation for
9 In some simulations, we found that assuming a zero correlation actually fits better than assuming it is one. This likely arises from the case of not observing one of the four potential outcomes for a group. Suppose 1 0 is never observed for a group. One way to explain this is for B to have an infinitely positive utility for playing with A. However, if the partner effects are assumed identical, then A must also have an infinitely positive utility for playing with B, but that would suggest we should not have observed 0 1 either. By allowing the partner effects to be different with a fixed correlation of zero, we accommodate some 0 1 observations occurring together with zero 1 0 observations.

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

592

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

A's and B's partner effects.10 Adding covariates to this specification would create additional moments and allow the full heterogeneity structure to be estimated. Ideally, these covariates would be individual specific to create exclusion restrictions. However, a single common dummy variable would double the number of moments to six such that two intercepts, two partner effects, and two coefficients on the dummy could be estimated so long as we did not add an additional parameter, such as allowing the dummy to have a different effect when playing with a partner.11
The top right panel of Table 1 simulates data for this heterogeneous model of pairs of individuals and recovers parameters. Notice that means and standard deviations on both parameters are recovered and that a correlation parameter for 0Ag and 0Bg is recovered. The bottom right portion of Table 1 illustrates parameter recovery of the full model with pairs, threesomes, and foursomes. Identification is straightforward in these cases because as described above, all parameters would be identified with a long enough time series at the group level, so cross-group comparisons allow a full covariance matrix of heterogeneity to be estimated.
3.3.3. Bias When Ignoring Endogeneity of a Partner's Choice. As stated above, an advantage of the equilibrium model is that it helps resolve an endogeneity bias resulting from the partner's decision not being exogenous. Although instruments (i.e., exclusion restrictions in this case) are always preferable, researchers might not have access to them, such that a parametric approach like the equilibrium model becomes the best alternative. To illustrate the value of the equilibrium model in resolving this bias, we reestimate the scenario in the top right corner of Table 1. Recall that the data for the pairs are generated with the equilibrium model and the heterogeneous individuals. We now estimate those data with the heterogeneity specification defined above but falsely assume that the partner's decision is exogenous. Table 2(a) reports these estimates. We see that by ignoring the endogeneity of a partner's decision, the social interaction (partner effect) is estimated to be between 1.17 and 1.23 when it is really only 0.5.
10 In terms of the heterogeneity distribution, we can identify 0 ~1 0 1 and 0. 01 = ~01 can also be identified based
on whether intercept and partner effect parameters that could be estimated at the group level have a systematic within group relationship.
11 Essentially, we can estimate the effect of X on 1 1 , 1 0 , and 0 1 separately for each value of X. Under the model structure, however, we only need to assume that the effect of X on 1 1 is derivable from the partner effect and the effect of X on 1 0 and 0 1 .

Table 2(a) Bias from Ignoring Endogeneity

Homogeneous model and estimation

Estimates

2.5 percentile

True values

97.5 percentile

Pairs only Intecept Partner effect X

-3 19 1 20 0 25

-3 24 1 17 0 20

-3 00 0 50 0 25

-3 12 1 23 0 30

Table 2(b) Bias from Ignoring Heterogeneity

Homogeneous model, homogeneous estimation

Estimates

2.5 percentile

True values

97.5 percentile

Pairs only Intercept Partner effect X

-2 26 0 60 0 15

-2 31 0 57 0 13

-3 50 0 50 0 25

-2 22 0 63 0 19

3.3.4. Bias When Ignoring Heterogeneity. One motivation for including unobserved heterogeneity in the model is the bias that is introduced when groups are endogenously formed to include similar types of individuals. To illustrate this bias and the role of the heterogeneity distribution in removing it, we compare the estimates of the heterogeneous model in Table 1 with estimates of a homogeneous model applied to the simulated heterogeneous data. We report this in Table 2(b). Whereas in the right side of Table 1 we illustrated that we were able to recover the social interaction effect (i.e., partner effect) in both sets of estimates with heterogeneity, we are unable to recover this effect when ignoring heterogeneity in Table 2(b). We see that the partner effect is estimated to be greater than 0.57 instead of being equal to 0.5. This positive bias in the estimation of the social interaction effect results from the fact that the underlying correlation in the heterogeneous tastes is positive (i.e., homophily). Specifically, the heterogeneity in the model captures the time-invariant unobserved tastes that are similar within groups. Without the heterogeneity, the model can only capture this by inferring the social interaction to be larger than it really is.
3.4. Comparison with Other Approaches to Identifying Social Interactions
Here, we briefly describe some related models that can put the contribution of our model and the identification approach into context. For more thorough coverage of the estimation and identification of social interactions, see Hartmann et al. (2008). Most of the existing literature studying social interactions has estimated linear models with a continuous outcome variable and a continuous measure aggregating the decisions of others as the social interaction variable

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

593

of interest. Identification concerns in these models are discussed at length in Manski (1993) and Moffit (2001). Nair et al. (2010) provide a thorough consideration of each of these issues in a marketing application, analyzing how opinion-leading physicians influence the prescription behavior of other physicians. Yang et al. (2006) also use a linear model to estimate the interrelatedness of spouses' television viewing behavior.
The equilibrium approach we use falls within the scope of empirical models of discrete games as defined by Bresnahan and Reiss (1991). Most applications of this approach have been in the context of entry games in which the actions of one agent decrease the probability the other agent will take the same action. One primary contribution of our model relative to this literature is that we have included extensive unobserved customer heterogeneity that is allowed to be correlated among the agents. The necessity of this in our model arises from the fact that unobserved correlations in agents' payoffs will bias the interaction effect upward, potentially leading to an estimated effect when one does not exist. Moffitt (2001) notes the importance of this consideration as resulting from a problem of endogenous group formation. The same problem typically does not exist in entry games because the players in the game are generally assumed to be all potential entrants (i.e., there is one single group observed repeatedly across all markets or times, or both). Furthermore, if the problem did exist in entry games, it would bias the interaction effect to be positive and thus only understate the degree of competition between firms rather than falsely identify competitive effects that do not exist. There are a few models of equilibrium firm behavior that are more closely related to the present paper. Both Ellickson and Misra (2008) and Vitorino (2010) explicitly allow for complementarities between the decisions of firms. Models of direct and indirect network effects are also related in that they allow for complementarities (e.g., Ackerberg and Gowrisankaran 2006, Tucker 2008, Ryan and Tucker 2008, Dubé et al. 2010).
Specific to social interactions, Brock and Durlauf (2006, 2001) consider structural estimation of discrete choice models of interactions between large numbers of agents. These are models of incomplete information in which individuals are uncertain about the decision that others will make. Therefore, the individual's choice is affected by his or her belief about others. Brock and Durlauf (2006, p. 179) specifically acknowledge that this assumption is "clearly problematic in describing interactions between a pair of best friends," where it is likely that they know each other's preferences, unobservables, and decisions. Incomplete information models such as these involve a number of empirical challenges. The specification of expectations

in the model has typically involved a fixed-point solution that settles on all agents' expectations aligning with one of multiple potential equilibria. Although recent empirical developments can more easily consider all potential equilibria (e.g., Su and Judd 2008), the models still have little to say about how all agents manage to coordinate their expectations on only one of the possible equilibria.
One additional limitation of incomplete information models of social interactions is that they typically involve a two-step estimation approach that creates difficulties in the presence of unobserved heterogeneity. This implies that the bias described above arising from endogenous group formation could be present and could identify a social interaction when one did not actually exist. Recent work, however, has been directed at resolving this specific problem. Nevertheless, the choice between complete and incomplete information should primarily depend on the application and feasibility of the modeling.
One relevant paper considering discrete games of complete information is Bajari et al. (2010). Its focus is on developing an alternative approach for dealing with multiple equilibria. Specifically, the authors show that an equilibrium selection equation can be identified when there is a variable that affects the equilibrium selected but not the payoffs of the agents. Their empirical application is an entry game, but they consider that the model could be extended to social interactions. However, like other papers in the literature, they also do not allow for persistent unobserved heterogeneity. Finally, Soetevent and Kooreman (2007) estimate a discrete choice model of social interactions applied to a high school teen behavior such as smoking. Their equilibrium model closely resembles our model, although they do not recognize that these models follow directly from the pioneering work of Bresnahan and Reiss (1991). Their contribution is therefore in defining a simulation-based estimator that can be applied to large groups; however, we have solved our model analytically for up to a group size of four, which is most relevant for our empirical application. They also do not allow for unobserved heterogeneity.
One final problem that potentially arises in social interaction models is correlated unobservables. Our treatment of endogenous group formation above controls for time-invariant unobservables that are correlated within the group. However, it is possible that if time-varying unobservables are correlated, one might infer a social interaction when one does not exist. For example, Van den Bulte and Lillien (2001) find that previously unobserved marketing efforts explain what previous researchers had inferred to be contagion in the diffusion of the drug tetracycline.

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

594

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

We deal with correlated unobservables through the richness of our scanner panel data rather than through a modeling feature. The idea is that we observe the exact time and dates of purchases, so unobservables would have to be correlated at the minute level to falsely infer a social interaction between group members. This might still be a problem in some applications where there is a potentially large peak of demand at any given minute in time. Consider the rush of students at a lunch line at 11:45 a.m. This certainly does not reflect that they all want to eat together but rather that their classes end at 11:30 a.m. Our application of golf described below avoids this problem because no more than four people can purchase at any given time, so if two members of a group are observed purchasing at the same time, it is pretty safe to assume they actually wanted to purchase together.
Although this approach for dealing with correlated unobservables avoids inference of an interaction that does not really exist, we have not fully accounted for correlated unobservables because we do not have an exclusion restriction. We therefore check the robustness of the results below by including an obvious correlated unobservable, such as weather in outdoor activities.
4. Empirical Application
To validate our model, explore how model parameters are derived from data, and evaluate the marketing implications of social interactions, we apply our model to a sample of groups of golfers.12 Golf is certainly an activity where individuals obtain more utility when playing with a friend or colleague rather than alone or with an unknown partner. Our data consist of individuals whose purchase decisions at a southern California golf course were revealed by swiping a membership card that recorded their identity and exact time of purchase. We also observe weekly variation in whether an ad was run in a local newspaper and what price was reported in that ad.13
12 The empirical example of golf has also been analyzed in a dynamic decision context by Hartmann (2006). Including forwardlooking behavior in the present model is intractable. We therefore ignore the dynamic aspects of the data to explore identification of the model presented in this paper.
13 We do not know the determinants or reasoning behind these marketing mix variables, so it is possible that they may have advertised when demand at the course was anticipated to be systematically low. We do not, however, have instruments to account for this, so it is possible that the effectiveness of these marketing mix variables will be biased downward. That said, the focus of this paper is to illustrate the social interaction effects of our model rather than to solve an endogeneity bias that might have arisen in the marketing mix decisions of the course. When our model is applied by managers, they are likely to be more familiar with potential instruments that affect their actual pricing or can use experimentation to create the necessary exogenous variation in marketing mix variables.

We will include these variables to evaluate the role of social interactions in the effectiveness of marketing mix activities. Although the decision process of individuals to golf is certainly longer and more complex than a one-shot complete information simultaneousmove game, both complete information and simultaneity do play a role. For example, golfers typically know ahead of time if something arises that causes a partner to cancel; i.e., they are not making decisions based on expected decisions of their friends but on complete information. Similarly, a sequential move specification would be less desirable because golfers typically do not suffer from being unable to change their decisions, a consequence common to both ordered move games and incomplete information games. The simultaneous-move game is therefore best viewed in this context with respect to the final decision to show up at the course.
4.1. Groups As stated above, our model and estimation approach are designed for groups that are known ex ante.14 Our treatment of groups is through the matrix of binary indicators of whether a dyadic relationship exists. In practice, the golf course could form this matrix based on which individuals booked their reservation together, and a social networking website could base this on friend lists. We do not have the reservation log at the course, so from our perspective, is considered an unobserved matrix of states. Because our estimation will not integrate over all possible values of that matrix, (the dimension is too large), we assume that we know the matrix. To define the matrix, we therefore use a set of values that are the most likely posterior values of that state matrix that could be inferred from the precise purchase timings in the data.
The exact process by which we uncover groups in the data is as follows. If two individuals are partners and if they arrive on the same day, they will purchase at almost the same time. In fact, this golf course, like most others, calls upon groups to check in together when the group is two or three groups behind the group on the tee. From this, we can infer the values
as follows. If two individuals are observed to play on the same day but purchase more than an hour apart, these individuals clearly are not close golfing partners, so we assume their elements in equal zero. On the other hand, if we see them purchase at exactly the same time or within minutes, they may be partners. However, before setting their elements
14 The identification of groups and the process through which groups are formed are interesting research questions with substantial technological challenges that are currently being explored by others (e.g., Narayan 2007). Once the technological ability to identify group formation processes has evolved further, we expect researchers will merge our modeling with this literature.

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

595

of to one, we recognize that they could have been randomly paired together at the course. We therefore require that the individuals are observed to purchase within minutes of each other on at least two occasions before we declare them partners. This is an admittedly imperfect approach, but it serves as a group structure within which we can explore the model defined above.
Of the 3,151 individuals we observe golfing at the course, this grouping process yielded 199 mutually exclusive groups15 ranging in size from two to six. Only six of these groups were larger than the maximum capacity (four) that the course could accommodate at a time, so we decided to drop these groups and ignore the issue that capacity constraints could create a crowding phenomenon. Although this is an interesting dynamic, it is just not prevalent enough in our data to explore in more detail.16 We were therefore left with 193 groups consisting of 152 pairs, 34 threesomes, and 7 foursomes. The number of foursomes may appear small given that a typical time slot has a capacity of four. This is because pairs of golfers are often randomly joined at the course to fill the course's time slot capacity, and there may be some group members that do not have a card that allows us to observe their behavior.
Summary statistics of the purchase patterns within groups are included in Table 3. We see that within the 152 observed pairs, the individuals purchased together an average of 10 times, with a minimum of 2 and a maximum of 114. We observed only one of the golfers playing an average of 16.7 times, with the minimum of 0 indicating that at least one pair played together but never played separately. Within threesomes, all individuals played together an average of 3 times, with a minimum of 0 and a maximum of 17. The minimum of zero suggests that there is at least one threesome in which a given individual purchased with either one of two partners but never with both. Across the seven foursomes we observe, they all played together an average of 1.85 times, with a minimum of 0 and maximum of 4. Similarly, at least one of the foursomes likely involves an individual that plays with different group members, but not all at once. The data consist of daily observations between January 4, 2000, and December 31, 2001. Although we observe some groups over the entire time period, one group is observed only for 83 days. This is due to the time the firm began recording purchases through the individuals' swipe cards.
15 The implication is that an individual can only be a member of a single group. Such groups could be of very large size; however, the maximum capacity of four at a course probably prevents that occurrence.
16 In fact, the maximum capacity may be most relevant to the process through which golfers form groups.

Table 3 Summary Statistics of Purchase Data

No. that

purchased

N

Number of times observed by group

Mean

Std. dev.

Min

Max

Individuals in a pair purchasing

0

152

319 4

148 2

64

681

1

152

16 7

24 0

0

140

2

152

10 5

12 7

2

114

Individuals in a threesome purchasing

0

34

299 9

121 1

59

589

1

34

22 1

41 4

0

232

2

34

12 1

10 7

2

54

3

34

30

34

0

17

Individuals in a foursome purchasing

0

7

298 7

98 6

165

454

1

7

34 9

47 0

0

132

2

7

89

47

1

14

3

7

31

30

0

9

4

7

19

17

0

4

Table 3 also provides some model-free evidence that a social interaction might exist. Specifically, the average number of purchases per individual was 27 (16 7 + 10 5) out of roughly 347 opportunities (i.e., 7.8% of the time). If the individuals' purchase decisions were independent, that would imply they would play on the same day about 2.1 times (0.6% of the time), yet we see that they purchased together more than 10 times on average. This suggests that the joint probability of purchase is certainly more than the product of independent probabilities of purchase.
The price and advertising data, as well as rain data, over this time are summarized in Table 4. We see that there was an ad in the paper for 34% of the 728 days observed. The advertisements were published on Tuesdays and typically included a price discount, which we have incorporated into the price variable. We maintain the advertisement indicator at one throughout the entire week because individuals may make arrangements on Tuesday to play on any one of the days that the advertised price covers. The price varies from $35 to $75, with a mean of just under $60. The variation in the price is due to the advertised price and weekend versus weekday pricing. Because that much of the variation in the price is coming through a newspaper ad that some golfers may not see, we will expect measures of sensitivity to this price to be relatively low, reflecting awareness

Table 4 Summary Statistics of Price, Advertising, and Weather

N

Mean Std. dev. Min Max

Weekly ad in paper 728

Price

728

Rain

728

0 34 59 08
0 04

0 46 11 54
0 17

0

1

35 75

0

2 13

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

596

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

of the ad as well as price sensitivity. We also see that there was an average of 0.04 inch of precipitation during the sample.
5. Model Estimates and Implications
To estimate the model we use a hierarchical Bayesian MCMC approach. This has two primary benefits. First, we can include unobserved heterogeneity that is allowed to be correlated between the individuals within a group. Second, we can infer individual-level parameters so that we can evaluate targeted marketing strategies.
5.1. Estimates Table 5 reports estimates for three different specifications of the model. Specification I restricts heterogeneity to the intercept and partner effect. The primary reason for restricting heterogeneity in this case is that this model best illustrates the targeting implications of the social interaction (see §5.3). We see that the intercept is on average -3 64 across golfers. This reflects the fact that golfers play infrequently (i.e., because the utility of the outside option is normalized to zero). There is significant heterogeneity in purchase frequency, reflected by the standard deviation of 0.90. The median increase in the utility of purchasing that a golfer obtains when a partner joins him is 1.92 (i.e., exp(0.65)). There is also substantial heterogeneity in this parameter, suggesting that some golfers obtain significantly higher and lower benefits of a partner joining them on the course. The last

parameter reported describes how this social interaction utility changes when additional partners join in the round. We see that this is significantly less than 1, with a value of 0.67 (i.e., exp( - 0 40)), suggesting that the utility of additional partners joining at the course is diminishing. The weekend parameter measures the additional utility golfers obtain when purchasing on the weekend. We see that the price coefficient is significantly negative (this also holds past the 99th percentile of the distribution). The advertisement has a median effect of 0.02 but is not significant. This is likely due to the difficulty of separately identifying an advertisement and price effect when the price changes are advertised prices. When price is excluded from the analysis, the advertisement coefficient is significantly positive. Finally, we see that there is a positive correlation in the intercepts within groups of 0.45.
Specification II adds heterogeneity on the other covariates. Estimates change slightly, though the pattern resembles those in specification I. We see that there is significant heterogeneity for each of the parameters and the correlation between intercepts remains significantly positive, indicating homophily. Specification III adds the variable rain to the analysis. Rain clearly affects individuals' ability to play golf but serves a broader role here in evaluating the role of correlated unobservables in the parameter estimates. Rain is certainly a correlated unobservable, but as we see from the specification, this does not seem to bias the partner effect estimates. It does increase the intercept, but this is because rain explains more of the occasions in which players do not golf.

Table 5 Model Estimates

I

II

III

Percentile of distribution

2.5

50

97.5

2.5

50

97.5

2.5

50

97.5

Posterior of parameter means Intercept Social interactiona Advertisement in paper Pricea Weekend Rain Fraction of interaction for additional partnera
Posterior parameter standard deviations Intercept Social interactiona Advertisement in paper Pricea Weekend Rain Fraction of interaction for additional partnera
Correlations between parameters Intercepts within group

-3 82 0 61
-0 03 -0 01
0 33 -0 54
0 83 0 70
0 28

-3 64 0 65 0 02
-0 01 0 41
-0 40 0 90 0 78
0 45

-3 43 0 70 0 07
-0 01 0 47
-0 25 1 00 0 87
0 58

-3 94 0 65
-0 06 -4 77
0 01
-0 87
0 93 0 50 0 11 0 13 1 49
0 17
0 23

-3 78 0 73 0 00
-4 62 0 18
-0 65
1 04 0 57 0 18 0 46 1 64
0 38
0 43

-3 58 0 79 0 06
-4 47 0 36
-0 42
1 14 0 67 0 27 0 72 1 80
0 87
0 62

-3 78 0 64
-0 08 -4 66
0 07 -0 86 -0 74
0 91 0 51 0 14 0 52 1 51 0 12 0 21
0 35

-3 63 0 72
-0 02 -4 49
0 25 -0 63 -0 56
1 01 0 61 0 21 0 62 1 66 0 21 0 37
0 57

-3 44 0 79 0 05
-4 37 0 42
-0 47 -0 33
1 13 0 72 0 27 0 73 1 80 0 35 0 75
0 75

aThese parameters represent the mean and standard deviation for the underlying normal distribution of these log-normally distributed parameters. In the case of the price coefficient, the first model does not transform the price coefficient, so that its sign could be verified before assuming the sign for the heterogeneous specification, which is log-normally distributed.

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

597

Figure 2 100 90 80 70 60 50 40 30 20 10 0 0

One-Year Customer Value (in Dollars)

2,000

4,000

6,000

8,000

10,000

12,000

5.2. Estimates of Customer Value To quantify the importance of the social interaction effects, we measure the value of a customer to the firm over a one-year horizon, then divide the fraction of these values between demand from the customer himself and demand from the customer's partners. The value is based on the profit17 stream from the customer over a year, plus the additional profit from the customer's partners that is attributable to the customer being in the group. Specifically, the latter component is calculated as the difference between the profit from the customer's group members when the individual is in the group and the profit from the customer's group members when the customer is not in the group. Figure 2 is a histogram of the customer value for the 434 golfers observed in the data.
Figure 3 is a histogram of the fraction of a customer's value that is composed of demand from others in the customer's group. We see substantial heterogeneity in this measure, ranging up to 0.68 with a median of 0.35. An important implication of these customer values is that the sum of all these values is likely to be greater than the value of the group. This implies that it may be almost as costly to lose one or two members of a group as it is to lose the entire group.
5.3. Targeted Advertised Prices In this section, we consider strategies in which the firm targets price advertisements to either consumer groups or individuals within groups. For simplicity and ease of exposition, we focus on pricing only to customer pairs. We also use the estimates from specification I in Table 5 so that we can explore targeting

17 Profit in this case is treated as revenue because the marginal cost of a round of golf is practically zero. Although this changes if the capacity constraint binds, we cannot calculate the course's opportunity cost of the round.

Figure 3 60

Fraction of Customer Value from Others in Group

50

40

30

20

10

0

0

0.1

0.2

0.3

0.4

0.5

0.6

0.7

implications arising primarily from the social interactions as opposed to different sensitivities to the marketing mix. Before considering the profitability of targeting, we must first examine the profitability at the current pricing and the profitability at what would be an optimal uniform (e.g., blanket) advertised price.18 We find that an optimal uniform advertised price to the pairs of customers in our data would be $95.65. Note that this price is about $20 greater than the current weekend price to residents of $75, but it may be reasonable for two reasons. First, the price at the course for customers that are not residents is $98. Our analysis may therefore suggest that offering a discount to local customers may not make sense. Second, the predicted price of $95.65 may reflect the fact that the sample of golfers we observe is composed of more frequent golfers who are less price elastic, such that if the firm began discriminating in prices, these would be the customers it should charge its highest prices to. We find that this uniform price increase would increase profitability relative to the current $75 price by about 2.9%.
5.3.1. Targeting Groups of Customers. We now compare the profitability of targeting price at the group level to profitability under the uniform price of $95.65. The average targeted price would be $91, with a standard deviation of 9.55. The price to the group is generally increasing in the average of the golfers' intercepts but may also be high for groups with small average intercepts but large complementarities. These prices targeted at the group level increase profitability relative to the uniform price by 1% (the profit increase relative to the current price would be 3.9%). The primary reason for the small profit increase comes from

18 The optimal price is calculated as the price that maximizes the revenue from the group. This includes the assumption that the capacity constraint is not binding; i.e., marginal cost = 0.

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

598

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

the average price declining. Increases in profitability therefore typically depend on demand increases, which turn out to be barely sufficient to offset the lost revenue from charging a lower price to the group. There are, however, 21% of the groups that experience a price increase as a result of the targeting. Profit increases to these groups are as high as 9% and involve nearly a 48% increase in price.
5.3.2. Targeting Individuals Within Groups. Although targeting prices at the group level increases profitability, there may be additional gains from targeting advertised prices within the group. When we target within the group, we find that average price is about $100, with a standard deviation of 84. The large standard deviation arises because a large social interaction in the group can give the course an incentive to drastically lower the price to one customer while exploiting the inelastic demand of his partner. In Figure 4(a), we depict the relationship between the

Figure 4(a) 120

Minimum Within-Group Price

Lowest price charged to a member of the group

100

80

60

40

20

0

­1.0 ­ 0.5

0

0.5

1.0

1.5

2.0

2.5

Maximum social interaction effect in the group

Figure 4(b) 500

Maximum Within-Group Price

Greatest price charged to a member of the group

450

400

350

300

250

200

150

100

50

­1.0 ­0.5

0

0.5

1.0

1.5

2.0

2.5

Maximum social interaction effect in the group

maximum social interaction effect (on the horizontal axis) and the lowest price charged to a member of the group (on the vertical axis). We see that when the social interaction effect is large, the price to one of the group members goes down to zero. In Figure 4(b), we change the vertical axis to depict the highest price charged to a member of the group. Here, we see that at really large social interaction effects, the firm would ideally like to charge more than $400 to exploit the inelasticity generated by offering a customer's partner a free round. This within-group discriminatory pricing predicts profitability that is 20% greater than the blanket offering and 19% greater than only targeting at the group level.
Although this seems like an attractive possibility, we must balance it against the model's inability to incorporate the idea that the high-paying customer might reasonably feel cheated. Customer backlash is obviously a concern with any targeted pricing policy, but the concern should be even greater within social groups where individuals are likely to be aware of the preferential treatment their friends are receiving. A better alternative likely involves offering a twofor-one coupon that allows the individuals to split the price accordingly. In fact, a course located about 20 miles north of this course regularly offers such a coupon in the same newspaper. Although exploring the within-group bargaining that is involved in such an offer is beyond the scope of this paper, we can infer from the analysis above that if one customer is willing to incur a larger price than his partner, a package price predicts an average optimal price per customer that is about $9 greater than if the firm were forced to charge both customers the same price. One other strategy to mitigate the backlash would be to target groups with strong complementarities by randomizing or alternating which customer receives the zero price. If the firm used this alternating zero price strategy for the 28 pairs for which it is more profitable than group-level targeting, while retaining group-level targeting for the other 124 pairs, it would increase its profit by 7% relative to pure group-level targeting.19 It should be noted that the effectiveness of this strategy relies on customers ignoring intertemporal budget constraints. Finally, the firm might offer a discounted annual membership to an individual that is in a group with people with strong social interaction effects because that would lower that customer's marginal price of attending to zero, thereby decreasing the elasticity of the customer's partners throughout the year.
19 Although one concern of the alternating zero price strategy is that the price to the paying customer might still be quite large, we find that for 12 of these 28 groups, the price to the paying customer would be less than twice the group-level targeted price.

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

599

Another alternative to the highly discriminatory prices within groups would be to focus targeting on non-price items that lead to less backlash. For instance, if we had estimated a significant advertising effect and knew the costs of advertising to a given individual, we could consider strategies that just increased the e-mail or mail advertisements disproportionately to one of the customers without offering an explicit price decrease.
5.3.3. Targeting When Ignoring Groups. To evaluate the importance of considering social interactions when targeting, we now evaluate targeting these customers if the firm had obtained individuallevel parameter estimates from a model that ignored the inherent relationships between its customers. Population-level estimates of a model without social interaction are reported in Table 6. Most coefficients are of similar magnitudes to those reported in Table 5 except for the intercept, which is larger because it is picking up preferences for purchasing both alone and with partners.
Before estimating the profitability of targeting based on this model, it is important to point out that this model will by nature target within groups of customers. Therefore, it is subject to all of the same potential backlashes as the targeting within groups considered above. This fact alone may indeed be enough to avoid targeting whenever we expect customers to purchase in groups unless we know the exact group structure. First, we compare the profitability of this approach with the existing price of $75. It predicts an average price of $96.41. We then use this price and the parameter estimates of the full social interactions model to find that this approach improves profitability, relative to the current price, by 3.9%. It therefore appears almost as profitable as pure group-level targeting, except that the price differences within groups implied by this strategy could lead to a backlash. Next, we compare this targeting based on a model without social interactions to the targeting within groups based on our model with social interactions. We find that it is 16% less profitable. We therefore conclude that if a firm targets, it should consider group structure to avoid this loss in profitability.

Table 6 Estimates of Model Without Social Interaction

Percentiles of distribution

Median

2.5

97.5

Intercept Std. dev. of intercept Weekend Price Advertisement in paper

-2 68 0 84 0 49
-0 01 0 02

-2 91 0 78 0 42
-0 01 -0 03

-2 56 0 90 0 56
-0 01 0 08

5.4. Potential Future Applications and Model Extensions
Section 1 mentions a few other potential applications of this modeling, and we elaborate on these in more detail here. Visits to movie theaters would be a great application, and some theaters, through their introduction of loyalty programs, now have data that are quite similar to those analyzed here. Restaurants would be an ideal application, but it may be difficult to acquire the individual-level data to estimate the previously defined model. However, the substantive implication that a restaurant might want to offer two-for-ones or other marketing programs that lower the marginal price to one individual to attract others does carry over. Another obvious application would be online gaming. For example, Xbox LIVE has histories of its customers similar to those observed here. Furthermore, gamers are observed to both systematically play against common friends or foes while also playing against opponents that are practically selected at random (at least within a skill class). Finally, the growth of social networking websites provides a rich area for future applications of this type of modeling. Although work until now has focused on understanding group structure (i.e., , relevance to marketers requires analysis of actual behavior that can generate revenue. The model here is designed for purchase data, but other choice data that generate advertising revenue (such as the desire to view the same sites or YouTube videos as friends) could also be accommodated through extensions of this model.
From a modeling perspective, extensions could involve more complex choices, dynamics, or the integration of group formation. The movie theater situation would be one that would be assisted by moving from modeling the choice of whether to see a movie to which movie to see. Dynamics could also be relevant if past choices affect current decisions. Although this is clearly a valuable extension, forward-looking dynamic equilibrium models are currently unable to accommodate the extent of unobserved customer heterogeneity that is likely to arise in customer purchase databases.
Other modeling extensions may further explore asymmetries in the complementarities within groups. For example, does leader or follower behavior arise, and what are its implications? Also, future research could explore within-group bargaining that may arise if a price is offered at the group level yet participants differ in their purchase intentions (e.g., Fehr and Schmidt 1999). Along these lines, is fairness of different prices within groups really a concern? If so, what steps can be taken to mitigate it?
Another potential extension could involve the incorporation of attribute-level influence as in Arora

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

600

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

and Allenby (1999). In their paper, individuals exogenously make a joint decision or an individual decision, and the importance weight of the attributes are affected by whether the decision is joint. In the model specified in this current paper, whether or not both parties coordinate on a single decision is an endogenous outcome, but the effects of attributes such as price or advertising are assumed to remain unchanged. Relaxing this latter assumption by interacting y-i with attributes could, in the case of movies mentioned above, accommodate the fact that tastes for some movie characteristics such as romance are more desirable by both parties when consuming as a group. These interactions would certainly affect identification and, depending on the dimension of the attribute space, could make analytical solution of the equilibrium and likelihood very complicated.
Finally, an important step in the development of this literature will involve the combination of demand modeling for the group and group formation processes. One example where this would be particularly useful is the calculation of customer lifetime values. In the present case, we only calculate values over a year because it is quite possible that group structure could change after a year. A model of group formation could allow the firm to understand how likely it is that a lost customer will be replaced within his group.
Although this is a valuable extension, it has two related limitations. First, up-to-date group structures are rarely observed. Even in the case of social networking sites that observe links between individuals, it is unlikely that these are regularly updated if the relationship between two individuals dissolves. Furthermore, many of the links observed in the data may have existed well before the website observes them ratifying their relationship online (e.g., two high school friends may have formed a link recently in the database despite a relationship that has existed for many years). Second, because true group structure is likely to be unobserved, researchers may need to integrate over potential relationships, but as we saw with in the present model, this is a very high-dimensional integration that is currently too computationally intensive.
6. Conclusion
This paper has sought to accomplish three primary goals. First, it develops a model that can be used to measure demand and social interactions within groups of customers. Second, it estimates the model using a Bayesian approach that allows us to uncover substantial heterogeneity and to obtain individuallevel parameter estimates that could be used for counterfactuals. Finally, this paper computes customer

values and is able to account for how much of that value derives from the people the focal customer influences, either directly or indirectly, in the group. These social interactions were also shown to magnify the effect of targeted marketing activity, such as a price decrease, by increasing the demand of a customer's fellow group members. Group-level targeted pricing policies increase profitability, and within-group targeting can provide an additional 19% increase in profitability. For groups with strong social interactions, we find that it may be profitable to set one customer's price to zero while raising the price to his peers whose demand will be very inelastic as a result of their desire to purchase with him. Although generally impractical, a real-world example of this might be a free tuxedo offer to a groom, whose groomsmen's price elasticity will be very low. In most practical examples, such pricing will, however, create a backlash. We therefore suggest a variety of mechanisms, such as two-for-one coupons or free offers, that alternates through the group members. The latter policy can increase profitability relative to grouplevel targeting without treating one member less favorably.
The golf application in this paper is just one of many examples where firms face demand from groups of customers that coordinate their decisions. Similar issues arise in industries such as restaurants, online gaming, and movies. In fact, Weinberg (2005) notes the importance of understanding joint decisions for analyzing movie demand. He suggests analyses that could be enabled by extending our model to a context in which the group selects between a set of available movies. An important additional component of the model, he notes, would be whether any of the group members had previously seen the movie. This feature is absent from golf because customers are willing to repeatedly play the same course. However, the recent introduction of customer loyalty programs in movie theaters may soon generate the individuallevel data needed to analyze this model extension and answer some of Weinberg's interesting questions about social coordination in movie choice.
7. Electronic Companion
An electronic companion to this paper is available as part of the online version that can be found at http:// mktsci.pubs.informs.org/.
Acknowledgments Thanks to Greg Allenby, Lanier Benkard, Günter Hitsch, Sanjog Misra, Harikesh Nair, Sridhar Narayanan, and Christophe Van den Bulte, as well as seminar participants at The Ohio State University and The Wharton School for their useful comments. The author would also like to thank Taylan Yildiz for research assistance on an early variant of

Hartmann: Demand Estimation with Social Interactions and the Implications for Targeted Marketing

Marketing Science 29(4), pp. 585­601, © 2010 INFORMS

601

this paper titled "A Structural Analysis of Joint DecisionMaking." The usual disclaimer applies.
References
Ackerberg, D. A., G. Gowrisankaran. 2006. Quantifying equilibrium network externalities in the ACH banking industry. RAND J. Econom. 37(3) 738­761.
Arora, N., G. M. Allenby. 1999. Measuring the influence of individual preference structures in group decision making. J. Marketing Res. 36(4) 476­487.
Bajari, P., H. Hong, S. Ryan. 2010. Identification and estimation of a discrete game with complete information. Econometrica. Forthcoming.
Berry, S. T. 1992. Estimation of a model of entry in the airline industry. Econometrica 60(4) 889­917.
Bresnahan, T. F., P. C. Reiss. 1991. Empirical models of discrete games. J. Econometrics 48(1­2) 57­81.
Brock, W. A., S. N. Durlauf. 2001. Discrete choice with social interactions. Rev. Econom. Stud. 68(2) 235­260.
Brock, W. A., S. N. Durlauf. 2006. Multinomial choice with social interactions. L. E. Blume, S. N. Durlauf, eds. Economy as an Evolving Complex System, III: Current Perspectives and Future Directions. Oxford University Press, New York, 175­206.
Dubé, J.-P., G. J. Hitsch, P. K. Chintagunta. 2010. Tipping and concentration in markets with indirect network effects. Marketing Sci. 29(2) 216­249.
Ellickson, P. B., S. Misra. 2008. Supermarket pricing strategies. Marketing Sci. 27(5) 811­828.
Fehr, E., K. M. Schmidt. 1999. A theory of fairness, competition, and cooperation. Quart. J. Econom. 114(3) 817­868.
Fudenberg, D., J. Tirole. 1991. Game Theory. MIT Press, Cambridge, MA.
Godes, D., D. Mayzliln, Y. Chen, S. Das, C. Dellarocas, B. Pfeiffer, B. Libai, S. Sen, M. Shi, P. Verlegh. 2005. The firm's management of social interactions. Marketing Lett. 16(3­4) 415­428.
Hartmann, W. R. 2006. Intertemporal effects of consumption and their implications for demand elasticity estimates. Quant. Marketing Econom. 4(4) 325­349.
Hartmann, W. R., P. Manchanda, H. Nair, M. Bothner, P. Dodds, D. Godes, K. Hosanagar, C. Tucker. 2008. Modeling social interactions: Identification, empirical methods, and policy implications. Marketing Lett. 19(3­4) 287­304.
Kumar, V., J. A. Petersen, R. P. Leone. 2007. How valuable is word of mouth. Harvard Bus. Rev. 85(10) 139­146.

Manski, C. F. 1993. Identification of endogenous social effects: The reflection problem. Rev. Econom. Stud. 60(3) 531­542.
Moffitt, R. A. 2001. Policy interventions, low-level equilibria, and social interactions. S. N. Durlauf, H. P. Young, eds. Social Dynamics. Brookings Institution Press, Washington, DC, 45­82.
Nair, H. S., P. Manchanda, T. Bhatia. 2010. Asymmetric social interactions in physician prescription behavior: The role of opinion leaders. J. Marketing Res. Forthcoming.
Narayan, V. 2007. Modeling the formation of dyadic relationships between consumers in online communities. Proc. 18th Advanced Res. Techniques Forum, Santa Fe, NM.
Rossi, P. E, R. E. McCulloch, G. M. Allenby. 1996. The value of purchase history data in target marketing. Marketing Sci. 15(4) 321­340.
Ryan, S., C. Tucker. 2008. Heterogeneity and the dynamics of technology adoption. Working paper, MIT, Cambridge, MA.
Soetevent, A. R., P. Kooreman. 2007. A discrete-choice model with social interactions: With an application to high school teen behavior. J. Appl. Econometrics 22(3) 599­624.
Su, C.-L., K. L. Judd. 2008. Constrained optimization approaches to estimation of structural models. Working paper, http:// papers.ssrn.com/sol3/papers.cfm?abstract_id=1085394.
Tucker, C. 2008. Identifying formal and informal influence in technology adoption with network externalities. Management Sci. 55(12) 2024­2039.
Van den Bulte, C., G. L. Lilien. 2001. Medical Innovation revisited: Social contagion versus marketing effort. Amer. J. Sociol. 106(5) 1409­1435.
Van den Bulte, C., S. Stremersch. 2004. Social contagion and income heterogeneity in new product diffusion: A meta-analytic test. Marketing Sci. 23(4) 530­544.
Vitorino, M. A. 2010. Empirical entry games with complementarities: An application to the shopping center industry. Working paper, The Wharton School of the University of Pennsylvania, Philadelphia.
Weinberg, C. B. 2005. Profits out of the picture: Research issues and revenue sources beyond the North American box office. C. C. Moul, ed. A Concise Handbook of Movie Industry Economics. Cambridge University Press, New York, 163­202.
Yang, S., G. M. Allenby. 2003. Modeling interdependent consumer preferences. J. Marketing Res. 40(3) 282­294.
Yang, S., V. Narayan, H. Assael. 2006. Estimating the interdependence of television program viewership between spouses: A Bayesian simultaneous equation model. Marketing Sci. 25(4) 336­349.

