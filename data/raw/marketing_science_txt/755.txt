Vol. 27, No. 3, May­June 2008, pp. 501­512 issn 0732-2399 eissn 1526-548X 08 2703 0501

informs ®
doi 10.1287/mksc.1070.0290 © 2008 INFORMS

Research Note
Optimal Mechanism for Selling a Set of Commonly Ranked Objects
Juan Feng
Warrington College of Business Administration, University of Florida, Gainesville, Florida, jane.feng@cba.ufl.edu
This paper designs an optimal mechanism for selling a set of commonly ranked objects. Although buyers rank these objects in the same order, the rates at which their valuations change for a less-preferred object might be different. Four stylized cases are identified according to this difference: parallel, convergent, divergent, and convergent-then-divergent. In general, the optimal mechanism cannot be interpreted as a conventional second-price auction. A reserve price is imposed for each object. Depending on which of the four stylized cases is considered, a higher-value bidder may be allocated a higher-ranked or lower-ranked object. There is also a positive probability that a higher-ranked object is not allocated while a lower-ranked one is allocated. In a departure from the extant mechanism-design literature, the individual-rationality constraint for a mid-range type of bidder can be binding.
Key words: Slot allocation; optimal mechanism; common ranking; auction History: This paper was received on February 3, 2006, and was with the authors 7 months for 2 revisions;
processed by Z. John Zhang. Published online in Articles in Advance March 24, 2008.

1. Introduction
Selling a set of commonly ranked objects is ubiquitous in the business world. For example, grocery stores often allocate shelf space to manufacturers by accepting "slotting allowances" (Kim 2005), where the shelf space at a more easily accessible height or location is usually the more highly valued. The Federal Trade Commission (FTC 2003) has estimated that it takes $1 million to over $2 million in slotting allowances to introduce a new grocery product nationwide, and the practice has spread to such industries as computer software, compact discs, books, magazines, apparel, over-the-counter drugs, and tobacco products (Bloom et al. 2000).
Another example is the popular practice of selling advertisement positions on search pages, which is commonly adopted by leading Internet players such as Yahoo! (Overture), Google (AdWords and Adsense), MSN (AdCenter), and eBay (AdContext). Because it is commonly accepted that a higher placement on a search page leads to higher traffic and, eventually, to an increased financial payoff (Cotriss 2002), a higher slot is more valuable to advertisers than its successors. These keyword auctions generate more than $5 billion, constituted 41% of the total Internet advertising revenue in 2005,1 and are widely credited for revitalizing the search engine business.2
1 http://www.iab.net/news/pr_2006_04_20.asp.
2 http://www.economist.com/displaystory.cfm?story_id=1932434.

These practices attract academic researchers in various areas. In the marketing literature, it is found that retailers can use slotting allowances to screen a high-demand product from a low-demand one (Chu 1992); manufacturers might also use them to signal a product's potential high demand to a retailer (Desai 2000). Whether slotting allowances are used as signals depends on the retailer's cost structure and information asymmetry in the distribution channel (Lariviere and Padmanabhan 1997). Rao and Mahi (2003) identify factors that might influence the relative magnitude of slotting allowances.
These papers, however, do not consider the allocation of multiple shelf slots to manufacturers, which is the focus of this paper. Other related allocation problems include the one-sided matching problem, such as assigning dormitory rooms to college students (Bogomolnaia and Moulin 2002), where the preferences of the students are revealed to the allocator. In this paper, however, the buyer preferences are known only through a distribution function and the "rightto-choose" auction, where bidders bid for the right to choose their ideal products in a sequence of auctions (Eliaz et al. 2007). There are also papers studying how to allocate the advertising spaces on a search page through the keyword auctions (Feng et al. 2007a, b; Liu and Chen, 2006). Different from these papers, which study a given mechanism, the purpose of this paper is to design an optimal mechanism.

501

Feng: Optimal Mechanism for Selling a Set of Commonly Ranked Objects

502

Marketing Science 27(3), pp. 501­512, © 2008 INFORMS

The most closely related literature addresses optimal auction design. The optimal auction mechanism for selling a single object was first established in Myerson (1981) and was extended to the case of multiple identical objects by Maskin and Riley (1990). Auctions of multiple heterogenous objects are usually complex. Many papers focus on modifying a small set of design parameters for a given mechanism, such as whether to sell the items separately or in bundles (Palfrey 1983, Avery and Hendershott 2000, Armstrong 2000) or whether a uniform-price auction generates more revenue than a "pay-as-bid" auction when consumers demand multiple items (Ausubel and Cramton 2002). Krishna (2002) provides an excellent survey of the literature in this stream.
This paper extends the optimal auction literature to study a set of commonly ranked objects. Although the valuations of buyers for these objects are ranked in the same order, the rates at which these valuations change might not be the same for all buyers. For example, a buyer with the highest valuation for a top-ranked object might have a higher or lower valuation for a lower-ranked object than another buyer, depending on the identities of the buyers. When competing for advertising positions in a search engine, for example, Wal-Mart might not see much difference between obtaining the first slot and the second. For a small firm that relies on these links to catch the consumer's eye, however, the difference between the two slots might be significant, and that firm might even attach a higher value to a higher-ranked slot than does Wal-Mart.
To address this property, the ranked-item environment is separated into four stylized cases; the optimal allocation and payment rules are quite different in each case. In the optimal mechanism, there is a reserve price for each position. Depending on the case, first, a higher-type buyer can be allocated a higher-ranked or lower-ranked object; second, there is a positive probability that a higher-ranked object is not allocated while a lower-ranked one is allocated; third, the payment for a winning object is at least as high as the valuation of the highest losing buyer for that object; and fourth, in a departure from the extant mechanism-design literature, the individualrationality (IR) constraint for a mid-range type of bidder can be binding.
This paper is organized as follows. In §2 the model and notation are introduced. Then the optimal mechanism under the four stylized cases is discussed in §3. The summary and some implementation issues are discussed in §4. Section 5 concludes with discussions about future research.
2. Model
Assume that a set of n risk-neutral buyers N = 1 2 n compete for K  n objects/positions.

Buyer types ti, i = 1 n are independent and drawn from a common distribution function F over

the interval T = a b a  0 , with associated den-

sity function f . Let = T n denote the product of

the sets of buyer types, and let -i = T n-1. Let t

denote the vector of buyer valuations t1 t2

tn

and f t be the joint density of vector t. Simi-

larly, let f t-i denote the joint density of t-i =

t1

ti-1 ti+1

tn . Thus, f t = iN f ti , and

f t-i = jN j=i f tj .

Assume that the seller has zero reservation val-

ues for each of the positions. Let v ti k represent buyer i's valuation for the kth-ranked object. For sim-

plicity, let v ti k = ti - ti k for k = 1 2 K, where ti and ti are positive for all ti  . Thus, a buyer's valuation drops for a lower-ranked object.

More important, the rate at which it drops, ti , can be type specific. Moreover, the difference between

any two types ti - tj is separable from the difference between the two values v ti k - v tj k . For simplicity, the difference between any two values is

assumed to be linear in the difference between the

two types. Thus, v ti k - v tj k = ti - tj S k ,  k, and  i = j. Here, S k represents the relationship

between v ti k - v tj k and ti - tj , which is independent of ti and can be different for a different rank k. For example, if v ti k = 5 - tik, then v ti k - v tj k = ti - tj -k , and S k = -k.
Based on how one buyer's valuation drops relative

to that of the others (they might drop at the same

rate, in which case ti is independent of ti; or some might drop faster/slower than others, depending on

their types), the environment can be categorized into

four stylized cases: parallel, convergent, divergent,

and convergent-then-divergent. In the parallel case,

let ti = ti and ti = , where > 0 is a constant, so that the valuation of each buyer drops for a

less-preferred object at the same rate. Thus, v ti k = ti - k. In the three other cases, let ti = ti, which allows the buyer valuations for less-preferred objects

to drop at different rates, depending on the type of

buyer. Also let ti = + ti , where is a constant. Thus, v ti k = - ti - k , and  K in the convergent case,  1 in the divergent case, and 1 < < K

in the convergent-then-divergent case. Figure 1 illus-

trates these four cases, where cases (b), (c), and (d)

are differentiated by the location of .

Given the density function f , the number of avail-

able objects K, the number of buyers n, and the val-

uation function v ti k (which is different in different cases), the seller's problem under each of the four

cases is to select a mechanism that maximizes the

seller's expected revenue, subject to the incentive-

compatibility (IC) and Individual Rationality (IR) con-

straints. By the revelation principle (Allen 1973, Green

Feng: Optimal Mechanism for Selling a Set of Commonly Ranked Objects

Marketing Science 27(3), pp. 501­512, © 2008 INFORMS

503

Figure 1 vi

Different Cases of Buyer Preferences with Respect to the Ranking of the Positions

(a) Parallel v(ti , k) = ti ­  k

(b) Convergent vi
v(ti , k) =  ­ ti(k ­ µ) µ  K

1 23

k

1 23

µk

(c) Divergent

(d) Convergent-then-divergent

vi v(ti , k) =  ­ ti(k ­ µ) vi µ  1

v(ti , k) =  ­ ti(k ­ µ) 1<µ<K

µ

123 k

1 µ2

3

k

and Laffont 1977, Myerson 1979), without loss of gen-

erality, only direct mechanisms--in which the buyers

simultaneously report their types to the auctioneer--

are considered. The auctioneer then decides who gets

which position and how much each bidder must pay.

Thus, a direct mechanism can be characterized by

two rules: an allocation rule and a payment rule. Let

P  1 2 K represent the allocation rule, and

let X  n represent the payment rule. The goal is

to identify the optimal rules P X that are incentive

compatible and individually rational. Let pi t represent the probability that buyer i wins an object, and

let xi t be the expected amount that buyer i will pay the seller. More specifically, let pik t represent the probability that buyer i wins the kth object, and let

xik t be buyer i's expected payment for the kth object.

Then, pi t =

k=K k=1

pik

t , and xi

t

=

k=K k=1

xik

t

.

Suppose the seller uses the direct mechanism

P X . Then buyer i's expected utility is

U p x ti =

k=K
v ti k pik ti t-i
-i k=1

- xik ti t-i f t-i dt-i (1)

The seller's expected utility is

k=K

U0 p x =

xik t f t dt

(2)

k=1 N

where

pik t  0  i  k  t 

(3)

pik t  1  k  t 

(4)

N

k=K

pik t  1  i  t 

(5)

k=1

where Equation (4) states that a position cannot be

allocated to more than one bidder, and Equation (5)

states that a buyer cannot win more than one position.

In addition, an IR condition ensures that by not

participating, buyers guarantee themselves a payment

of zero:

U p x ti  0  i  ti

(6)

The IC condition ensures that every buyer's true type is reported:

U p x ti ti  U p x s ti

k=K

=

v ti k pik s t-i - xik s t-i

-i k=1

· f t-i dt-i  i  ti  s = ti

(7)

Thus, the seller's goal is to identify the optimal pik t and xik t that maximize his expected payoff. That is,

max 2

subject to 3 4 5 6 and 7

A feasible mechanism is one that satisfies all five

constraints. Lemma 1 presents a simplified charac-

terization of such a mechanism. Define Q p ti =

-i

k=K k=1

S

k

pik

ti

t-i f

t-i

dt-i as the adjusted proba-

bility of winning, weighted by S k for different posi-

tions k.3

Lemma 1. When S k  0, an allocation mechanism is feasible if and only if

if s  ti then Q p s  Q p ti

(8)

ti

U p x ti = U p x a + Q p s ds

(9)

a

U p x a  0 and

(10)

345

Proofs are presented in the appendix. The case of S k < 0 is discussed in more detail for the divergent case.
Rearranging the objective function, this maximization problem can be transformed into

max

k=K N k=1

v ti

k - S k 1 - F ti f ti

pik t

· f t dt - N · U p x a

(11)

3 Consequently, Condition 8 can be understood as the adjusted monotonicity condition, which reduces to the standard monotonicity condition in (Myerson 1981) (when S k = 1  k).

Feng: Optimal Mechanism for Selling a Set of Commonly Ranked Objects

504

Marketing Science 27(3), pp. 501­512, © 2008 INFORMS

subject to (3), (4), (5), (8), (9), and (1). The details are provided in the appendix.
To facilitate subsequent discussions, define buyer i's contribution to the seller's objective function if winning position k as buyer i's "adjusted virtual value" for position k, denoted c ti k . For example, for the objective function (11), c ti k = v ti k - S k 1 - F ti /f ti . Assume that both F and 1 - F are log concave. Distributions satisfying these conditions are a subclass of the class of "increasing failure rate" distribution. This assumption is satisfied by many distributions, such as the uniform, normal, logistic, Chisquared, exponential, gamma, and beta (a  1 b  1).

3. The Four Stylized Cases
3.1. The Parallel Case First consider the case in which each buyer's valuation for a lower-ranked object drops at the same rate. This might happen when the buyers have similar backgrounds, tastes, or purpose for using the objects. For example, the valuations of Coca-Cola and Pepsi, the two major national cola brands, are likely to change at the same rate for a set of retail shelf slots. Let bidder i's valuation for position k, v ti k , be represented by ti - ti k = ti - k. The objective function, Equation (11), now becomes

max

k=K N k=1

ti

-

1

- f

F ti

ti

-

k

pik t

· f t dt - N · U p x a

(12)

It is straightforward to set U p x a = 0 because it has a negative sign. The adjusted virtual value, c ti k , is then defined as ti - 1 - F ti /f ti - k. Because ti - 1 - F ti /f ti is strictly increasing in ti, Equation (12) is maximized when the seller picks the collection of K buyers with the highest types, given that their virtual values are nonnegative.
There is a reserve price r k for each position k, which is determined by solving c r k k = r k - 1 - F r k /f r k - k = 0  k. It turns out, however, that the reserve price conditions are not "strict," in the sense that once the winners are determined, the allocation of the objects among them does not matter. This unique property can be shown from the objective function, where the expressions of ti and k are separable; this implies that the allocation among the winners is inconsequential.
With reserve prices, it is possible to have some positions left unallocated. To determine the number
of winners (represented by K < K), rank the bidders from the highest to the lowest, compare the highest bid with the highest reserve price and the secondhighest bid with the second-highest reserve price, and so on. If the reserve-price condition is not satisfied

for a certain position, delete one position at the bottom, and shift all bids up one rank. Repeat this until all the reserve-price conditions are satisfied for consecutive K positions starting from the most preferred object. Then the first K highest buyers are the winners. The unallocated position will be only at the bottom, because in this case it is always better for the seller to sell a higher-ranked object for a higher price, while it is easier for a buyer to meet the reserve-price condition for a higher position than for a lower one.
Define j t-i as the jth-highest type among all the buyers except i. The following proposition specifies the allocation rule:

Proposition 1 (Allocation Rule--Parallel). In the parallel case, the optimal allocation rule is to allocate one object to each of the K bidders of the highest types, given that the reserve-price conditions are satisfied. The allocation of the positions among the winners is inconsequential. Formally,



1 if k  K s.t s  k t-i and

pi s t-i = 0 otherwise

i  k s.t. c s i  0 (13)

where both k and i are integers.

The proof is straightforward from the discussion
above and is thus omitted. Proposition 1 shows that if
buyer valuations change in a similar way for a set of
objects, the actual allocation of the objects to the buy-
ers is inconsequential. Mathematically, this is because
in the objective function, the expressions ti and k are separable. How does the payment rule xi t make this allocation incentive compatible? Define Zkj t-i = k t-i - j, representing type k's valuation for the jth position. The optimal expected payment function
is thus determined by Equations (9), (13) and (1). For-
mally, we have Proposition 2.

Proposition 2 (Payment Rule--Parallel). In the

parallel case, the winner of position k, k = 1 K, pays

the valuation of the highest rejected buyer's valuation for

position k. That is, x ti

k

= Zk . K

This payment rule confirms the result that the allocation among the winners is inconsequential: As long

as a winner pays the K + 1's buyer's valuation for the winning object, the winner's utility is the same no matter which object is won.
This mechanism is illustrated in Figure 2, with four buyers and three objects. The payment scheme is represented by . The allocation rule is not marked specifically, because after the highest three buyers are identified as the winners, the allocations of the positions among them does not matter.

Feng: Optimal Mechanism for Selling a Set of Commonly Ranked Objects

Marketing Science 27(3), pp. 501­512, © 2008 INFORMS

505

Figure 2 vi

In the Parallel Case, the Three Highest Type Buyers Win and Pay the Fourth-Highest Type Buyer's Valuation for the Winning Position

c ti k = + ti - 1 - F ti /f ti - k . To maximize (14), the seller needs to identify the set of the highest nonnegative adjusted virtual values, which is again the K bidders with the highest types. There is a reserve price r k for each of the K positions that is determined by solving c r k k = 0  k.
How, then, should the positions be allocated among the winners? The optimal allocation should assign a more-preferred object (larger - k) to a buyer of a higher type (larger ti - 1 - Fi ti /fi ti ). Define j t-i as in §3.1, the jth highest type among all the buyers except i. Also, define

1

2

3

k

3.2. Nonparallel Cases In some scenarios, bidder valuations for objects at different ranks change at different rates. For example, when acquiring shelf spaces, a well-known national brand might not care about the placement of its product as much as would a small manufacturer with a new product of unknown quality. Depending on the budget or confidence about the market potential of its product, a small manufacturer's valuation for its most desirable placement could be either higher or lower than that of the established brand, and its valuation for a less-preferred placement could drop either faster or slower than that of the established brand, too. These scenarios are discussed in the following three stylized cases.
3.2.1. The Convergent Case. Suppose a highertype buyer's valuation, while remaining higher for each position, drops faster for a lower position than does a lower-type buyer's valuation. In this case, a higher-type buyer is more sensitive to which object is won than a lower-type buyer. This might happen when a national brand strongly needs a preferable placement to promote an important product. Represent bidder i's valuation for position k by v ti k = - ti k - , where  K. Because v ti k - v tj k = ti - tj - k , it follows that S k = - k  0. The objective function, Equation (11), becomes

max

k=K N k=1

+

ti

-

1

- f

F ti

ti

· f t dt - N · U p x a

- k pik t (14)

Again in this case, U p x a = 0 and the buyer with the lowest possible type (a) has a binding IR constraint. The adjusted virtual value is defined as

zk t-i = inf s c s k  0 and s  k t-i for k = 1 2 K (15)

and let z0 t-i = b, where b is the upper bound of the
buyer type. Thus, zk t-i is the smallest type that is
higher than k t-i , yet it satisfies the reserve price condition for position k. Similarly, let Zkj t-i = - zk j - represent type zk t-i 's valuation for the
jth position. Thus, we have Proposition 3.

Proposition 3 (Allocation Rule--Convergent). In the convergent case, the optimal allocation rule is to allocate a more-preferred object to a buyer of a higher type, as long as the reserve-price conditions are satisfied. In other words,



1 if zk t-i  s  zk-1 t-i

pik s t-i = 0

k=1 2 otherwise

K

(16)

Proposition 3 shows that when a high-type buyer's valuation drops faster than that of a low-type buyer, to maximize his revenue, the auctioneer should allocate a higher-ranked object to a higher-type buyer. This allocation rule satisfies two of the three criteria that Menezes and Monteiro (1998) mention: zero expected payoff for the lowest type, and the K highest valued bidders win. In contrast with Menezes and Monteiro (1998), however, with this mechanism, it is possible that a higher position is not allocated but a lower position is filled because of the restriction of the reserve prices.
The payment function is determined by taking Equations (16) and (9). Then, we have Proposition 4.
Proposition 4 (Payment Rule--Convergent). The optimal payment function for the highest-ranked object is xi1 t = Z11 t-i if pi1 = 1, and for the k'th highest-ranked object (k > 1)

xik t = v ti k - v ti k - Zkk t-i zk  ti  zk-1 · prob zk  ti  zk-1

Feng: Optimal Mechanism for Selling a Set of Commonly Ranked Objects

506

Marketing Science 27(3), pp. 501­512, © 2008 INFORMS

Figure 3 vi

In the Convergent Case, a Higher Type Buyer Is Allocated a More-Preferred Object and Pays No Less than the Next-Highest Buyer's Valuation for the Object Won

1

2

3

µk

= v ti k

1-

ti 0

n-1 n-1-k !

! k-1

!

F

y n-1-k

1-F

ti

ti 0

n-1 n-1-k !

! k-1

!

F

y n-1-k

1-F

y

k-1f y dy k-1f y dy

+

ti 0

y

n-1 n-1-k !

! k-1

!

F

y n-1-k

1-F

ti

k-1f y dy

ti 0

n-1 n-1-k !

! k-1

!

F

y n-1-k 1 - F

y

k-1f y dy

(17)

if pik = 1 k = 2

K.

Thus, the winner of the most preferred object needs
only to pay the second-highest bidder's valuation of
it. The payment for the remaining objects is higher
than that in the traditional highest rejected-bid auc-
tion. This can be easily shown by Equation (17),
because the payment for position k in a highest rejected-bid auction is Zkk t-i zk  ti  zk-1 , which is smaller than v ti k . Corollary 1 summarizes.

Corollary 1. In the convergent case, a winner will pay at least as much as the next-highest-type bidder's valuation for that object.

The intuition of this result is that, when valuations of different buyers for less-preferred objects fall at different rates, the seller has an incentive to optimally match objects to buyers to maximize his expected revenue. Charging a higher price than the highest rejected bid for a less-preferred object is the consequence of the truth-telling (IC) constraint. It prevents a higher-type buyer from shading her bid to win a less-preferred object and thus increases the seller's expected payoff. As a result, this mechanism also performs better than a typical second-price (or highest rejected-bid) sequential auction. Figure 3 illustrates this mechanism.

3.2.2. The Divergent Case. The divergent case describes a situation in which a higher-type buyer's valuation drops more slowly for a less-preferred object

than does a lower-type buyer's valuation. In this case
a lower-type buyer is more sensitive to which object
is won than is a higher-type buyer. This could hap-
pen when a small firm strongly needs a preferable
placement to catch the consumer's eye when promot-
ing a new product that is crucial for the firm's sur-
vival. Let  1 in the valuation function v ti k = - ti k - . Now, as opposed to the convergent case, the smaller the ti, the higher the values. Because v ti k - v tj k = ti - tj - k , it follows that S k = - k < 0.4 Thus, the IC Conditions (9) and (10) are rewritten
as follows:

b
U p x ti = U p x b - Q p s ds (18) ti

U p x b 0

(19)

Rearranging the objective function (see appendix for the details), it becomes

max

k=K N k=1

+

F ti + f

ti ti

Sk

pik t

· f t dt - N · U p x b

(20)

Because U p x b = 0, the buyer of the highest possible type b has a binding IR constraint. Again define c ti k = + ti + F ti /f ti - k as bidder i's adjusted virtual value for position k. Because S k is negative, to maximize the set of adjusted virtual values the K smallest types (ti) should be selected, given that their adjusted virtual values c ti k are nonnegative for the winning objects. is a constant, so this is equivalent to finding the best allocation that minimizes ti + F ti /f ti -S k . It is shown in Appendix A.4 that the optimal allocation is to allocate a lower position (larger k) to a lower type (smaller ti + F ti /f ti ).
Again there is a unique reserve price r k for each object k, which is determined by solving c r k k = 0,
 k. The number of actual winners (K  K) can be determined by calculating how many buyer types satisfy the reserve-price conditions, as in the parallel case. As a result, the unfilled position will be only at the bottom, as in the parallel case.
More specifically, define

dk t-i = sup s c s k  0 and s  K-k t-i for k = 1 2 K (21)

and d0 t-i equal to a, the lower bound of the buyers' value distribution. Thus dk t-i represents the largest type that is smaller than K-k t-i , or the kth-lowest type among other bidders, and that also satisfies the
reserve-price condition. Proposition 5 summarizes the
results above.

4 Lemma 1 cannot be directly applied.

Feng: Optimal Mechanism for Selling a Set of Commonly Ranked Objects

Marketing Science 27(3), pp. 501­512, © 2008 INFORMS

507

Proposition 5 (Allocation Rule--Divergent). In

the divergent case, the optimal allocation mechanism is to

allocate a lower-ranked object to a buyer with a smaller

ti, given that the reserve-price condition for that object is satisfied. In other words,



1 if dK-k t-i  s  dK-k+1 t-i

pik s t-i = 0

K=1 2 otherwise

K

(22)

Figure 4

In the "Divergent" Case, a Higher-Value Buyer is Allocated a Lower Position, and Pays No Less than the Next-Highest Buyer's Valuation for the Winning Position
vi

where K is the number of allocated slots.
Proposition 5 shows that when a lower-type buyer's valuation drops faster for a lower-ranked object than a higher-type buyer's does, the auctioneer should allocate a higher-ranked object to a lowertype buyer, given that the buyer's type is high enough to win one object. This special allocation is due to the negative coefficient of ti, - k - . It is counterintuitive that among the winners, a lower-type bidder gets a higher-ranked object. However, the high-type buyer cares less about which object is won than does a low-type buyer in this case; thus, this allocation generates the maximum revenue for the auctioneer. How does the payment scheme make this allocation incentive compatible?
Proposition 6 (Payment Rule--Divergent). The optimal payment function for the last position (K) is xi1 t = D1K t-i if pi1 = 1, while for the kth position (k  K),

xik t = v ti k 1 - prob dK-k  ti  dK-k+1

+ Dkk ti dK-k  ti  dK-k+1

· prob dK-k  ti  dK-k+1



= v ti

k 1-

F 1

n-1 !

ti n-1-k ! k-1 !

F 1

n-1 !

ti n-1-k ! k-1 !

ti k-1 1 - F y k-1 1-F

y y

 n-1-kf y dy
 n-1-kf y dy

+

1 ti

y

n-1 n-1-k !

! k-1

!

F

ti k-1 1 - F

y

n-1-kf y dy

1 ti

n-1 n-1-k !

! k-1

!

F

y k-1 1 - F

y

n-1-kf y dy

(23)

if pik = 1, k = 1

K - 1.

Thus, other than the one who wins the lowest position (the buyer with the least steep slope), all other winners are paying more than the nexthighest buyer's valuation for that winning position. Again, this property comes from the "truth-telling" (IC) constraint. Increasing the payment for a higherranked position prevents a buyer with a higher type from pretending to be a lower one to win a higher position--buyers have to pay more for higher positions, which results in lower profit under the divergent utility functions. This mechanism works better

r

1

2

3

k

than a simple second-price sequential auction, where the winners pay the next rejected buyer's valuation for their winning positions.
A numerical example is given in the appendix, and Figure 4 illustrates the optimal mechanism: Given the payment scheme, the highest-type bidder is better off winning the lowest-ranked object.
3.2.3. The Convergent-then-Divergent Case. Combining the convergent and divergent cases, suppose a high-type buyer's valuation for a lower position drops so dramatically that it can be lower than that of the competitors. Let 1 < < K in the valuation function v ti k = - ti k - . As v ti k - v tj k = ti - tj - k , it is straightforward that S k =
- k  0 when k  , and S k < 0 when k > . Again, one of the IC conditions (9) should be checked because the sign of S k changes before and after k = . More specifically, there exists a w  a b such that Equation (9) can be rewritten as

U

p

x

ti

=U

p

x

w

+

ti w

Q

p

s

ds

if ti  w

and

(24)

U

p

x

ti

=U

p

x

w

-

w ti

Q

p

s

ds

if ti < w

Accordingly,

U p x w 0

Rearranging the objective function (see A.5),

w
max
a

k=K N k=1

+

F ti + f

ti ti

-k pik t f t dt

b
+
w

k=K N k=1

+

ti

-

1

- f

F ti

ti

- k pik t

· f t dt - N · U p x w

(25)

Feng: Optimal Mechanism for Selling a Set of Commonly Ranked Objects

508

Marketing Science 27(3), pp. 501­512, © 2008 INFORMS

With a negative sign in the objective function, U p x w = 0. Thus, a middle-type buyer (w  a b can have a binding IR constraint, which is different from most of the mechanism-design literature. When ti  w, - k  0, it is optimal to follow the convergent case and allocate the highest-ranked objects to the buyers with the highest types (ti); when ti < w,
- k < 0, it is optimal to follow the divergent case and allocate the K - lowest-ranked objects to the lowest-type buyers. Proposition 7 summarizes this allocation rule.

Proposition 7 (Allocation Rule--Convergent then Divergent). For a given w  a b , the optimal allocation mechanism for the convergent-then-divergent case is: For each k < , allocate the highest remaining position to the buyers with the highest remaining ti, as long as ti  w and the adjusted virtual value is nonnegative

+

ti

-

1

- f

F ti

ti

-k 0

For each k > , allocate the remaining lowest position to
the buyers with the remaining lowest ti, as long as ti < w and the adjusted virtual value is nonnegative

+

ti

+

F f

ti ti

-k 0

Proposition 7 shows that the optimal allocation rule in this case is a combination of that in the convergent case, when k  , and the divergent case, when k > . The same combination applies to the payment rule. The proof follows the cases of - k  0 and - k < 0. Figure 5 illustrates this case.
Proposition 7 gives the optimal mechanism for a given w  a b . A higher-level decision is to choose the optimal w, which is a function of , n, and K. For example, the ideal w should have the property of having at least K - buyers whose types are

Figure 5 vi

The Convergent-then-Divergent Case Combines the Convergent and Divergent Cases

below w and at least

buyers whose types are

above w. This property indicates that, given K, the

optimal w should be nonincreasing in . But to com-

plete this mechanism, w should be preannounced.

Hence, there is a positive probability that if allocated

an object, a certain buyer whose type satisfies the

reserve-price condition will give the seller a higher

profit, but this buyer cannot win because her type

falls on the "wrong" side of w. This creates additional

inefficiency besides the inefficiency caused by reserve

prices in a typical optimal auction.

4. Implementation
This mechanism can be implemented as an auction with the following properties:
1. Bidders only need to report one nonrank-specific bid, but the object that a bidder wins, as well as the payment for the winning position, depends on the rank of her bid among all the other bids.
2. The seller imposes a reserve price for each of the objects.
3. As a result, certain positions might remain unfilled, if the reserve-price condition is not met.
In terms of performance, the optimal mechanism generates a higher expected revenue than does a standard second-price setting. This is a consequence of the IC constraint, as simply charging a "second" price will give a buyer an incentive not to bid truthfully and to win other positions with a possibly lower price.
The single-bid property greatly simplifies the communication of the auction rules to the participating bidders, as the auctioneer only needs to preannounce the allocation rule, with the corresponding payment functions for each object. To apply it to the allocation of shelf space using slotting allowances, manufacturers need to submit a lump-sum payment for display, and the space is allocated in accordance with the rank of bids. This mechanism can also be adopted to apply to the keyword auctions hosted by the major search engines. As current technologies make it possible to accurately monitor the click-through rate of each advertisement,5 advertisers need only to submit their willingness to pay for each "click" received from the search engine, which can be understood as bidders' type ti. The rank of the advertisement slots also depends on the rank of the bids received.
As opposed to the current practice used by Yahoo! and Google, where only a single reserve price is used, this optimal mechanism imposes a reserve price for each position. Consequently, the mechanism requires the auctioneer to fully commit to not selling a position

1

µ

2

5 Such Internet technologies make it possible to apply some

3

k

advanced pricing schemes (Liu and Zhang 2006).

Feng: Optimal Mechanism for Selling a Set of Commonly Ranked Objects

Marketing Science 27(3), pp. 501­512, © 2008 INFORMS

509

if the reserve price is not met. This full-commitment assumption is widely observed in practice. For example, in the airline industry, passengers in coach class are not allowed to sit in first class without paying extra, even when the first class is not full. In contests, the highest award given is sometimes the second prize, if the first prize remains unassigned. When allocating retail spaces, if no manufacturer is willing to pay a required amount for a certain position, the retailer can display its own private label to occupy the slot. This is a "credible threat" to enforce the reserve price, as the private labels tend to have higher retail margins than those of national brands (Cappo 2003). For keyword auctions, this can be done similarly by inserting an advertisement of the search engine itself, for example.
5. Conclusion
This paper shows how the earlier work on optimal auctions (Myerson 1981, Maskin and Riley 1990) can be extended and applied to the allocation of a set of commonly ranked objects, where bidders are permitted to purchase at most one item. The optimal way to sell such a ranked set of objects is quite different when preferences of buyers for different objects change in different ways. Thus, understanding buyer preferences is vital in determining the optimal mechanism. This mechanism works better than a simple second-price sequential auction. In terms of efficiency issues, however, aside from the inefficiency created by the reserve prices in a typical optimal auction, this optimal allocation mechanism in the convergent-thendivergent case can be more inefficient because of the choice of the "pivot" type among the buyers.
This paper assumes that every buyer's type is drawn from a common distribution function. It is straightforward to extend the setting to that of an asymmetric distribution. However, as in many optimal auctions with asymmetric value distribution functions, inefficiency may arise when the distribution functions have different domains. The optimal mechanism might favor buyers whose valuation is drawn from a tighter domain (Myerson 1981). The linearity assumption about user valuation functions might also be relaxed by adopting some nonlinear functions satisfying v ti k - v tj k = ti - tj S k .
This paper assumes that a bidder's valuation for a particular object does not depend on the allocation of other objects. This assumption might not fully convey the preferences of the bidders. Dholakia and Simonson (2005) points out that bidders' willingness to pay might be affected by the prices of auctions in the adjacent placement; it would be interesting to study the optimal mechanism under the more general cases. The case in which an auctioneer cannot commit to hold an object is another interesting extension.

Finally, when more than one seller competes for bidders, a more appropriate mechanism should aim to enhance the benefit of both the seller and the buyers (Shugan 2005).

Appendix

A.1. Model Proof of Lemma 1. To show the "only if" part,

U p x s ti

=

v ti k pik s t-i - xik s t-i f t-i dt-i

K -i

=

v s k + ti - s S k pik s t-i - xik s t-i f t-i dt-i

K -i

=U p x s +

ti - s S k pik s t-i f t-i dt-i

K -i

= U p x s + ti - s Q p s

The IC constraint implies that

U p x ti ti  U p x s ti + ti - s Q p s  s (26) Use (26) twice to get

ti -s Q p s  U p x ti -U p x s  ti -s Q p ti (27)

Then, when s  ti,

Q p s  Q p ti

which is Condition (8). Let ti - s = . Then (27) can also be written as

Q p s U p x s+ -U p x s  Q p s+

(28)

Qp s

is integrable and can be written as

ti a

Q

p

s

ds =

U p x ti - U p x a . Hence,

ti
U p x ti = U p x a + Q p s ds a

which is Condition (9). From Conditions (8), (9), and (6), we get U p x a  0.
From the other direction (the "if" part), to show (26), assume s  ti, and using (8) and (9), we get

ti
U p x ti = U p x s + Q p r dr s

ti
 U p x s + Q p s dr
s

= U p x s + ti - s Q p s

If s > ti, then
s
U p x ti = U p x s - Q p r dr ti
s
 U p x s - Q p s dr
ti
= U p x s + ti - s Q p s

Given Conditions (8), (9), and U p x a  0, we can
recover (6).
Thus when S k  0, pi t xi t is feasible if it satisfies (8), (9), (1), (3), (4), and (5).

Feng: Optimal Mechanism for Selling a Set of Commonly Ranked Objects

510

Marketing Science 27(3), pp. 501­512, © 2008 INFORMS

Rearranging the Objective Function. Rearrange the objective function (2):

U0 p x =

xik t f t dt
KN

=

pik t v ti k f t dt

NK

+

xik t - pik t v ti k f t dt (29)

NK

For the last term of Equation (29), using Equation (9),

xik t - pik t v ti k f t dt
NK

b

=-

U p x ti f ti dti

aN

b

ti

=-

U p x a + Q p s ds f ti dti

aN

a

b
= -N · U p x a -
aN

ti
Q p s ds f ti dti
a

b
= -N · U p x a -
aN

b
Q p s f ti dti ds
s

b

= -N · U p x a -

1 - F s Q p s ds

aN

= -N · U p x a -

S k 1 - F ti

NK

f ti

pik t f t dt

Substituting this back into Equation (29):

U0 p x = -N ·U p x a

+

NK

v

ti

k

-S

k

1-F ti f ti

pik t f t dt (30)

Thus, maximizing Equation (30) is equivalent to

max

NK

v ti

k

-S

k

1 - F ti f ti

pik t

· f t dt - N · U p x a

which is Equation (11).

A.2. The Parallel Case Proof of Proposition 2. From Equations (9) and (1),

U p x ti =

v ti k pik ti t-i - xik ti t-i

-i K

ti
= U p x a + Q p s ds
a

f t-i dt-i

The optimal expected-payment function is thus determined by

xik t = v ti k pik t -

ti
S

k

pik

s

f

s

ds

(31)

K

K

Ka

Thus, bidder i has to pay only when winning an object,

(if pik = 0  k, then the right-hand side of Equation (31) is

zero, and xi t = 0, so it is not an all-pay auction). If bidder i

wins position k, the payment will be xik = K v ti k pik t -

S k ti - zK t-i

= v ti

k

- v ti

k

+ Zk , where Zk is buyer

K

K

zK t-i 's valuation for position k.

A.3. The Convergent Case

To Show It Is Optimal to Allocate a Higher Position
(Larger - k) to a Buyer with a Higher-Type (Larger ti - 1 - Fi ti /fi ti ). Consider two ranked lists of yj and - k. The objective is to find the best allocation rule r j j  k to
allocate yj to - k to generate the largest sum of the product ( yj - r j ). First, consider only two terms in each list. Let yj be the j th highest value of ti - 1 - Fi ti /fi ti , comparing yj - k + yj+1 - k - 1 and yj+1 - k + yj - k - 1 . The difference between these two expressions is yj - yj+1 > 0. Thus, the summation of a higher-ranked y multiplied by a higher-valued - k generates the largest
sum. This can be generalized to the case where there are
more than two terms in each list.
Proof of Proposition 4. The payment function is deter-
mined by taking Equations (16) into (9):

xik = v ti k pik -

ti
S

k

pik f

s

ds

(32)

K

K

Ka

If buyer i is allocated the first object, then Equation (32)

becomes

xi1 = v ti 1 -

ti
S

1 pi1f

s

ds

a

Define Zkj t-i tion (in §3.2.1).

as buyer zk's valuation for

Then,

ti a

S

1

pi1f

s

ds = S

1

the j'th positi - z1 t-i =

v ti 1 - Z11 t-i . Thus, the optimal payment for the first

object is xi1 = Z11 t-i .

Now consider the second object. Buyer i can win the

second object only if ti is between the first-highest and

second-highest

ti a

S

2 pi2f

s

ds

buyers type other than = S 2 ti - z2 t-i z2  ti

ti . 

Thus, we z1 prob z2

get  ti

 z1 = v ti 2 - Z22 t-i z2  ti  z1 · prob z2  ti  z1 . It

follows from Equation (32) that the optimal payment for the

remaining object is

xi2 = v ti 2 - v ti 2 -Z22 t-i z2  ti  z1 ·prob z2  ti  z1 = v ti 2 1 - prob z2  ti  z1 + Z22 t-i z2  ti  z1

· prob z2  ti  z1

= v ti 2

1-

ti 0
ti 0

n-1 n-3 !

! 1

!

F

y n-3 1 - F

ti

n-1 n-3 !

! 1

!

F

y n-3

1-F

y

f y dy f y dy

+

ti 0

y

n-1 n-3 !

! 1

!

F

y n-3

1-F

ti

f y dy

ti 0

n-1 n-3 !

! 1

!

F

y

n-3

1-F

y

1f y dy

The optimal payment for the rest of the positions can be obtained the same way.

A Numerical Example of Convergent Allocation. As-

sume that buyers' types follow U 0 1 . The reserve price

for

position

k

is

1 2

-

/2

- k , which is decreasing in k.

If there are three positions available, and = 6, = 1, then

the

reserve

prices

for

positions

1,

2,

and

3

are

2 5

,

3 8

,

and

Feng: Optimal Mechanism for Selling a Set of Commonly Ranked Objects

Marketing Science 27(3), pp. 501­512, © 2008 INFORMS

511

1 3

,

respectively.

If

there

are

four

buyers

with

realized

types

t1 = 0 8, t2 = 0 6, t3 = 0 4, and t4 = 0 2, then positions 1, 2,

and 3 will be allocated to buyers 1, 2, and 3, respectively,

with expected payments for those positions being 4, 2.868,

and 1.999. Thus the revenue is 8.867. An illustration of this

example is depicted in Figure 3, where represents the

allocation and represents the payment. In a sequential

auction, however, although the exact payment is hard to

determine, its upper bound is simply the sum of the high-

est rejected bidders' valuations for the winning positions,

which is only 8.2.

A.4. The Divergent Case
Rearrange the Objective Function. Rearrange the last term of Equation (29):

xik t - pik t v ti k f t dt
K

b
= - U p x ti f ti dti a

b

ti

= -U p x b +

Q pi s ds f ti dti

a

a

b

s

= -U p x b +

Q p s f ti dti ds

a

a

b
= -U p x b + F s Q p s ds
a

b

= -U p x b + F ti

S k pik t f t-i dt-i dti

a

T-i K

= -U p x b + F ti S k pik t f t dt
K

To Show It Is Optimal to Allocate a Lower Position
(Larger k) to a Smaller ti. Let A represent the list of ti + F ti /f ti , and B represent the list of k - (which is -S k ). Assume first there are only three terms in each of
the lists, and 0 < A1 < A2 < A3, 0 < B1 < B2 < B3. The objective is to minimize i j AiBj . First A1B3 + A2B2 + A3B1 < A1B2 + A2B3 + A3B1 because A1 B3 - B2 + A2 B2 - B3 < 0; second, A1B3 + A2B2 + A3B1 < A1B1 + A2B2 + A3B3, because A1 B3 - B1 + A3 B1 - B3 = A1 - A1 B3 - B1 < 0. This shows A1B3 + A2B2 + A3B1 is the smallest of all the possible combinations. Thus, to allocate a lower position
to a smaller ti + F ti /f ti (lower type) is optimal. This result can be generalized to the case where each list
contains more than three entries.

A Numerical Example of Divergent Allocation. Assume that buyers' types follow a uniform distribution between 0 1 . Then, the reserve-price condition for position k is ti  /2 k - . If there are three positions available, = 0 and = 3 and the reserve prices for positions 1, 2, and 3 are 1, 0.75, and 0.6, respectively. If there are four buyers with realized types t1 = 0 8, t2 = 0 6, t3 = 0 4, and t4 = 0 2, then positions 1, 2, and 3 will be allocated to buyers 2, 3, and 4. The expected payments for those positions are 0.8694, 0.8668, and 1, while the winning bidders' values for the winning positions are 1.2, 1.4, and 2, respectively. If, however, the realized types are t1 = 0 9, t2 = 0 85, t3 = 0 8,

and t4 = 0 2, then t3 is allocated to position 1 and t4 is allocated to position 2; position 3, the bottom position, is not
allocated.

A.5. Convergent then Divergent
Rearrange the Objective Function. Rearrange the last term of Equation (29):

xik t - pik t v ti k f t dt
NK

w

a

=-

U p x ti f ti dti -

U p x ti f ti dti

aN

wN

w

w

=-

Upxw-

Q p s ds f ti dti

aN

aN

b

b

-

Upxw+

Q p s ds f ti dti

wN

wN

w

= -N × U p x w +

Qi pi s dsf ti dti

aN

b

-

Qi p s dsf ti dti

wN

w
= -N × U p x w +
aN

s
Q p s f ti dti ds
w

a
-
wN

s
Q p s f ti dti ds
w

w

= -N × U p x w +

F s Q p s ds

aN

a

-

1 - F s Q p s ds

wN

= -N × U p x w

w
+
aN
a
-
wN

F ti

S k pik ti t-i f t-i dt-i dti

-i K

1 - F ti

S k pik ti t-i f t-i dt-i dti

-i K

Substitute this back into Equation (29) and replace S k by - k; it is Equation (25).

References
Allen, G. 1973. Manipulation of voting schemes: A general result. Econometrica 41 587­602.
Armstrong, M. 2000. Optimal multi-object auctions. Rev. Econom. Stud. 67 455­481.
Ausubel, L. M., P. Cramton. 2002. Demand reduction and inefficiency in multi-unit auctions. Working paper, University of Maryland, College Park.
Avery, C., T. Hendershott. 2000. Bundling and optimal auctions of multiple products. Rev. Econom. Stud. 67 483­497.
Bloom, P. N., G. T. Gundlach, J. P. Cannon. 2000. Slotting allowances and fees: Schools of thought and the views of practicing managers. J. Marketing 64(2) 92­108.
Bogomolnaia, A., H. Moulin. 2002. A simple random assignment problem with a unique solution. Econom. Theory 19(3) 623­635.
Cappo, J. 2003. How retailer power changes marketing. Advertising Age 72(29) 16­17.

Feng: Optimal Mechanism for Selling a Set of Commonly Ranked Objects

512

Marketing Science 27(3), pp. 501­512, © 2008 INFORMS

Chu, W. 1992. Demand signalling and screening in channels of distribution. Marketing Sci. 11(4) 327­347.
Cotriss, D. 2002. Marketers report high ROI with paid listings. B to B 87(3) 19­20.
Desai, P. S. 2000. Multiple messages to retain retailers: Signaling new product demand. Marketing Sci. 1999(4) 381­389.
Dholakia, U. M., I. Simonson. 2005. The effect of explicit reference points on consumer choice and online bidding behavior. Marketing Sci. 24(2) 206­217.
Eliaz, K., T. Offerman, A. Schotter. 2007. Creating competition out of thin air: An experimental study of right-to-choose auctions. Games and Economic Behavior. Forthcoming.
Feng, J., H. K. Bhargava, D. Pennock. 2007a. Implementing sponsored search in web search engines: Computational evaluation of alternative mechanisms. Informs J. Comput. 19(1) 137­148.
Feng, J., Z. M. Shen, R. L. Zhan. 2007b. Ranked items auctions and online advertisement. Special Issue on E-Auctions for Procurement Operations, Production and Operations Management. 16(4) 510­522.
FTC. 2003. Slotting allowances in the retail grocery industry: Selected case studies in five product categories. FTC staff study, http://www.ftc.gov/os/2003/11/slottingallowancerpt031114. pdf.
Green, J., J. J. Laffont. 1977. Characterization of satisfactory mechanisms for the revelation of preferences for public goods. Econometrica 45(2) 427­438.

Kim, S. 2005. Shelf-Access Payments: Slotting Fees, Pay-To-Stay Fees And Exclusivity Deals. http://www.sen.ca.gov/sor/reports/ reports_by_subj/economy_employment/slotting.pdf.
Krishna, V. 2002. Auction Theory. Elsevier Science, New York.
Lariviere, M. A., V. Padmanabhan. 1997. Slotting allowances and new product introductions. Marketing Sci. 16(2) 112­128.
Liu, D., J. Chen. 2006. Designing online auctions with past performance information. Decision Support Systems. 42(3) 1307­1320.
Liu, Y., Z. J. Zhang. 2006. The benefits of personalized pricing in a channel. Marketing Sci. 25(1) 97­105.
Maskin, E., J. Riley. 1990. Optimal multi-unit auction. F. Hahn, ed. The Economics of Missing Markets, Information and Games. Oxford University Press, New York, 312­335.
Menezes, F. M., P. K. Monteiro. 1998. Simultaneous pooled auctions. J. Real Estate Finance Econom. 17(3) 219­232.
Myerson, R. 1979. Incentive compatability and the bargaining problem. Econometrica 47 61­73.
Myerson, R. 1981. Optimal auction design. Math. Oper. Res. 6 58­73.
Palfrey, T. R. 1983. Bundling decisions by a multiproduct monopolist with incomplete information. Econometrica 51 463­484.
Rao, A., H. Mahi. 2003. The price of launching a new product: Empirical evidence on factors affecting the relative magnitude of slotting allowances. Marketing Sci. 22(2) 246­268.
Shugan, S. M. 2005. Editorial: Marketing and designing transaction games. Marketing Sci. 24(4) 525­530.

